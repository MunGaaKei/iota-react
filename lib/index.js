import{jsxs as e,jsx as t,Fragment as n}from"react/jsx-runtime";import i from"classnames";import{debounce as a,uid as r,throttle as s,pick as l,title as o}from"radash";import{forwardRef as c,createElement as d,useCallback as u,useEffect as m,isValidElement as p,cloneElement as h,useState as g,useMemo as f,Children as v,useRef as b,useLayoutEffect as y,Fragment as N,createContext as k,useContext as C,useImperativeHandle as w}from"react";import{SkipPreviousRound as x,CloseRound as $,MinusRound as P,PlusRound as T,InboxTwotone as I,SyncAltRound as z,VisibilityRound as O,VisibilityOffRound as S,KeyboardArrowLeftRound as M,KeyboardArrowRightRound as D,CalendarMonthTwotone as j,PauseRound as E,PlayArrowRound as A,StopRound as B,FullscreenExitRound as Y,FullscreenRound as L,VolumeOffRound as V,VolumeDownRound as W,FeedOutlined as q,AspectRatioRound as F,OpenInNewRound as H,FileDownloadOutlined as R,RotateRightRound as X,RotateLeftRound as U,HideImageTwotone as G,MoreHorizRound as K,InfoOutlined as Z,SearchRound as _,CheckRound as J,UnfoldMoreRound as Q,KeyboardArrowDownRound as ee,ListAltRound as te,CloudUploadTwotone as ne,PlusSharp as ie}from"@ricons/material";import{useReactive as ae,useMemoizedFn as re,useClickAway as se,useCreation as le,useSize as oe}from"ahooks";import ce from"react-custom-scrollbars-2";import{createRoot as de}from"react-dom/client";import ue from"dayjs";import me from"dayjs/plugin/customParseFormat";import{createPortal as pe}from"react-dom";import he from"pubsub-js";import ge from"rc-virtual-list";const fe=n=>{const{icon:a,text:r,size:s,style:l={},className:o,...c}=n;return e("div",{className:i("i-loading-container",o),style:{fontSize:s,...l},...c,children:[a||t("svg",{width:"24",height:"24",stroke:"#000",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"i-loading-icon",children:t("circle",{cx:"12",cy:"12",r:"9.5",fill:"none",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:40,strokeDashoffset:0})}),r]})},ve=({outline:e,flat:t,loading:n,disabled:a,size:r="normal",block:s,round:l,square:o,secondary:c,className:d})=>i("i-btn",d,{"i-btn-outline":e,"i-btn-flat":t,"i-btn-block":s,"i-btn-loading":n,"i-btn-square":o,"i-btn-secondary":c,[`i-btn-${r}`]:"normal"!==r,round:l,disabled:a}),be=c(((e,i)=>{const{as:a="a",children:r,className:s,loading:l,flat:o,outline:c,square:u,secondary:m,size:p,round:h,href:g,ripple:f=!0,onClick:v,...b}=e;if(!r)return t(n,{});const y=[l&&t(fe,{},"loading"),d("span",{key:"content",className:"i-btn-content"},r)],N={className:ve(e),"data-ripple":f,onClick:e=>{l||b.disabled?e.stopPropagation():v?.(e)}};return d(a,"string"==typeof a?{ref:i,href:g,...N,...b}:{to:g||"",...N,...b},y)}));be.Toggle=function(e){const{active:n,activeClass:a,after:r,disabled:s,children:l,className:o,onClick:c,onToggle:d,...p}=e,h=ae({active:n,done:!0}),g=u((()=>{const e=void 0!==r,t=!h.active;Object.assign(h,{active:t,done:!e}),d?.(t),e&&setTimeout((()=>{h.done=!0}),16)}),[r]);return m((()=>{h.active!==n&&g()}),[n]),t(be,{className:i(o,{[a||""]:h.active},"i-btn-toggle"),...p,onClick:e=>{c?.(e),!s&&g()},children:t("div",{className:i("i-btn-toggle-content",{"i-btn-toggle-active":h.done}),children:h.active?r??l:l})})},be.Group=function(e){const{children:n,vertical:a,className:r,style:s}=e;return t("div",{className:i(r,a?"i-btn-group-vertical":"i-btn-group-horizonal"),style:s,children:n})};const ye=c(((e,t)=>{const{icon:n,size:a="1.425em",rotate:r,style:s,className:l,...o}=e;if(!p(n))return n;const c={ref:t,style:{transform:r?`rotate(${r}deg)`:void 0,...s,width:a,height:a},className:i("i-icon",l),...o};return h(n,c)}));function Ne(e){const{style:n,className:a,onClick:r}=e;return t(be,{square:!0,className:i("i-affix-totop",a),style:{...n},onClick:r,children:t(ye,{icon:t(x,{}),rotate:90})})}const ke=e=>{const{position:n="fixed",left:r,top:s,right:l,bottom:o,offset:c,style:d,className:u,children:p,getContainer:b=()=>document.body}=e,[y,N]=g(!1),k=f((()=>v.map(p,(e=>{if(e.type===Ne){const{onClick:t}=e.props;return h(e,{key:e.key,...e.props,onClick:e=>{const n=b();t?.(e),n?.scrollTo({top:0,left:0,behavior:"smooth"})}})}return e}))),[p,b]);return m((()=>{const e=b();if(!c||!e)return;console.log(e);const t=a({delay:160},(()=>{const t=e.scrollTop;console.log(t),N(t<c)}));return t(),e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}}),[c,b]),t("div",{className:i("i-affix",u,{"i-affix-hidden":y}),style:{...d,position:n,left:r,top:s,right:l,bottom:o},children:k})};function Ce(e){const{layout:n="ltcb",style:a,className:r,children:s}=e;return t("div",{style:a,className:i(`i-area i-area-${n}`,r),children:s})}ke.ToTop=Ne,Ce.Item=function(e){const{name:n="content",style:a,className:r,children:s}=e;return t(ce,{className:i(`i-area-${n}`,r),style:{gridArea:n,...a},autoHide:!0,renderView:e=>t("div",{...e,className:"i-area-scrollview"}),children:s})};const we=n=>{const{content:a,contentClass:r,dot:s,dotSize:l,round:o,disabled:c,style:d,className:u,children:m}=n;return e("div",{style:d,className:i("i-badge",{rounded:o},u),children:[m,t("div",{className:i("i-badge-content",r,{"i-badge-dot":s,"i-badge-hidden":c}),style:{fontSize:l},children:a})]})},xe=e=>n=>t("div",{style:n.style,className:i("i-card-"+e,n.className),children:n.children}),$e=xe("header"),Pe=xe("footer"),Te=xe("banner"),Ie=xe("tail"),ze=n=>{const{shadow:a=!0,border:r,style:s,className:l,children:o}=n,c=f((()=>{const e={};return v.map(o,(t=>{switch(t.type){case $e:e.header=t;break;case Pe:e.footer=t;break;case Te:e.banner=t;break;case Ie:e.tailer=t;break;default:e.content=[...e.content||[],t]}})),e}),[o]),{header:d,banner:u,content:m,footer:p,tailer:h}=c;return e("div",{style:s,className:i("i-card",l,{shadow:a,"i-card-bordered":r}),children:[u,d,m&&t("div",{className:"i-card-content",children:m}),p,h]})};var Oe;function Se(e,t,n={}){const{refWindow:i,gap:a=0,offset:r=0,position:s="top",align:l}=n;if(!e||!t)return[0,0,{arrowX:0,arrowY:0,arrowPos:"bottom"}];const o=e.getBoundingClientRect(),c=t.getBoundingClientRect();let d=window.innerWidth,u=window.innerHeight,{left:m,top:p,right:h,bottom:g,width:f,height:v}=o;const{height:b,width:y}=c;if(!i){const t=e.offsetParent?.getBoundingClientRect();d=t?.width||d,u=t?.height||u,m=e.offsetLeft,p=e.offsetTop,h=m+o.width,g=p+o.height}let N=0,k=0,C=0,w=0,x="bottom";switch(s){case"left":case"right":N=v!==b?De({containerSize:u,targetSize:v,targetOffset:p,contentSize:b,gap:a,align:l}):p,w=N<p?p-N+v/2:v/2;const e=m-r-y,t=h+r+y;"left"===s?(k=e<0?h+r:e,C=e<0?0:y,x=e<0?"left":"right"):(k=d>t?h+r:e,C=d>t?0:y,x=d>t?"left":"right");break;case"top":case"bottom":k=f!==y?De({containerSize:d,targetOffset:m,targetSize:f,contentSize:y,gap:a,align:l}):m,C=k>m?y/2:m-k+f/2;const n=p-r-b,i=g+r+b;"top"===s?(N=n<0?g+r:n,w=n<0?0:b,x=n<0?"top":"bottom"):(N=u>i?g+r:n,w=u>i?0:b,x=u>i?"top":"bottom")}return[k,N,{arrowX:C,arrowY:w,arrowPos:x}]}function Me(e,t){const{pageX:n,pageY:i}=e,{width:a,height:r}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:l}=window;return[n+a>=l&&n-a>0?n-a:n,i+r>=s&&i-r>0?i-r:i]}function De({containerSize:e,targetSize:t,targetOffset:n,contentSize:i,gap:a,align:r="center"}){const s=n+t/2;switch(r){case"start":return n+i>e?n+t:n;case"center":return t>=i?s-i/2:s+i/2+a>e?n+t-i:s-i/2-a<0?a:s-i/2;case"end":const r=n+t-i;return r>0?r:a;default:return s-i/2}}function je(e){return e.map((e=>["string","number"].includes(typeof e)?{label:e,value:e}:e))}function Ee(e,t={}){const{precision:n,thousand:i}=t,a=e.toFixed(n);if(!i)return a;const r=a.split("."),s=r[0].replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,`$&${i}`);return 1===r.length?s:`${s}.${r[1]}`}function Ae(e,t=document.body){const n=document.createElement("div");t.append(n);const i=de(n),a=setTimeout((()=>{i?.render(e)}),0);return()=>{n?.remove(),i?.unmount(),a&&clearTimeout(a)}}function Be(e){return e.match(/\.([^\./\?]+)($|\?)/)?.[1]}function Ye(e,t){switch(!0){case["jpg","jpeg","png","webp","svg"].includes(e)||t?.startsWith("image/"):return Oe.IMAGE;case["mp4","avi"].includes(e)||t?.startsWith("video/"):return Oe.VIDEO;default:return Oe.UNKNOWN}}function Le(e,t=2){if(!+e)return"0 Bytes";const n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,i)).toFixed(n))} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}`}function Ve(e,t,n){return e<t?t:e>n?n:e}function We(n){const{type:a="default",label:r,name:s,value:l=!1,className:o,status:c="normal",message:d,disabled:u,partof:p,children:h,onChange:g,...f}=n,v=ae({value:l,status:c,message:d}),b=re((e=>{const t=e.target.checked;Object.assign(v,{value:t,status:c,message:d}),g?.(t,e)}));return m((()=>{v.value=l}),[l]),e("label",{className:i("i-checkbox-item",{[`i-checkbox-${v.status}`]:"normal"!==v.status,disabled:u},o),...f,children:[t("input",{type:"checkbox",name:s,className:i("i-checkbox-input",{[`i-checkbox-${a}`]:!p,"i-checkbox-partof":p}),checked:v.value,disabled:u,onChange:b}),t("span",{className:"i-checkbox-text",children:h||r}),v.message&&e("span",{className:"i-checkbox-message",children:["*",v.message]})]})}function qe(n){const{label:a,name:r,options:s=[],value:l="",type:o="default",optionInline:c=!0,labelInline:d,disabled:u,status:p="normal",message:h,required:g,className:v,onChange:b,...y}=n,N=ae({value:l}),k=f((()=>je(s)),[s]),C=re(((e,t,n)=>{const i=[...N.value],a=i.findIndex((e=>e===t.value));e&&a<0?i.push(t.value):!e&&a>-1&&i.splice(a,1),N.value=i,b?.(i,t,n)}));return m((()=>{N.value=l}),[l]),e("div",{className:i("i-checkbox i-input-label",{[`i-checkbox-${p}`]:"normal"!==p,"i-input-inline":d},v),...y,children:[a&&e("span",{className:"i-input-label-text",children:[g&&t("span",{className:"error",children:"*"}),a,h&&t("p",{className:"i-checkbox-message",children:h})]}),t("div",{className:i("i-checkbox-options",{"i-options-block":!c,"i-checkbox-options-button":"button"===o}),children:k.map((e=>t(We,{name:r,value:N.value.includes(e.value),type:o,disabled:u||e.disabled,onChange:(t,n)=>C(t,e,n),children:e.label},e.value)))})]})}ze.Header=$e,ze.Footer=Pe,ze.Banner=Te,ze.Tailer=Ie,function(e){e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.PDF="PDF",e.EXCEL="EXCEL",e.TXT="TXT",e.UNKNOWN="UNKNOWN"}(Oe||(Oe={})),qe.Item=We;const Fe=e=>{const{as:a="a",active:s,className:l,icon:o=t($,{}),...c}=e;return s?d(a,{className:i("i-helpericon",l),...c},[d(ye,{key:r(3),icon:o})]):t(n,{})};const He=n=>{const{active:a,items:r,multiple:s,border:l,headerClickable:o,className:c,children:d,renderToggle:u=e=>t(e?P:T,{}),onCollapse:m,...p}=n,h=ae({active:a}),g=f((()=>r||(d&&v.map(d,((e,t)=>{const{key:n,props:i}=e,{title:a,children:r,content:s,disabled:l,...o}=i;return{...o,key:n||t,title:a,content:r||s,disabled:l}}))||[])),[d]),b=e=>{const{key:t,disabled:n}=e;if(n)return;if(!s)return h.active=h.active===t?void 0:t,void m?.(t,void 0!==h.active);Array.isArray(h.active)||(h.active=[]);const i=h.active.findIndex((e=>e===t));i>-1?h.active.splice(i,1):void 0!==t&&h.active.push(t),m?.(t,i<0)};return t("div",{className:i("i-collapse",{"i-collapse-bordered":l},c),...p,children:g.map((n=>{const{key:a,title:r,content:l,disabled:c,className:d,...m}=n,p=s?(h.active||[]).includes(a):h.active===a;return e("div",{className:i("i-collapse-item",d,{"i-collapse-active":p,"i-collapse-disabled":c}),...m,children:[e("div",{className:"i-collapse-header",onClick:()=>(e=>{o&&b(e)})(n),children:[r,t(Fe,{active:!0,className:"i-collapse-toggle",icon:u(p),onClick:()=>b(n)})]}),t("div",{className:"i-collapse-content",children:l})]},a)}))})};function Re(e){const{className:n,...a}=e;return t(I,{className:i("i-empty",n),...a})}function Xe({justify:e,col:t,row:n,colSpan:i=1,rowSpan:a=1}){return{"--datagrid-justify":e,gridArea:`${n+1} / ${t+1} / ${n+1+a} / ${t+1+i}`,insetInline:`var(--datagrid-cell-inset-${t})`}}function Ue(e){const{column:n,row:a,col:r,data:s,onCellClick:l,onCellDoubleClick:o}=e,{id:c,fixed:d,justify:u,rowSpan:m,render:p}=n,h=Xe({justify:u,fixed:d,col:r,row:a,rowSpan:m});return t("div",{className:i("i-datagrid-cell",{[`i-datagrid-cell-fixed-${d}`]:d}),"data-col":c,style:h,onClick:e=>l?.(s,n,a,r,e),onDoubleClick:e=>o?.(s,n,a,r,e),children:p?.(s[c],s,r)??t("div",{className:"i-datagrid-cell-content",children:s[c]})})}He.Item=function(e){return t(n,{})};const Ge=new Set,Ke=new Set;function Ze(e){m((()=>(Ge.add(e),()=>{Ge.delete(e)})),[e])}function _e(e){m((()=>(Ke.add(e),()=>{Ke.delete(e)})),[e])}function Je(e){const t=new WeakMap,n=new IntersectionObserver((e=>{e.map((e=>{const n=t.get(e.target);n?.(e.target,e.isIntersecting)}))}),e);return{observe:function(e,i){t.get(e)||(t.set(e,i),e&&n.observe(e))},unobserve:function(e){e&&n.unobserve(e),t.delete(e)},disconnect:function(){n.disconnect()}}}function Qe(e){const{index:n,onWidthChange:i}=e,a=ae({resizing:!1,x:0,width:0}),r=re((e=>{const t=e.target.offsetParent.offsetWidth;Object.assign(a,{x:e.pageX,resizing:!0,width:t})}));return Ze(re((e=>{if(!a.resizing)return;e.preventDefault();const t=a.width+e.pageX-a.x;t<=24||i(n,t)}))),_e((()=>{a.resizing&&(a.resizing=!1)})),t("i",{className:"i-datagrid-resizor",onMouseDown:r,onClick:e=>e.stopPropagation()})}document.addEventListener("mousemove",(e=>{for(const t of Ge.values())t(e)})),document.addEventListener("mouseup",(e=>{for(const t of Ke.values())t(e)}));const et=e=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e,children:t("g",{fill:"none",children:t("path",{d:"M9 17.898c0 1.074 1.265 1.648 2.073.941l6.31-5.522a1.75 1.75 0 0 0 0-2.634l-6.31-5.522C10.265 4.454 9 5.028 9 6.102v11.796z",fill:"currentColor"})})});function tt(n){const{type:a}=n;return e("a",{className:i("i-datagrid-sorter",{[`i-datagrid-sorter-${a}`]:a}),children:[t(et,{className:"i-datagrid-sorter-caret"}),t(et,{className:"i-datagrid-sorter-caret"})]})}function nt(e){const{row:n,data:i,columns:a,onRowClick:r,onCellClick:s,onCellDoubleClick:l}=e;return t("div",{className:"i-datagrid-row",onClick:()=>r?.(i,n),children:a.map(((e,a)=>t(Ue,{column:e,col:a,row:n,data:i,onCellClick:s,onCellDoubleClick:l},a)))})}function it(n){const{columns:a,resizable:r,sortBy:s,sortType:l,onWidthChange:o,onHeaderClick:c}=n;return t("div",{className:"i-datagrid-header i-datagrid-row",children:a.map(((n,a)=>{const{id:d,title:u,fixed:m,colSpan:p,sorter:h,justify:g,renderHeader:f}=n,v=Xe({justify:g,row:0,col:a,colSpan:p}),b=s===d?l:"";return e("div",{"data-col":d,className:i("i-datagrid-cell",{"i-datagrid-has-sorter":h,"i-datagrid-cell-fixed":m}),style:{...v,insetBlockStart:0},onClick:e=>c?.(n,e),children:[f?.(n,a)??t("div",{className:"i-datagrid-cell-content",children:u||d}),h&&t(tt,{type:b}),r&&t(Qe,{index:a,onWidthChange:o})]},a)}))})}const at=n=>{const{data:a=[],columns:r=[],border:s,striped:l,header:o=!0,resizable:c,cellPadding:d=".5em",empty:p=t(Re,{}),loading:h,height:g="unset",style:v,className:y,renderLoading:N=()=>t(fe,{size:"1.5em",className:"color-3"}),onCellClick:k,onRowClick:C,onHeaderClick:w,onSort:x,onScroll:$,onResize:P}=n,T=b(null),I=b(null),z=ae({rows:a,widths:r.map((e=>e.width??"auto")),sortBy:"",sortType:""}),O=f((()=>{const{widths:e}=z,t={...v,"--grid-template-columns":e.map((e=>"number"==typeof e?`${e}px`:e)).join(" ")};if(!c)return t;const n=r.map(((t,n)=>{const{fixed:i}=t;return i?e[n]:0}));return r.map(((e,i)=>{const{fixed:a}=e;if(a)if(0===i)t["--datagrid-cell-inset-0"]=0;else if(i===n.length-1)t["--datagrid-cell-inset-"+(n.length-1)]="auto 0";else{const e="left"===a,r=(e?n.slice(0,i):n.slice(i+1)).reduce(((e,t)=>e+t))+"px",s=e?`${r} auto`:`auto ${r}`;t[`--datagrid-cell-inset-${i}`]=s}})),t}),[z.widths,c]),S=u(((e,t)=>{if(!c)return;const[...n]=z.widths;n[e]=t,z.widths=n,P?.(r[e],t)}),[c]),M=u(((e,t)=>{if(e?.sorter){const[t,n]=function(e,t,n){const i=["desc","asc"];if(e===n){const e=i.findIndex((e=>e===t))+1,a=i[e]||"";return[""===a?"":n,a]}return[n,"desc"]}(z.sortBy,z.sortType,e.id);Object.assign(z,{sortBy:t,sortType:n}),x?.(t,n)}w?.(e,t)}),[]),D=f((()=>{const{sortBy:e,sortType:t}=z;if(e&&!x){const n=r.find((t=>t.id===e))?.sorter,i="function"==typeof n?n:(t,n)=>n[e]-t[e],s=[...a].sort(i);return"desc"===t?s:s.reverse()}return a}),[a,r,z.sortBy,z.sortType]);m((()=>{if(!T.current)return;const{current:e}=T,t=e.querySelector(".i-datagrid-row")?.children;t?.length&&(z.widths=Array.from(t).map((e=>e.offsetWidth)))}),[r,c]),m((()=>{h&&I.current?.scrollTop(0)}),[h]);const j={"--padding":d,...O};return e(ce,{ref:I,autoHide:!0,autoHeight:!0,autoHeightMax:g,style:j,className:i("i-datagrid-container",y,{"i-datagrid-bordered":s,"i-datagrid-striped":l}),renderView:e=>t("div",{...e,className:i({"i-datagrid-loading":h})}),onScroll:$,children:[e("div",{ref:T,className:"i-datagrid",children:[o&&t(it,{columns:r,resizable:c,sortType:z.sortType,sortBy:z.sortBy,onWidthChange:S,onHeaderClick:M}),D.map(((e,n)=>t(nt,{row:n+(o?1:0),data:e,columns:r,onCellClick:k,onRowClick:C},n))),D.length<1&&p]}),h&&N()]})};function rt(n){const{label:a,className:r,labelInline:s,style:l,children:o,status:c,tip:d,required:u}=n;return e("label",{className:i("i-input-label",r,{"i-input-inline":s}),style:l,children:[a&&e("span",{className:"i-input-label-text",children:[u&&t("span",{className:"error",children:"*"}),a]}),o,d&&t("span",{className:i("i-input-message",{[`i-input-${c}`]:"normal"!==c}),children:d})]})}const st=c(((n,a)=>{const{label:r,name:s,value:l=n.initValue??"",initValue:o,labelInline:c,step:d=1,min:p=-1/0,max:h=1/0,thousand:g,precision:f,type:v,className:b,status:y="normal",append:N,border:k,prepend:C,message:w,tip:x,hideControl:$,style:I,onChange:z,onEnter:O,onInput:S,onBlur:M,...D}=n,j=ae({value:l}),E=u((e=>Ve(e,p,h)),[p,h]),A=u((e=>Ee(e,{precision:f,thousand:g})),[f,g]),B=u((e=>e?"number"!=typeof e&&g?e.replaceAll(g,""):e:""),[g]),Y=re((e=>{const{value:t}=e.target,n=B(t.replace(/[^\d\.-]/g,""));j.value=n,z?.(+n,e)})),L=re((e=>{const t=B(j.value)??0,n=E(+t+e);j.value=A(n),z?.(n)}));m((()=>{j.value=l}),[l]);const V={ref:a,name:s,value:j.value,className:"i-input i-input-number",onChange:Y,...D};return t(rt,{label:r,labelInline:c,className:b,style:I,tip:w??x,status:y,children:e("div",{className:i("i-input-item",{[`i-input-${y}`]:"normal"!==y,"i-input-borderless":!k}),children:[C&&t("div",{className:"i-input-prepend",children:C}),!$&&t(Fe,{active:!0,icon:t(P,{}),onClick:()=>L(-d)}),t("input",{...V}),!$&&t(Fe,{active:!0,icon:t(T,{}),onClick:()=>L(d)}),N&&t("div",{className:"i-input-append",children:N})]})})})),lt=c(((e,n)=>{const{label:a,name:r,value:s=e.initValue??"",initValue:l,labelInline:o,className:c,status:d="normal",message:p,tip:h,autoSize:g,border:f,style:v,onChange:y,onEnter:N,...k}=e,C=ae({value:s}),w=b(null),x=u((e=>{const t=e.target.value;C.value=t;const n=w.current?.firstChild;g&&n&&(n.style.height=`${n.scrollHeight}px`),y?.(t,e)}),[]),$=re((e=>{"Enter"===e.code&&N?.()}));m((()=>{C.value=s}),[s]);const P={ref:n,name:r,value:C.value,className:"i-input i-textarea",onChange:x,onKeyDown:$,...k};return t(rt,{label:a,labelInline:o,className:c,style:v,tip:p??h,status:d,children:t("div",{ref:w,className:i("i-input-item",{[`i-input-${d}`]:"normal"!==d,"i-input-borderless":!f}),children:t("textarea",{...P})})})})),ot=c(((n,a)=>{const{type:r="text",label:s,name:l,value:o=n.initValue??"",initValue:c="",prepend:d,append:p,labelInline:h,className:g,status:v="normal",message:b,tip:y,clear:N,hideVisible:k,border:C,required:w,onChange:x,onEnter:$,style:P,...T}=n,I=ae({value:o,type:r,visible:!1}),z=u((e=>{const t=e.target.value;I.value=t,x?.(t,e)}),[]),M=re((e=>{"Enter"===e.code&&$?.()})),D=f((()=>{if("password"===r)return I.visible?t(O,{}):t(S,{})}),[I.visible]);m((()=>{I.value=o}),[o]);const j={ref:a,type:I.type,name:l,value:I.value,className:i("i-input",`i-input-${r}`),onChange:z,onKeyDown:M,...T},E=N&&I.value,A="password"===r&&!!I.value;return t(rt,{label:s,labelInline:h,className:g,style:P,tip:b??y,status:v,required:w,children:e("div",{className:i("i-input-item",{[`i-input-${v}`]:"normal"!==v,"i-input-borderless":!C}),children:[d&&t("div",{className:"i-input-prepend",children:d}),t("input",{...j}),t(Fe,{active:!!E||A,icon:D,onClick:()=>{if("password"===r&&!k)return void Object.assign(I,{visible:!I.visible,type:I.visible?"password":"text"});x?.("")}}),p&&t("div",{className:"i-input-append",children:p})]})})}));ot.Textarea=lt,ot.Number=st,ot.Range=n=>{const{label:a,name:r,value:s=n.initValue??"",initValue:l,labelInline:o,min:c=-1/0,max:d=1/0,type:p,className:h,status:g="normal",message:f,tip:v,append:b,prepend:y,step:N=1,thousand:k,precision:C,hideControl:w,placeholder:x,border:$,onChange:I,onBlur:O,style:S,...M}=n,D=ae({value:s}),j=u((e=>Ve(e,c,d)),[c,d]),E=u((e=>Ee(e,{precision:C,thousand:k})),[C,k]),A=u((e=>e?"number"!=typeof e&&k?e.replaceAll(k,""):e:""),[k]),B=re(((e,t)=>{const{value:n}=e.target,i=A(n.replace(/[^\d\.-]/g,"")),a=Array.isArray(D.value)?D.value:[];a[t]=+i,D.value=a,I?.(a,e)})),Y=re(((e,t,n)=>{e.preventDefault(),e.stopPropagation();const i=Array.isArray(D.value)?D.value:[],a=A(i[n])??0,r=j(+a+t);i[n]=E(r),D.value=i,I?.(i,e)})),L=re((e=>{e.preventDefault(),e.stopPropagation();const t=D.value??[],n=t[0];t[0]=t[1],t[1]=n,D.value=t,I?.(t)}));m((()=>{D.value=s}),[s]);const V={name:r,className:"i-input i-input-number",...M};return t(rt,{label:a,labelInline:o,className:h,style:S,tip:f??v,status:g,children:e("div",{className:i("i-input-item",{[`i-input-${g}`]:"normal"!==g,"i-input-borderless":!$}),children:[y&&t("div",{className:"i-input-prepend",children:y}),!w&&t(Fe,{active:!0,icon:t(P,{}),onClick:e=>Y(e,-N,0)}),t("input",{value:D.value?.[0]||"",placeholder:x?.[0],...V,onChange:e=>B(e,0)}),!w&&t(Fe,{active:!0,icon:t(T,{}),onClick:e=>Y(e,N,0)}),t(Fe,{active:!0,icon:t(z,{}),style:{margin:0},onClick:L}),!w&&t(Fe,{active:!0,icon:t(P,{}),onClick:e=>Y(e,-N,1)}),t("input",{value:D.value?.[1]||"",placeholder:x?.[1],...V,onChange:e=>B(e,1)}),!w&&t(Fe,{active:!0,icon:t(T,{}),onClick:e=>Y(e,N,1)}),b&&t("div",{className:"i-input-append",children:b})]})})};const ct=c(((n,a)=>{const{getContainer:r=e=>e?.offsetParent??document.body,trigger:s,arrow:l,arrowProps:o={},className:c,children:d,...u}=n,m=f((()=>{let{left:e,top:t,pos:n}=o,i="";switch(n){case"left":e+=2,i="translate(-100%, -50%) rotate(180deg)";break;case"right":e-=2,i="translate(0, -50%)";break;case"top":t-=2,i="translate(-50%, -50%) rotate(-90deg)";break;case"bottom":t+=2,i="translate(-50%, -50%) rotate(90deg)"}return{left:e,top:t,transform:i}}),[o]),p=e("div",{ref:a,className:i("i-popup",c),...u,children:[l&&t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"i-popup-arrow",style:m,children:t("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z"})}),d]});return pe(p,r(s))}));function dt(i){const{visible:a=!1,content:r,trigger:s="hover",gap:l=12,offset:o=8,fixed:c,position:d="top",showDelay:u=16,hideDelay:g=12,touchable:N,arrow:k=!0,align:C,fitSize:w,watchResize:x,clickOutside:$=!0,disabled:P,referToWindow:T,style:I,className:z,getContainer:O,children:S,onVisibleChange:M}=i,D=b(null),j=b(null),E=ae({show:!1,toggling:!1,style:{position:c?"fixed":"absolute"},arrowProps:{}});se((e=>{if(!$)return;const t=e.target,n=D.current?.contains(t);E.show&&(!n||"contextmenu"===s)&&Y(!1)}),j);const A=()=>{P||E.show&&("hover"!==s||"hover"===s&&!N)||(E.show=!0,E.toggling&&clearTimeout(E.toggling),E.toggling=setTimeout((()=>{const[e,t,{arrowX:n,arrowY:i,arrowPos:a}]=Se(D.current,j.current,{position:d,gap:l,offset:o,align:C,refWindow:T});E.style={...E.style,opacity:1,transform:"none",left:e,top:t},E.arrowProps={left:n,top:i,pos:a},E.toggling&&clearTimeout(E.toggling),M?.(!0)}),u))},B=()=>{E.show&&(E.toggling=setTimeout((()=>{E.style={...E.style,opacity:0,transform:"translate(0, 2px)"},setTimeout((()=>{E.show=!1,E.toggling&&clearTimeout(E.toggling),M?.(!1)}),160)}),g))},Y=e=>{void 0===e?E.show?B():A():e?A():B()},L=le((()=>({click:{onClick:()=>Y(!0)},hover:{onMouseEnter:()=>Y(!0),onMouseLeave:()=>Y(!1)},focus:{onFocus:()=>Y(!0),onBlur:()=>Y(!1)},contextmenu:{onContextMenu:e=>{if(e.preventDefault(),e.stopPropagation(),E.show){const[t,n]=Me(e,j.current);E.style={...E.style,left:t,top:n}}else E.show=!0,E.toggling=setTimeout((()=>{const[t,n]=Me(e,j.current);E.style={...E.style,opacity:1,transform:"none",left:t,top:n},E.toggling&&clearTimeout(E.toggling),M?.(!0)}),u)}},none:{}})),[]),V=f((()=>{if(!N)return{};const e={};return"hover"===s&&(e.onMouseEnter=()=>Y(!0),e.onMouseLeave=()=>Y(!1)),e}),[N,s]),W=()=>{if(!E.show)return;const[e,t,{arrowX:n,arrowY:i,arrowPos:a}]=Se(D.current,j.current,{position:d,gap:l,offset:o,align:C,refWindow:T});Object.assign(E,{style:{...E.style,left:e,top:t},arrowProps:{left:n,top:i,pos:a}})};return m((()=>{if("contextmenu"===s)return;const{observe:e,unobserve:t,disconnect:n}=function(){const e=new WeakMap,t=new ResizeObserver((t=>{t.map((t=>{const n=e.get(t.target);n?.(t.target)}))}));return{observe:function(n,i){e.get(n)||(n&&t.observe(n),e.set(n,i))},unobserve:function(n){n&&t.unobserve(n),e.delete(n)},disconnect:function(){t.disconnect()}}}();return D.current&&e(D.current,W),x&&j.current?(e(j.current,W),()=>{x&&j.current&&(t(j.current),D.current&&t(D.current),n())}):void 0}),[x,j.current,D.current]),y((()=>{if(!w||!E.show)return;const e=["top","bottom"].includes(d),t=D.current?.[e?"offsetWidth":"offsetHeight"];E.style={...E.style,[e?"width":"height"]:t}}),[E.show,w]),y((()=>{Y(a)}),[a]),e(n,{children:[v.map(S,(e=>{if(!p(e))return;const{type:t,props:n}=e;if("function"==typeof t)return e;const{className:i,...a}=n;return h(e,{ref:D,className:i,...L[s],...a})})),E.show&&t(ct,{ref:j,arrow:k&&"contextmenu"!==s,style:{...I,...E.style},arrowProps:E.arrowProps,className:z,...V,trigger:D.current,getContainer:O,children:r})]})}const ut=a=>{const{value:r,month:s,weeks:l=["一","二","三","四","五","六","日"],renderDate:o=e=>e.date(),disabledDate:c,onDateClick:d}=a,u=ue(),m=f((()=>{const e=[],t=s.add(-1,"month").endOf("month");let{$W:n,$D:i}=t;if(0!==n){const i=Array.from({length:n}).map(((e,i)=>t.add(i+1-n,"day")));e.push(...i)}const a=s.endOf("month");return i=a.$D,n=a.$W,e.push(...Array.from({length:i}).map(((e,t)=>a.add(t+1-i,"day")))),0!==n&&e.push(...Array.from({length:7-n}).map(((e,t)=>a.add(t+1,"day")))),e}),[s]),p=re((e=>{c?.(e)||d?.(e)}));return e(n,{children:[t("div",{className:"i-datepicker-weeks",children:l.map(((e,n)=>t("span",{className:"i-datepicker-week",children:e},n)))}),t("div",{className:"i-datepicker-dates",children:m.map(((e,n)=>{const a=e.isSame(r,"day"),l=e.isSame(s,"month"),d=e.isSame(u,"day"),m=c?.(e);return t("div",{className:i("i-datepicker-item",{"i-datepicker-active":a,"i-datepicker-same-month":l,"i-datepicker-today":d,"i-datepicker-disabled":m}),onClick:()=>p(e),children:o(e)},n)}))})]})},mt=[1,2,3,4,5,6,7,8,9,10,11,12],pt=n=>{const{value:i,unitMonth:a="月",unitYear:r="年",renderYear:s,renderMonth:l,onClick:o}=n;return e("a",{className:"i-datepicker-action","data-ripple":!0,onClick:o,children:[t("span",{children:s?.(i.year())}),r,t("span",{children:l?.(i.month()+1)}),a]})},ht=n=>{const{value:a,unitYear:r,unitMonth:l,renderDate:o,renderMonth:c=e=>e,renderYear:d=e=>e,disabledDate:p,onDateClick:h}=n,g=ae({today:a,month:a||ue(),selectedYear:ue(),years:[],selectable:!1}),f=b(null),v=u((e=>{g.month=g.month[e?"add":"subtract"](1,"month")}),[]),y=s({interval:100},(e=>{const t=e.deltaY<0;g.years=g.years.map((e=>e+(t?-1:1)))}));return m((()=>{if(!g.selectable)return;g.selectedYear=g.month;const e=g.selectedYear.year(),t=Array.from({length:7}).map(((t,n)=>e-3+n));g.years=[...t]}),[g.selectable]),m((()=>{g.today=a,g.month=a||ue()}),[a]),e("div",{className:"i-datepicker",children:[e("div",{className:"i-datepicker-units",children:[t(pt,{value:g.month,unitYear:r,unitMonth:l,renderMonth:c,renderYear:d,onClick:()=>g.selectable=!0}),t("a",{className:"ml-auto i-datepicker-action","data-ripple":!0,onClick:()=>v(!1),children:t(ye,{icon:t(M,{})})}),t("a",{className:"i-datepicker-action","data-ripple":!0,onClick:()=>v(!0),children:t(ye,{icon:t(D,{})})})]}),e("div",{className:i("i-datepicker-ym",{"i-datepicker-active":g.selectable}),children:[t(Fe,{active:!0,className:"i-datepicker-close",onClick:()=>g.selectable=!1}),t("div",{ref:f,className:"i-datepicker-years",onWheel:y,children:g.years.map((e=>t("a",{className:i("i-datepicker-year",{"i-datepicker-active":e===g.selectedYear.year()}),onClick:()=>g.selectedYear=g.selectedYear.year(e),children:d(e)},e)))}),t("div",{className:"i-datepicker-months",children:mt.map((e=>t("a",{className:i("i-datepicker-month",{"i-datepicker-active":e===g.month.month()+1}),onClick:()=>{return t=e,g.month=g.month.year(g.selectedYear.year()).month(t-1),void(g.selectable=!1);var t},children:c(e)},e)))})]}),t(ut,{value:g.today,month:g.month,disabledDate:p,onDateClick:e=>{e.isSame(g.today,"day")||(e.isSame(g.month,"month")||(g.month=e),g.today=e,h?.(e))},renderDate:o})]})};ue.extend(me);const gt=["YYYY-MM-DD","YYYY-M-D","YYYY/MM/DD","YYYY/M/D"],ft=e=>{const{name:n,value:i,weeks:a,format:r="YYYY-MM-DD",renderDate:s,renderMonth:l,renderYear:o,popupProps:c,disabledDate:d,onDateClick:u,onChange:p,onBlur:h,...v}=e,b=ae({value:i}),[y,N]=g(!1),k=f((()=>{if(!b.value)return null;const e=ue(b.value,r,!0);return e.isValid()?e:null}),[b.value]),C=e=>{b.value=e,p?.(e)},w=()=>{if(!b.value)return;const e=ue(b.value,gt,!0);e.isValid()?C(e.format(r)):C("")};return m((()=>{b.value=i}),[i]),t(dt,{visible:y,trigger:"click",position:"bottom",arrow:!1,align:"start",content:t(ht,{value:k,weeks:a,renderDate:s,renderMonth:l,renderYear:o,disabledDate:d,onDateClick:e=>{C(e.format(r))}}),...c,watchResize:!0,onVisibleChange:N,children:t(ot,{value:b.value,prepend:t(ye,{icon:t(j,{}),className:"i-datepicker-icon",size:"1em"}),onChange:C,onBlur:e=>{h?.(e),w()},onEnter:w,...v})})},vt=n=>{const{data:a,colon:r,columns:s=1,gap:l=".5em",align:o,labelWidth:c,labelAlign:d,vertical:u,equally:m,style:p,className:h}=n;return t("div",{className:i("i-description",h),style:{"--description-label-width":c,gridTemplateColumns:`repeat(${s}, ${m?"1fr":"auto"})`,gap:l,textAlign:o,...p},children:a.map(((n,a)=>{const{label:s,value:l,style:o,hidden:c,rowSpan:m=1,colSpan:p=1}=n;return c?t(N,{},a):e("div",{className:i("i-description-item",{"i-description-item-vertical":u}),style:{gridColumn:`span ${p}`,gridRow:`span ${m}`,...o},children:[s&&e("div",{className:"i-description-label",style:{textAlign:d},children:[s,r]}),t("div",{className:"i-description-value",children:l})]},a)}))})};function bt(n){const{visible:a,position:r="left",header:s,footer:l,backdropClosable:o=!0,hideCloseButton:c,className:d,children:p,onVisibleChange:h,onClose:f,...v}=n,[y,N]=g(a),[k,C]=g(a),w=b(!0);m((()=>{a?x():$()}),[a]);const x=u((()=>{w.current&&(N(!0),h?.(!0),w.current=!1,setTimeout((()=>{C(!0),w.current=!0}),24))}),[]),$=u((()=>{w.current&&(w.current=!1,C(!1),setTimeout((()=>{N(!1),h?.(!1),w.current=!0,f?.()}),240))}),[]),P=u((function(){o&&$()}),[]);return pe(y&&t("div",{className:i("i-backdrop-drawer",d,{"i-active":k}),onClick:P,...v,children:e("div",{className:i("i-drawer",`i-drawer-${r}`),onClick:e=>e.stopPropagation(),children:[e("header",{className:"i-drawer-header",children:[s,t(Fe,{active:!c,className:"i-drawer-close",onClick:$})]}),t("div",{className:"i-drawer-content",children:p}),t("div",{className:"i-drawer-footer",children:l})]})}),document.body)}const yt=e=>{const{width:n,content:i,children:a,...r}=e;return t(dt,{trigger:"click",position:"bottom",touchable:!0,content:t(kt,{className:"i-dropdown-content",style:{minWidth:n},children:i}),...r,children:a})},Nt=c(((n,a)=>{const{active:r,type:s,align:l,disabled:o,label:c,style:d,className:u,children:m,...p}=n;return e("li",{ref:a,className:i("i-list-item",u,{"i-list-item-active":r,"i-list-option":"option"===s,disabled:o}),style:{alignItems:l,...d},...p,children:[void 0!==c&&t("span",{className:"i-list-item-label",children:c}),m]})})),kt=e=>{const{label:n,type:a,className:r,children:s,...l}=e;return t("ul",{className:i("i-list",r),...l,children:v.map(s,((e,t)=>{const i="function"==typeof n?n(t):n;return h(e,{label:i,...e.props,type:a})}))})};kt.Virtual=e=>{const{data:n,itemKey:i,renderItem:a,...r}=e;return t(ge,{data:n,itemKey:i,...r,children:(e,t)=>a?.(e,t)})},kt.Item=Nt;const{Item:Ct}=kt;yt.Item=e=>{const{more:n,moreProps:i,...a}=e,r=t(Ct,{...a});return n?t(dt,{position:"right",touchable:!0,arrow:!1,align:"start",offset:10,...i,content:t(kt,{className:"i-dropdown-content",onClick:e=>e.stopPropagation(),children:n}),children:r}):r};const wt=e=>{const{as:n="div",align:a,justify:r,direction:s,wrap:l,gap:o,columns:c,className:d,style:u,...m}=e,p=f((()=>{if(c)return"number"==typeof c?`repeat(${c}, 1fr)`:c}),[c]);return t(n,{...m,style:{alignItems:a,justifyContent:r,gap:o,flexDirection:s,flexWrap:!0===l?"wrap":l,gridTemplateColumns:p,...u},className:i(d,{[c?"grid":"flex"]:!0})})},xt=k({});class $t{id;data={};rules={};constructor(){this.id=r(8),this.data={}}get(e){return e?this.data[e]:this.data}set(e,t){const n=this.id;if(this.data)return"string"==typeof e?(this.data[e]=t,void PubSub.publish(`${n}:set:${e}`,t)):void Object.keys(e).map((t=>{this.data[t]=e[t],PubSub.publish(`${n}:set:${t}`,e[t])}))}clear(){this.data&&Object.keys(this.data).map((e=>{PubSub.publish(`${this.id}:set:${e}`,void 0),this.data[e]=void 0}))}async validate(e){const{id:t,rules:n,data:i}=this;if(!n)return i;if(e){const a=n[e],r={validator:e=>Array.isArray(e)?e.length>0:![void 0,null,""].includes(e),message:void 0};"function"==typeof a?r.validator=a:!0===a?r.message="required":Object.assign(r,a);const s=r.validator?.(i[e],this);return s?(PubSub.publish(`${t}:invalid:${name}`,{message:null,status:"normal"}),!0):(PubSub.publish(`${t}:invalid:${e}`,{message:r.message,status:"error"}),!1)}let a=!0;return Object.keys(i).map((e=>{const r=n[e];if(void 0===r)return;const s={validator:e=>Array.isArray(e)?e.length>0:!!e,message:void 0};"function"==typeof r?s.validator=r:!0===r?s.message="required":Object.assign(s,r);const l=s.validator?.(i[e],this);l?PubSub.publish(`${t}:invalid:${e}`,{message:null,status:"normal"}):(PubSub.publish(`${t}:invalid:${e}`,{message:s.message,status:"error"}),a=!1)})),!!a&&i}}const Pt=e=>{const{form:n={},rules:a={},initialValues:r={},style:s,className:l,width:o,children:c,...d}=e;return m((()=>{Object.assign(n,{data:{...r},rules:{...a}})}),[n,a]),t(xt.Provider,{value:n,children:t("form",{style:{...s,width:o},className:i("i-form",l),...d,children:c})})};function Tt(i){const{title:a,footer:r,hideCloseButton:s,footerLeft:l,okButtonProps:o={children:"确定",onClick:i.onOk},cancelButtonProps:c={secondary:!0,children:"关闭",onClick:i.onClose},children:d,onClose:u}=i,m=a||!s,p=f((()=>{if(r||null===r)return r;const i=Object.assign({},o),a=Object.assign({},c);return e(n,{children:[l,t(be,{...i}),t(be,{...a})]})}),[r,o,c]);return e(n,{children:[m&&e("header",{className:"i-modal-header",children:[a&&t("b",{children:a}),t(Fe,{active:!s,className:"i-modal-close",onClick:u})]}),t("div",{className:"i-modal-content",children:d}),t("footer",{className:"i-modal-footer",children:p})]})}function It(n){const{visible:a,title:r,footer:s,okButtonProps:l,cancelButtonProps:o,closable:c=!0,hideBackdrop:d,backdropClosable:p=!0,hideCloseButton:h,width:f,height:v,customized:y,fixed:N,shadow:k=!0,children:C,style:w,className:x,footerLeft:$,onVisibleChange:P,onClose:T,onOk:I,...z}=n,[O,S]=g(a),[M,D]=g(!1),[j,E]=g(!1),A=b(!0),B=u((()=>{A.current&&(S(!0),A.current=!1,setTimeout((()=>{D(!0),P?.(!0),A.current=!0}),24))}),[]),Y=u((()=>{if(A.current){if(A.current=!1,!c)return E(!0),void setTimeout((()=>{E(!1),A.current=!0}),400);D(!1),setTimeout((()=>{S(!1),A.current=!0,P?.(!1),T?.()}),240)}}),[c]),L=u((function(){p&&Y()}),[c,p]);return m((()=>{a?B():Y()}),[a]),O?pe(t("div",{className:i("i-modal-container",{"i-modal-backdrop":!d,"i-modal-customized":y,"i-modal-active":M,fixed:N},x),style:w,onClick:L,children:e("div",{className:i("i-modal",{bounced:j,shadow:k}),style:{width:f,height:v},onClick:e=>e.stopPropagation(),...z,children:[y&&C,!y&&t(Tt,{title:r,hideCloseButton:h,footer:s,okButtonProps:l,cancelButtonProps:o,children:C,footerLeft:$,onOk:I,onClose:Y})]})}),document.body):null}Pt.useForm=function(e){const t=b();return t.current||(t.current=e??new $t),t.current},Pt.Field=function(e){const{name:t,required:n,children:i}=e,a=ae({value:void 0,status:"normal",message:void 0,update:0}),r=C(xt),{id:s}=r,l=u((e=>{t&&r.set(t,e)}),[t]),o=f((()=>v.map(i,(e=>{if(!p(e))return null;const{onChange:t}=e.props,{value:i,status:r,message:s}=a;return h(e,{value:i,status:r,message:s,required:n,onChange:(...e)=>{l(e[0]),t?.(...e),Object.assign(a,{status:"normal",message:void 0})}})}))),[i,a.update]);return m((()=>{if(t)return he.subscribe(`${s}:set:${t}`,((e,t)=>{a.value=t,a.update+=1})),he.subscribe(`${s}:invalid:${t}`,((e,t)=>{Object.assign(a,t),a.update+=1})),setTimeout((()=>{r.data[t]=r.data[t]??void 0}),0),()=>{he.unsubscribe(`${s}:set:${t}`),he.unsubscribe(`${s}:invalid:${t}`)}}),[t]),t?o:i},It.useModal=function(){const e=b(null);return{open:n=>{const i=Ae(t(zt,{ref:e,visible:!0,...n,onClose:()=>{n.onClose?.(),i?.()}}))},update:t=>{if(!e.current)return;const{update:n}=e.current;n(t)}}};const zt=c(((e,n)=>{const i=ae({});return w(n,(()=>({update:(e={})=>{Object.assign(i,e)}}))),t(It,{...e,...i})}));const Ot=e=>{const{as:n="span",size:a,weight:r,decoration:s,gradient:l,style:o,className:c,children:d}=e,u=f((()=>l&&Array.isArray(l)?{background:`-webkit-linear-gradient(${l.join(",")})`,backgroundClip:"text"}:{}),[l]);return t(n,{style:{fontSize:a,fontWeight:r,textDecoration:s,...u,...o},className:i(c,{"i-text-gradient":l}),children:d})};function St(n){const{value:i,height:a=40,size:r=8}=n;return e("div",{className:"i-progress-circle",children:[e("svg",{width:a,height:a,children:[t("circle",{cx:a/2,cy:a/2,r:a/2-r/2,fill:"none",stroke:"var(--background-opacity-2)",strokeWidth:r}),t("circle",{cx:a/2,cy:a/2,r:a/2-r/2,fill:"none",stroke:"var(--color-main)",strokeWidth:r,strokeDasharray:100,pathLength:100,className:"i-progress-circle-path",strokeLinecap:"round",style:{strokeDashoffset:`calc(100 - ${i})`}})]}),e("span",{className:"i-progress-circle-value",children:[t("span",{children:i}),t(Ot,{size:".81em",className:"color-7",children:"%"})]})]})}Ot.Highlight=function(e){return t(n,{})},Ot.Number=function(e){const{count:n,to:i,decimal:a,thousand:r=",",duration:s=2400,easing:l,...o}=e,[c,d]=g(n),u=f((()=>{if(void 0===c)return;const e=c.toFixed(a);return r?Ee(c,{precision:a,thousand:r}):e}),[c,r]);return m((()=>{void 0!==n&&void 0!==i&&function(e,t,n=1e3,i,a=e=>1-Math.pow(1-e,4)){const r=performance.now(),s=t-e;let l=requestAnimationFrame((function e(){l=requestAnimationFrame(e);let t=(performance.now()-r)/n;t>=1&&(t=1,cancelAnimationFrame(l));const o=s*a(t);i?.(o)}))}(n,i,s,(e=>d(n+e)),l)}),[i]),m((()=>d(n)),[n]),t(Ot,{...o,children:u})},Ot.Time=function(e){const{seconds:n,zero:i,units:a,...r}=e,s=f((()=>void 0===n?"":function(e,t){const n=[],{zero:i=!0,units:a=["",":",":"]}=t||{},r=a.length;let s=0;for(;s<r&&!(e<=0&&s>1);){const t=Math.round(e%60);e=Math.floor(e/60),n.unshift((i&&t<10?`0${t}`:t)+a[s++])}return n.join("")}(n,{zero:i,units:a})),[n]);return t(Ot,{...r,children:s})};const Mt=c(((e,n)=>{const{value:a,size:r,barClass:s,dragging:l,renderCursor:o,onMouseDown:c}=e;return t("div",{ref:n,className:"i-progress",style:{height:r},onMouseDown:c,children:t("div",{className:i("i-progress-bar",s,{"no-transition":l}),style:{width:`${a}%`},children:o&&t("a",{className:"i-progress-cursor",children:o(a??0)})})})})),Dt=n=>{const{value:a=0,size:r=8,height:s=40,precision:l=0,style:o,draggable:c=!0,type:d="line",barClass:u,label:p,labelInline:h,className:g,renderCursor:v,onChange:y}=n,N=b(null),k=ae({value:a,dragging:!1,width:0,start:0}),C=f((()=>{let e=+k.value.toFixed(l);return e=Math.min(100,e),e=Math.max(0,e),e}),[k.value,l]),w=re((e=>{if(!N.current||!c)return;const t=N.current.getBoundingClientRect(),n=100*(e.pageX-t.left)/t.width;Object.assign(k,{value:n,width:t.width,start:t.left,dragging:!0})})),x=re((e=>{if(!k.dragging||!c)return;e.preventDefault();const{start:t,width:n}=k,i=e.pageX-t;i<0||i>n||(k.value=100*(e.pageX-t)/n)})),$=re((()=>{k.dragging&&c&&(y?.(C),k.dragging=!1)}));return Ze(x),_e($),m((()=>{k.value=a>100?100:a<0?0:a}),[a]),e("div",{className:i("i-input-label",g,{"i-input-inline":h}),style:o,children:[p&&t("span",{className:"i-input-label-text",children:p}),"line"===d&&t(Mt,{ref:N,size:r,barClass:u,dragging:k.dragging,value:k.value,renderCursor:v,onMouseDown:w}),"circle"===d&&t(St,{value:k.value,height:s,size:r})]})},jt=c(((n,a)=>{const{style:r,hideControls:s,autoplay:l,muted:o,volume:c=50,height:d,width:u,useOriginControls:p,timeProgressProps:h={barClass:"bg-2"},volumeProgressProps:g={barClass:"bg-1"},className:f,onFullScreenChange:v,...y}=n,N=ae({playing:l,volume:o?0:c,volumeCache:0,muted:o,current:0,duration:0,isFullscreen:!1}),k=b(null),C=e=>{const t=e.target;t.paused||Object.assign(N,{current:t.currentTime})},x=e=>{N.playing=!e.target.paused},$=e=>{const t=k.current?.parentElement;t&&(N.isFullscreen=document.fullscreenElement===t)},P=e=>{const t=e.target;Object.assign(N,{volume:100*t.volume,muted:0===t.volume})},T=()=>{const e=k.current;e&&(e.paused?e.play():e.pause())},I=()=>{const e=k.current;e&&(e.currentTime=0,e.pause())},z=e=>{const t=k.current?.parentElement;var n;t&&(N.isFullscreen?document.exitFullscreen?.():(n=t,n.requestFullscreen?.()),v?.(!N.isFullscreen))};return w(a,(()=>({play:()=>{const e=k.current;e&&e.play()},pause:()=>{const e=k.current;e&&e.pause()},stop:I,fullscreen:z,getVideo:()=>k.current}))),m((()=>{const e=k.current;if(e)return e.addEventListener("timeupdate",C),e.addEventListener("play",x),e.addEventListener("pause",x),e.addEventListener("volumechange",P),document.addEventListener("fullscreenchange",$),()=>{e.removeEventListener("timeupdate",C),e.removeEventListener("play",x),e.removeEventListener("pause",x),e.removeEventListener("volumechange",P),document.removeEventListener("fullscreenchange",$)}}),[]),e("div",{className:i("i-video",f),style:{height:d,width:u,...r},onClick:T,onDoubleClick:()=>z(),children:[t("video",{ref:k,onCanPlay:e=>{const t=e.target;Object.assign(N,{duration:t.duration,current:t.currentTime}),t.volume=N.volume/100},...y,controls:p}),!s&&!p&&e("div",{className:"i-video-controls",onClick:e=>e.stopPropagation(),children:[e("div",{className:"i-video-control flex-1",children:[t(be.Toggle,{className:"i-video-btn",flat:!0,square:!0,after:t(ye,{icon:t(E,{})}),active:N.playing,onClick:T,children:t(ye,{icon:t(A,{})})}),t(be,{className:"i-video-btn",flat:!0,square:!0,onClick:I,children:t(ye,{icon:t(B,{})})}),e("span",{className:"i-video-times",children:[t(Ot.Time,{seconds:N.current})," /",t(Ot.Time,{seconds:N.duration})]}),t(Dt,{className:"mr-8",...h,value:N.current/N.duration*100,onChange:e=>{const t=k.current;t&&(t.currentTime=N.duration*e/100)}})]}),t("div",{className:"i-video-control",children:t(be.Toggle,{className:"i-video-btn",flat:!0,square:!0,after:t(ye,{icon:t(Y,{})}),active:N.isFullscreen,onClick:()=>z(),children:t(ye,{icon:t(L,{})})})}),e("div",{className:"i-video-control",children:[t(be.Toggle,{className:"i-video-btn",flat:!0,square:!0,active:N.volume<=0,after:t(ye,{icon:t(V,{}),size:"1.2em"}),onClick:()=>{const e=k.current;if(e)return e.volume>0?(N.volumeCache=e.volume,void(e.volume=0)):void(e.volume=0===N.volumeCache?.5:N.volumeCache)},children:t(ye,{icon:t(W,{})})}),t(Dt,{style:{width:100},className:"mr-8",...g,value:N.volume,onChange:e=>{const t=k.current;t&&(t.volume=e/100)}})]})]})]})}));function Et(n){const{name:i,suffix:a,type:r}=n;switch(r){case Oe.IMAGE:return t("img",{src:n.src});case Oe.VIDEO:return t(jt,{...n});default:return e("div",{className:"i-preview-unknown",children:[t(ye,{icon:t(q,{}),size:"3em"}),t("h5",{className:"mt-4",children:i||a||"?"})]})}}function At(i){const{items:a=[],initial:r=0,renderFile:l=Et,onRotate:o,onChange:c,onClose:d,onZoom:u}=i,m=ae({current:r,rotate:0,scale:1,translate:"0, 0"}),p=b(null),h=f((()=>a.map((e=>{const t={src:""};return"string"==typeof e?t.src=e:Object.assign(t,e),t.suffix=Be(t.src)||"",t.type=Ye(t.suffix,e.type),t}))),[a]),{file:g,content:v}=f((()=>{const e=h[m.current];return{file:e,content:l(e)}}),[m.current,a]),y=g.type===Oe.IMAGE,N=e=>{const t=h.length,{current:n}=m;m.current=e>=t?0:e<0?t-1:e,c?.(m.current,n),m.rotate=h[m.current].rotate||0,1!==m.scale&&(m.scale=1,u?.(1)),o?.(m.rotate)},k=e=>{m.rotate+=e,o?.(m.rotate)},C=s({interval:60},(e=>{if(!y)return;let t=m.scale+(e.deltaY<0?.05:-.05);t>2&&(t=2),t<.25&&(t=.25),u?.(t),m.scale=t}));return e(n,{children:[t("div",{ref:p,className:"i-preview-content",style:{transform:`rotate(${m.rotate}deg) scale(${m.scale})`},onWheel:C,onClick:e=>e.stopPropagation(),children:v}),e("div",{className:"i-preview-controls",children:[t(be,{square:!0,flat:!0,onClick:d,children:t(ye,{icon:t($,{})})}),h.length>1&&e("span",{className:"px-8",children:[m.current+1," / ",h.length]}),1!==m.scale&&e(be,{flat:!0,onClick:()=>m.scale=1,children:[t(ye,{icon:t(F,{})}),e("span",{className:"mt-4",children:[(100*m.scale).toFixed(0),"%"]})]}),t(be,{square:!0,flat:!0,href:g.src,target:"_blank",children:t(ye,{icon:t(H,{})})}),t(be,{square:!0,flat:!0,href:g.src,download:!0,target:"_blank",children:t(ye,{icon:t(R,{})})}),t(be,{square:!0,flat:!0,onClick:()=>k(90),children:t(ye,{icon:t(X,{})})}),t(be,{square:!0,flat:!0,onClick:()=>k(-90),children:t(ye,{icon:t(U,{})})}),h.length>1&&e(n,{children:[t(be,{square:!0,flat:!0,onClick:()=>N(m.current-1),children:t(ye,{icon:t(M,{})})}),t(be,{square:!0,flat:!0,onClick:()=>N(m.current+1),children:t(ye,{icon:t(D,{})})})]})]})]})}function Bt(){const e=b(null);return n=>{const{items:i,modalProps:a,onClose:r,...s}=n,l=Ae(t(zt,{ref:e,visible:!0,className:"i-preview",customized:!0,shadow:!1,...a,children:t(At,{...s,items:i,onClose:()=>{e.current?.update({visible:!1})}}),fixed:!0,onClose:()=>{r?.(),l?.()}}))}}const Yt=a=>{const{src:r,round:s,size:l,initSize:o,lazyload:c,fallback:d=t(ye,{icon:t(G,{}),size:"2em",className:"color-5"}),fit:u,style:p,className:h,children:g,usePreview:f,onLoad:v,onError:y,onClick:N,...k}=a,C=ae({status:"loading"}),w=b(null),x=u?"100%":void 0,{observe:$,unobserve:P}=Je(),T=Bt();m((()=>{if(r&&(C.status="loading",c&&w.current))return $(w.current,((e,t)=>{t&&(e.setAttribute("src",e.dataset.src||""),P(e))})),()=>{w.current&&P(w.current)}}),[r]),k[c?"data-src":"src"]=r;const I="loading"===C.status?o:void 0;return t("div",{style:{width:l??I,height:l??I,...p},className:i("i-image",h,{rounded:s,[`i-image-${C.status}`]:C.status}),children:"error"===C.status?d:e(n,{children:[r&&t("img",{ref:w,style:{objectFit:u,width:x,height:x},...k,onLoad:e=>{v?.(e),C.status=void 0},onError:e=>{y?.(e),C.status="error"},onClick:e=>{N?.(e),f&&r&&T({items:[{src:r,type:Oe.IMAGE}]})}}),r&&"loading"===C.status&&t(fe,{}),g&&t("div",{className:"i-image-text",children:g})]})})};Yt.List=function(e){const{items:n=[],gap:i=8,columns:a,wrap:r,direction:s,usePreview:l,onClick:o,...c}=e,d=Bt(),u=f((()=>n.map((e=>{const t={src:""};return"string"==typeof e?t.src=e:Object.assign(t,e),t.suffix=Be(t.src)||"",t.type=Ye(t.suffix,e.type),t}))),[n]);return u.length?t(wt,{className:"i-image-list",gap:i,columns:a,wrap:r,direction:s,children:u.map(((e,n)=>t(Yt,{src:e.src,size:60,usePreview:!1,onClick:e=>((e,t)=>{o?.(e),l&&d({items:u,initial:t})})(e,n),...c},n)))}):""};const Lt={left:"flex-start",center:"center",right:"flex-end"},Vt=12,Wt={duration:3e3,closable:!0,active:!1},qt=function(){const e=document.createElement("div");return e.dataset.id="messages",document.body.append(e),e}(),Ft={callout(e){},close(){}},Ht={left:[],center:[],right:[]},Rt={left:[],center:[],right:[]};de(qt).render(t((function(){const i=b(null),a=ae({items:{left:[],center:[],right:[]},tops:{left:[],center:[],right:[]}}),r={left:0,center:0,right:0};m((()=>{Object.assign(Ft,{callout:function(e){const{align:t="center",unshift:n,onShow:r}=e,s=Ht[t][n?"unshift":"push"](e);a.items[t]=[...Ht[t]],setTimeout((()=>{const e=i.current?.offsetHeight||0;Ht[t][n?0:s-1].active=!0,a.items[t]=[...Ht[t]],Rt[t][n?"unshift":"push"](e),a.tops[t]=[...Rt[t]],r?.()}),0),0!==e.duration&&setTimeout(this.close.bind(e),e.duration)},close:function(){const e=this,{align:t="center",onHide:n}=e,i=Ht[t].findIndex((t=>t.id===e.id));i<0||(Ht[t][i].active=!1,a.items[t]=[...Ht[t]],e.timer=setTimeout((()=>{const i=Ht[t].findIndex((t=>t.id===e.id));Ht[t].splice(i,1),Rt[t].splice(i,1),a.tops[t]=[...Rt[t]],a.items[t]=[...Ht[t]],e.timer&&clearTimeout(e.timer),n?.()}),240))}})}),[]);const s=(e,s)=>{if(!e)return t(n,{});const{id:l,active:o,content:c,align:d="center",className:u}=e;r[d]+=a.tops[d][s-1]||0;const m=Vt*s+r[d];return t(Xt,{ref:i,active:o,content:c,top:m,className:u,style:{alignSelf:Lt[d]},onClick:Ft.close.bind(e)},l)};return e("div",{className:"i-messages",children:[a.items.left.map(s),a.items.center.map(s),a.items.right.map(s)]})}),{}));const Xt=c((function({active:e,content:n,top:a,className:r,style:s,onClick:l},o){return t("div",{ref:o,className:i("i-message",r,{"i-message-active":e}),style:{...s,top:a},onClick:l,children:n})}));function Ut(e){return(["string","number"].includes(typeof e)||p(e))&&(e={content:e}),e=Object.assign({id:r(7)},Wt,e),Ft.callout(e),Ft.close.bind(e)}const Gt=n=>{const{page:a,active:r,children:s,onChange:l}=n,[o,c]=g(!1);return e("a",{className:i("i-page",{"i-page-active":r,"i-page-loading":o,"i-page-disabled":!1}),"data-page":a,onClick:async()=>{r||o||(c(!0),await(l?.(a)),c(!1))},children:[o&&t(fe,{}),s]})},Kt=a=>{const{page:r=1,size:s=10,total:l=0,sibling:o=2,prev:c=t(ye,{icon:t(M,{})}),next:d=t(ye,{icon:t(D,{})}),simple:u,jumper:p,className:h,renderEllipsis:v=()=>t(ye,{icon:t(K,{}),className:"color-7"}),renderPage:b=e=>e,onChange:y,...N}=a,[k,C]=g(r),[w,x]=g(!1),$=f((()=>Math.ceil(l/s)),[s,l]),[P,T,I]=f((()=>{const e=Math.max(1,k-o),t=Math.min($,k+o);return[e,t,Array.from({length:t-e+1}).map(((t,n)=>e+n))]}),[k,$,o]);if($<=k&&1===k)return t(n,{});const z=async e=>{if(y&&!w)return x(!0),new Promise((async t=>{void 0!==e&&(await y(e),C(e),x(!1),t())}))};return m((()=>C(r)),[r]),e("div",{className:i("i-pagination",h),...N,children:[c&&t(Gt,{page:k-1||1,onChange:z,children:c}),P>1&&t(Gt,{page:1,onChange:z,children:b(1)}),P>2&&v(),I.map((e=>t(Gt,{page:e,active:e===k,onChange:z,children:b(e)},e))),T<$-1&&v(),T<$&&t(Gt,{page:$,onChange:z,children:b($)}),d&&t(Gt,{page:k+1,onChange:z,children:d})]})},Zt={children:"确定"},_t={children:"取消",secondary:!0},Jt=n=>{const{trigger:i="click",visible:a,icon:r=t(ye,{icon:t(Z,{}),className:"error"}),content:s,okButtonProps:l,cancelButtonProps:o,children:c,align:d="end",position:u="top",offset:m=12,extra:p,onOk:h,onClose:g,...f}=n,v=ae({loading:!1,visible:a}),b=l?Object.assign({},Zt,l):Zt,y=o?Object.assign({},_t,o):_t,N=e("div",{className:"i-popconfirm",children:[e(wt,{gap:12,children:[r,t("div",{className:"i-popconfirm-content",children:s})]}),e(wt,{gap:12,justify:"flex-end",className:"mt-8 i-popconfirm-footer",children:[null!==o&&t(be,{...y,onClick:async e=>{y.onClick?.(e),await(g?.()),v.visible=!1}}),p,null!==l&&t(be,{loading:v.loading,...b,onClick:async e=>{v.loading=!0,b.onClick?.(e),await(h?.()),v.loading=!1,v.visible=!1}})]})]});return t(dt,{content:N,...f,trigger:i,visible:v.visible,align:d,offset:m,position:u,onVisibleChange:e=>{v.visible=e,f.onVisibleChange?.(e)},children:c})};function Qt(n){const{type:a="default",name:r,value:s,checked:l,disabled:o,children:c,onChange:d}=n;return e("label",{className:i("i-radio-item",{disabled:o}),children:[t("input",{type:"radio",name:r,checked:l,className:i("i-radio-input",`i-radio-${a}`),disabled:o,onChange:e=>{d?.(s,e)}}),t("span",{className:"i-radio-text",children:c})]})}function en(n){const{label:a,name:r,options:s,value:l,type:o="default",status:c="normal",message:d,optionInline:u=!0,labelInline:p,disabled:h,required:g,className:v,onChange:b}=n,y=ae({value:l}),N=f((()=>je(s)),[s]),k=re(((e,t)=>{y.value=e,b?.(e,t)}));return m((()=>{y.value=l}),[l]),e("div",{className:i("i-radio i-input-label",{[`i-radio-${c}`]:"normal"!==c,"i-input-inline":p},v),children:[a&&e("span",{className:"i-input-label-text",children:[g&&t("span",{className:"error",children:"*"}),a,d&&t("p",{className:"i-radio-message",children:d})]}),t("div",{className:i("i-radio-options",{"i-options-block":!u,"i-radio-options-button":"button"===o}),children:N.map((e=>t(Qt,{name:r,value:e.value,checked:y.value===e.value,type:o,disabled:h||e.disabled,onChange:k,children:e.label},e.value)))})]})}en.Item=Qt;const tn=n=>{const{value:a,options:r,filter:s,filterPlaceholder:l,multiple:o,empty:c=t(Re,{}),onSelect:d,onFilter:u}=n;return e("div",{className:i("i-select-options",{"i-select-options-multiple":o}),children:[s&&o&&e("div",{className:"i-select-filter",children:[t(ye,{icon:t(_,{}),className:"color-8 ml-8 my-auto",size:"1.2em"}),t("input",{type:"text",className:"i-input",placeholder:l,onChange:u})]}),0===r.length&&c,r.map(((n,i)=>{const{label:r,value:s,disabled:l}=n,c=o?a?.includes(s):a===s;return e(kt.Item,{active:c,type:"option",onClick:()=>d?.(s,n),disabled:l,children:[o&&t(ye,{icon:t(J,{}),className:"i-select-option-check",size:"1em"}),r]},s||i)}))]})},nn=n=>{const{options:i,value:a,maxDisplay:r,multiple:s,onSelect:l}=n;return s?((e=[],t=[],n=3)=>{const i=e.flatMap((e=>t.includes(e.value)?[e]:[]));if(n>=i.length)return i;const a=i.length-n,r=i.slice(0,n);return r.push(a),r})(i,a,r).map(((n,i)=>{if("number"==typeof n)return e(pn,{children:["+",n]},i);const{label:a,value:r}=n;return t(pn,{onClose:e=>{e?.stopPropagation(),l?.(r,n)},children:a},r)})):i.find((e=>e.value===a))?.label},an=c(((n,r)=>{const{type:s="text",name:l,label:o,value:c="",placeholder:d,options:p=[],multiple:h,prepend:v,append:b,labelInline:y,style:N,className:k,message:C,status:w="normal",hideClear:x,maxDisplay:$,border:P,filter:T,tip:I,filterPlaceholder:z="...",popupProps:O,onSelect:S,onChange:M,...D}=n,j=ae({inputValue:"",filterValue:"",value:c,loading:!1}),[E,A]=g(!1),B=f((()=>je(p)),[p]),Y=f((()=>{const{filterValue:e}=j;if(!e||!T)return B;const t="function"==typeof T?T:t=>t.value.includes(e)||t.label.includes(e);return B.filter(t)}),[B,T,j.filterValue]),L=e=>{j.value=e,M?.(e)},V=u(((e,t)=>{if(S?.(e,t),h){const t=[...j.value],n=t.findIndex((t=>t===e));return n>-1?t.splice(n,1):t.push(e),void L(t)}A(!1),L(e)}),[]),W=re(a({delay:400},(e=>{const t=e.target.value;j.filterValue=t})));m((()=>{j.value=c}),[c]);const q=h?j.value.length>0:!!j.value,F=!x&&E&&q,H=C??I;return e("label",{className:i("i-input-label",k,{"i-input-inline":y}),style:N,children:[o&&t("span",{className:"i-input-label-text",children:o}),t(dt,{position:"bottom",arrow:!1,fitSize:!0,...O,visible:E,trigger:"none",onVisibleChange:e=>{A(e),T&&(j.filterValue="")},content:t(tn,{options:Y,value:j.value,multiple:h,filter:!!T,filterPlaceholder:z,onSelect:V,onFilter:W}),children:e("div",{className:i("i-input-item",{[`i-input-${w}`]:"normal"!==w,"i-input-borderless":!P,"i-input-focus":E}),onClick:()=>A(!0),children:[v,t("input",{ref:r,type:"hidden",value:j.value,...D}),h?q?t("div",{className:i("i-input i-select",{"i-select-multiple":h}),children:nn({options:B,value:j.value,multiple:h,maxDisplay:$,onSelect:V})}):t("input",{className:"i-input i-select",placeholder:d,readOnly:!0}):null,!h&&t("input",{value:E?j.filterValue:j.value,className:"i-input i-select",placeholder:j.value||d,onChange:e=>{j.filterValue=e.target.value},readOnly:!T}),t(Fe,{active:!0,icon:F?void 0:t(Q,{}),onClick:e=>{E&&L(h?[]:"")}}),b]})}),H&&t("span",{className:"i-input-message",children:H})]})}));function rn(){return t("i",{className:"i-step-divider"})}const sn=["finished","active","pending"];function ln(e,n){return t("span",{className:"i-step-item-index",children:"finished"===n?t(J,{style:{width:"1em",height:"1.5em"}}):e+1})}function on(a){const{index:r=0,active:s=0,renderIcon:l=ln,title:o,vertical:c,line:d=t(rn,{}),style:u,className:m,children:p,onClick:h}=a,g=sn[r===s?1:r<s?0:2];return t("div",{style:u,className:i("i-step-item",`i-step-item-${g}`,m),onClick:()=>{h?.(r)},children:e(n,c?{children:[e("div",{className:"i-step-item-left",children:[l?.(r,g),d]}),e("div",{className:"i-step-item-right",children:[t("div",{className:"i-step-item-title",children:o}),p&&t("div",{className:"i-step-item-content",children:p})]})]}:{children:[e("div",{className:"i-step-item-title",children:[l?.(r,g),t("span",{children:o}),d]}),p&&t("div",{className:"i-step-item-content",children:p})]})})}const cn=e=>{const{active:n=0,vertical:a,renderIcon:r,line:s,style:l,className:o,children:c,onClick:d}=e,u=f((()=>{const e=[];let t=0;return v.map(c,(i=>{if(!i||i.type!==on)return;const{props:l}=i;e.push({...i,props:{renderIcon:r,line:s,onClick:d,...l,vertical:a,active:n,index:t++}})})),e}),[n,c]);return t("div",{className:i("i-step",{"i-step-vertical":a},o),style:l,children:u})};function dn(e){const{index:n=0,active:a,type:r,transition:s,gap:l=0,itemHeight:o,vertical:c,style:d,className:u,children:m}=e,p=f((()=>"normal"===r?{[c?"paddingBlock":"paddingInline"]:l/2,height:o}:{transform:`translate(-${100*n}%, 0)`,transition:s}),[n,l,o,c,r]);return t("div",{style:{...d,...p},className:i("i-swiper-item",u,{"i-swiper-active":a}),"data-index":n,children:m})}cn.Item=on;const un=c(((a,r)=>{const{type:s="normal",initial:l=0,display:o=1,scroll:c=1,loop:d=!0,vertical:p,prev:h=t(ye,{icon:t(M,{}),size:"2em"}),next:g=t(ye,{icon:t(D,{}),size:"2em"}),duration:y=600,interval:N=3e3,autoplay:k,pauseOnHover:C,arrow:x=!0,reverse:$,draggable:P,dragOffset:T=40,gap:I=0,itemHeight:z,indicator:O,style:S,className:j,children:E,renderIndicator:A,onBeforeSwipe:B,onAfterSwipe:Y}=a,L=b(null),V=b(null),W=`all ${y/1e3}s`,q=ae({current:l,swipable:!0,transition:"fade"===s?"none":W,dragStart:0,dragging:!1,initialized:!1}),F=f((()=>v.map(E,(e=>{if(e.type===dn)return e}))),[E]),[H,R,X,U,G]=f((()=>{const e="normal"===s&&d&&F.length>o?o+1:0;let t=[];if(e<=0)t=[...F];else{const n=F.slice(0,e);t=[...F.slice(-e),...F,...n]}const n=t.length/o*100+"%";return[t,e,F.length,t.length,n]}),[o,d,s,F]),K=f((()=>-100*(q.current+R)/U),[q.current,U]),Z=f((()=>{if(X<=o||"fade"===s)return;return`translate3d(${p?`0, ${K}%`:`${K}%, 0`}, 0)`}),[K,p,o,X,s]),_=f((()=>{if(p&&z)return{height:z*o}}),[p,z,o]),J=f((()=>Array.from({length:Math.ceil((X-o)/c)+1})),[d,O]),Q=()=>{clearTimeout(V.current),V.current=null},ee=u((e=>{if(!q.swipable||e===q.current)return;q.swipable=!1,B?.(q.current);let t=!1,n=e;const i=X-o;return d?e>i?(t=!0,e=X,n=0):e<0&&(t=!0,e=-o,n=i):(n=Ve(n,0,i),e=n),setTimeout((()=>{q.swipable=!0}),y+32),"fade"===s?(q.current=n,void Y?.(n)):(q.current=e,t?void setTimeout((()=>{q.transition="none",q.current=n,Y?.(n),k&&(V.current=setTimeout(te,N)),setTimeout((()=>{q.transition=W}),60)}),y+20):(k&&(V.current=setTimeout(te,N)),void setTimeout((()=>{Y?.(n)}),y+12)))}),[y,k]),te=()=>{ee($?q.current-c:q.current+c)},ne=()=>{ee($?q.current+c:q.current-c)},ie=u((e=>{P&&q.swipable&&"fade"!==s&&(e.stopPropagation(),Object.assign(q,{dragStart:p?e.clientY:e.clientX,dragging:!0,transition:"none"}))}),[P,p]),re=u((e=>{if(!q.dragging||!L.current)return;e.preventDefault();const t=61.8*((p?e.clientY:e.clientX)-q.dragStart)/L.current[p?"offsetHeight":"offsetWidth"]+K;L.current.style.transform=`translate3d(${p?`0, ${t}%`:`${t}%, 0`}, 0)`}),[p,L.current,K]),se=u((e=>{if(!q.dragging||!L.current)return;const t=p?e.clientY:e.clientX,n=L.current[p?"offsetHeight":"offsetWidth"]/U,i=.618*(t-q.dragStart),a=Math.abs(i);if(a>T){const e=Math.floor(a/n)+(a%n-T>0?1:0);let t=q.current+(i>0?-e:e);ee(t)}L.current.style.transform=Z||"",Object.assign(q,{dragging:!1,transition:W})}),[p,L.current,K]);return Ze(re),_e(se),w(r,(()=>({swipeTo:ee,swipeNext:te,swipePrev:ne}))),m((()=>{if(k)return V.current=setTimeout(te,N),()=>{clearTimeout(V.current),V.current=null}}),[k,N]),e("div",{style:S,className:i("i-swiper",{"i-swiper-vertical":p,"i-swiper-initialized":q.initialized},j),children:[e("div",{className:"i-swiper-track",style:_,onMouseOver:()=>{C&&Q()},onMouseLeave:()=>{C&&(Q(),V.current=setTimeout(te,N))},children:[t("div",{ref:L,className:i("i-swiper-list",{"i-swiper-fade":"fade"===s}),style:{[p?"height":"width"]:G,transform:Z,transition:q.transition},onMouseDown:ie,children:H.map(((e,n)=>{const{props:i}=e;return t(dn,{index:n,active:n-R===q.current,type:s,gap:I,transition:W,itemHeight:z,vertical:p,...i},n)}))}),x&&e(n,{children:[t("a",{className:"i-swiper-arrow i-swiper-prev",onClick:ne,children:h}),t("a",{className:"i-swiper-arrow i-swiper-next",onClick:te,children:g})]})]}),O&&t("div",{className:"i-swiper-indicators",children:J.map(((e,n)=>t("a",{className:i("i-swiper-indicator",{"i-indicator-active":n===Math[d?"floor":"ceil"]((q.current+X)%X/c)}),onClick:()=>ee(n*c),children:A?.(n)},n)))})]})}));un.Item=dn;const mn=c(((n,a)=>{const{active:r,tabs:s,type:o="default",prepend:c,append:d,children:u,className:p,vertical:h,toggable:g,bar:f=!0,hideMore:y,barClass:N,renderMore:k=()=>t(be,{flat:!0,square:!0,size:"small",children:t(ye,{icon:t(K,{})})}),onTabChange:C,...x}=n,$=b([]),P=b(null),T=b(null),I=ae({active:r,prevActive:void 0,barStyle:{},cachedTabs:[],overflow:!1,more:[],tabs:[]}),{observe:z,unobserve:O}=Je(),S=oe(T);m((()=>{if(!s)return u?void(I.tabs=v.map(u,((e,t)=>{const{key:n,props:i}=e,{title:a,children:r,content:s,keepDOM:o}=i,c=r?l(r,["props","type","$$typeof","ref"]):s;return{key:n||String(t),title:a,content:c,keepDOM:o}}))):void(I.tabs=[]);I.tabs=s.map(((e,t)=>["string","number"].includes(typeof e)?{key:e,title:e}:(void 0===e.key&&(e.key=t),e)))}),[u,s]);const M=e=>{const{key:t}=e,n=I.tabs.findIndex((e=>e.key===t));if(n>-1)return void j(I.tabs[n].key??n);const i=I.tabs.length,a=e.key??i;I.tabs.push({...e,key:a}),j(a)},D=e=>{const t=I.tabs.findIndex((t=>t.key===e));if(t<0)return;if(I.tabs.splice(t,1),I.active!==e)return;const n=I.tabs[t]||I.tabs[t-1];j(I.prevActive??n?.key??"")},j=e=>{if(e===I.active){if(!g)return;return C?.(void 0,e),I.active=void 0,void(I.barStyle={height:0,width:0})}I.prevActive=I.active,C?.(e,I.active),I.active=e},E=e=>{e.stopPropagation(),e.preventDefault(),h||T.current?.scrollBy({left:e.deltaY+e.deltaX})};return m((()=>{if(!S||y)return;const{scrollHeight:e,scrollWidth:t}=T.current,{width:n,height:i}=S;I.overflow=e>i||t>n,I.overflow&&$.current.map(((e,t)=>{e&&z(e,((e,n)=>{I.tabs[t]&&(I.tabs[t].intersecting=n,I.more=I.tabs.filter((e=>!e.intersecting)))}))}))}),[S,y,I.tabs.length]),m((()=>{if(!f||"pane"===o||void 0===I.active)return;const e=I.tabs.findIndex((e=>e.key===I.active));setTimeout((()=>{const t=$.current[e];if(!t)return;if(I.tabs[e].keepDOM&&I.active){I.cachedTabs.findIndex((e=>e===I.active))<0&&I.cachedTabs.unshift(I.active)}const{offsetHeight:n,offsetLeft:i,offsetTop:a,offsetWidth:r}=t,s="line"===o;I.barStyle={height:!h&&s?".25em":n,width:h&&s?".25em":r,transform:`translate(${i}px, ${a}px)`}}),16)}),[I.active,f]),m((()=>{void 0!==r&&I.active!==r&&j(r)}),[r]),m((()=>{if(!y)return()=>{$.current?.map(O)}}),[I.tabs.length]),m((()=>{if(T.current&&!h)return T.current.addEventListener("wheel",E,{passive:!1}),()=>{T.current&&T.current.removeEventListener("wheel",E)}}),[T.current]),w(a,(()=>({open:j,close:D,add:M,navs:T}))),e("div",{className:i("i-tabs",{flex:h,[`i-tabs-${o}`]:"default"!==o},p),...x,children:[e("div",{className:i("i-tab-navs-container",{"i-tab-navs-vertical":h}),children:[c,e("div",{ref:T,className:"i-tab-navs",children:[I.tabs.map(((n,a)=>{const{title:r,key:s=a,closable:l}=n;return e("a",{ref:e=>$.current[a]=e,className:i("i-tab-nav",{"i-tab-active":I.active===s}),onClick:()=>j(s),children:[r,l&&t(Fe,{as:"i",active:!0,className:"i-tab-nav-close",onClick:e=>{e.stopPropagation(),D(s)}})]},s)})),f&&t("span",{ref:P,className:i("i-tab-navs-bar",N),style:I.barStyle})]}),!y&&I.overflow&&I.more.length>0&&t(dt,{arrow:!1,position:h?"right":"bottom",align:"end",touchable:!0,hideDelay:500,content:t("div",{className:"i-tabs-morelist pd-4",children:I.more.map(((e,n)=>{const{key:a=n,title:r}=e,s=I.active===a;return t("a",{className:i("i-tab-nav",{"i-tab-active":s}),onClick:()=>j(a),children:r},a)}))}),children:k(I.more)}),d]}),t("div",{className:"i-tab-contents",children:I.tabs.map(((e,n)=>{const{key:a=n,content:r}=e,s=I.active===a;return(s||void 0!==a&&I.cachedTabs.includes(a))&&t("div",{className:i("i-tab-content",{"i-tab-active":s}),children:r},a)}))})]})}));mn.Item=e=>t(n,{});const pn=n=>{const{dot:a,dotClass:r,outline:s,round:l,size:o="normal",className:c,children:d,onClose:u,onClick:m,...p}=n;return e("span",{className:i("i-tag",{"i-tag-outline":s,"i-tag-clickable":m,[`i-tag-${o}`]:"normal"!==o,round:l},c),onClick:m,...p,children:[a&&t("span",{className:i("i-tag-dot",r)}),d,u&&t(Fe,{active:!0,className:"i-tag-close",onClick:u})]})},hn=e=>{const{as:n="a",href:a,selected:r,children:s,...l}=e,o=i("i-tree-item-header",{"i-tree-item-selected":r});return t(n,"string"==typeof n?{href:a,className:o,...l,children:s}:{to:a||"",className:o,...l,children:s})},gn=n=>{const{item:a,depth:r=0,index:s,selected:l,checked:o=[],partofs:c={},checkable:d,nodeProps:u,renderExtra:m,onItemClick:p,onItemSelect:h,onItemCheck:f,...v}=n,{as:b,key:y="",href:N,icon:k,title:C,expanded:w,disabled:x}=a,$=a[u.children],[P,T]=g(w),I=re(((e,t)=>{t&&(e.preventDefault(),e.stopPropagation()),!x&&$?.length&&T((e=>!e))})),z=re((e=>{if(x)return e.preventDefault(),void e.stopPropagation();I(e),p?.(a,e),h?.(y,a)})),O=o.includes(y);return e("div",{className:i("i-tree-item",{"i-tree-expand":P}),children:[e(hn,{as:b,href:N,style:{paddingLeft:1.5*r+.5+"em"},selected:l===y,onClick:z,children:[d&&t(qe.Item,{value:O,partof:!O&&c[y],className:"i-tree-checkbox",onChange:e=>f?.(a,e,[]),onClick:e=>e.stopPropagation()}),k&&t("span",{className:"i-tree-item-icon",children:k}),t("span",{className:"i-tree-item-title",children:C}),m?.(a),$&&t(ye,{icon:t(ee,{}),className:"i-tree-toggle",onClick:e=>I(e,!0)})]}),$?.length&&t("div",{className:"i-tree-item-content",children:t(fn,{data:$,depth:r+1,selected:l,checkable:d,parent:a,partofs:c,checked:o,nodeProps:u,renderExtra:m,onItemClick:p,onItemSelect:h,onItemCheck:f,...v})})]})};function fn(e){const{data:a=[],depth:r=0,round:s,style:l,className:o,parent:c,nodeProps:d,...u}=e,m=a.map(((e,n)=>{const{type:i}=e,a=e[d.title],s=e[d.key]||(void 0!==c?.key?`${c.key}-${n}`:`${n}`);return e.key=s,e.parent=c,"title"===i?t("div",{className:"i-tree-group-title",children:a},n):i&&"item"!==i?t("div",{className:`i-tree-type-${i}`,children:a},n):t(gn,{index:n,item:e,depth:r,nodeProps:d,...u},s)}));return r>0?t(n,{children:m}):t("div",{className:i("i-tree",o,{"i-tree-round":s}),style:l,children:m})}const vn={key:"key",title:"title",children:"children"},bn=c(((e,n)=>{const{data:i=[],selected:a,checked:r=[],disabledRelated:s,nodeProps:l,onItemSelect:o,onItemCheck:c,...d}=e,u=ae({selected:a,checked:r,partofs:{},nodeMaps:new Map}),p=Object.assign({},vn,l),h=e=>u.checked.includes(e||""),g=re(((e,t,n)=>{const{key:i="",parent:a,children:r}=e,l={[i]:t},o={[i]:!1};if(s)return[l];if(t){if(a&&"leaf"!==n){const e=a.children?.some((e=>e.key!==i&&!h(e.key))),[t,n]=g(a,!0,"root");e||Object.assign(l,t),Object.assign(o,e?n:{},{[a.key]:!0})}return r?.length&&"root"!==n&&r.map((e=>{if(h(e.key))return;const[t]=g(e,!0,"leaf");Object.assign(l,t),o[e.key]=!1})),[l,o]}if(a&&"leaf"!==n){const[e,t]=g(a,!1,"root");Object.assign(l,e);const n=a.children?.some((e=>h(e.key)&&e.key!==i));Object.assign(o,n?{}:t,{[a.key]:n,[i]:!1})}return r?.length&&"root"!==n&&r.map((e=>{const[t]=g(e,!1,"leaf");h(e.key)&&(Object.assign(l,t),o[e.key]=!1)})),[l,o]}));return m((()=>{void 0!==a&&(u.selected=a)}),[a]),m((()=>{u.nodeMaps.clear();const{key:e,children:t}=p,n=i=>{i.map((i=>{u.nodeMaps.set(i[e],i),i[t]?.length>0&&n(i[t])}))};n(i)}),[i]),w(n,(()=>({getChecked:()=>{const e=[];return u.checked.map((t=>{const n=u.nodeMaps.get(t);e.push(n)})),[u.checked,e]},getSelected:()=>{const e=u.nodeMaps.get(u.selected);return[u.selected,e]},getPartofs:()=>{const e=[];return[Object.keys(u.partofs).filter((t=>{const n=u.partofs[t];if(n){const n=u.nodeMaps.get(t);e.push(n)}return n})),e]}}))),t(fn,{data:i,selected:u.selected,checked:u.checked,partofs:u.partofs,nodeProps:p,onItemCheck:(e,t)=>{const[n,i]=g(e,t),a=Object.keys(n);u.checked=t?Array.from(new Set([...u.checked,...a])):u.checked.filter((e=>!a.includes(e))),Object.assign(u.partofs,i),c?.(e,t,u.checked)},onItemSelect:(t,n)=>{e.selectable&&(u.selected=t,o?.(t,n))},...d})}));function yn(i){const{mode:a,index:r,file:s,onRemove:l,onPreview:c}=i;if(!s)return"";const{name:d,size:u,url:m,src:p}=s,h=Ye(d,s.type),g=t(Fe,{active:!0,className:"i-upload-delete",onClick:e=>{e.stopPropagation(),e.preventDefault(),l(r)}});if("card"===a){let i=t(n,{});switch(h){case Oe.IMAGE:i=t(Yt,{lazyload:!0,src:m||p,fit:"cover",usePreview:!1});break;case Oe.VIDEO:i=t("video",{src:m||p,preload:"none"});break;default:i=e(n,{children:[t(ye,{icon:t(te,{})}),t("span",{className:"i-upload-file-name",children:o(d)})]})}return e("div",{title:d,className:"i-upload-item-card",onClick:()=>c?.(r),children:[i,g]})}return e("div",{className:"i-upload-item",onClick:()=>c?.(r),children:[t("span",{children:d}),t("i",{className:"i-upload-size",children:Le(u??0)}),g]})}const Nn=c(((n,a)=>{const{label:s,labelInline:l,value:o,files:c=[],placeholder:d,status:u="normal",message:p,className:h,style:g,children:v,mode:y="default",cardSize:k="4em",disabled:C,limit:x=(n.multiple?1/0:1),multiple:$,renderItem:P=yn,shouldUpload:T=()=>!0,uploader:I,onChange:z,onFilesChange:O,onUpload:S,...M}=n,D=ae({files:c,value:o,status:u,message:p,update:0}),j=b(null),E=Bt(),A=f((()=>v||("card"===y?t(be,{className:"i-upload-card-btn color-5",square:!0,flat:!0,outline:!0,disabled:C,children:t(ye,{icon:t(ie,{})})}):e(be,{className:"i-upload-btn",disabled:C,children:[t(ye,{icon:t(ne,{})})," Upload"]}))),[y,v]),B=e=>{const[...t]=D.files,n=t.splice(e,1);URL.revokeObjectURL(n[0]?.src||""),D.files=t,O?.(t,n),z?.(t),j.current&&(j.current.value="")},Y=async e=>{I&&e.forEach((async e=>{if(!T(e))return;const t=await I(e),n=D.files.findIndex((e=>e.uid===t.uid));n>-1&&(D.files[n]=t),"completed"===t?.status&&S?.(t)}))},L=e=>{E({items:D.files,initial:e})};m((()=>{Object.assign(D,{status:u,message:p})}),[u,p]),m((()=>{D.value=o}),[o]),w(a,(()=>({getFileList:()=>D.files})),[]);const{message:V,files:W}=D;return e(rt,{label:s,labelInline:l,className:i("i-input-label-file",h),style:g,children:[t("input",{...M,disabled:C,ref:j,type:"file",className:"i-input-file-hidden",multiple:$,onChange:e=>{const t=Array.from(e.target.files||[]),{files:n}=D,i=[];t.map((e=>{const{name:t,size:a,type:s}=e,l=n.find((e=>{const{name:n,size:i,type:r}=e;return n===t&&i===a&&r===s})),o=URL.createObjectURL(e);e.src=o,D.update+=1,Object.assign(e,{uid:r(7),src:e.src||e.name}),!l&&i.push(e)}));const a=[...n,...i];Object.assign(D,{files:$?a.slice(0,x):[a.at(-1)],status:u,message:p}),O?.(D.files,i,e),z?.(D.files,e),Y(i),j.current&&(j.current.value="")}}),e("div",{className:i("i-upload-inner",{[`i-upload-${y}`]:"default"!==y}),style:{"--upload-card-size":k},children:[t("div",{className:"i-upload-list",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:W?.map(((e,n)=>t(N,{children:yn({index:n,file:e,mode:y,onRemove:B,onPreview:L})},n)))}),V&&t("span",{className:"i-upload-message",children:V}),W.length<x&&A]})]})})),kn={enable:!1,timeout:500},Cn=()=>{kn.enable||(kn.enable=!0,document.addEventListener("mousedown",wn))};function wn(e){const t=e.target,n=t.closest("[data-ripple]");t&&n&&function(e,t){const[n,i]=function(){const e=document.createElement("SPAN"),t=document.createElement("SPAN");return e.className="i-ripple-container",t.className="i-ripple",e.append(t),[e,t]}(),a=e.getBoundingClientRect(),r=2*Math.max(a.width,a.height);i.style.cssText=`\n        left: ${t.pageX-a.left}px;\n        top: ${t.pageY-a.top}px;\n        width: ${r}px;\n        height: ${r}px;\n        transition: all ${kn.timeout/1e3}s;\n    `,e.insertAdjacentElement("afterbegin",n),e.offsetHeight,i.classList.add("i-ripple-active"),setTimeout((()=>{n.remove()}),kn.timeout)}(n,e)}export{ke as Affix,Ce as Area,we as Badge,be as Button,ze as Card,qe as Checkbox,He as Collapse,at as Datagrid,ft as Datepicker,vt as Description,bt as Drawer,yt as Dropdown,wt as Flex,Pt as Form,ye as Icon,Yt as Image,ot as Input,kt as List,fe as Loading,Ut as Message,It as Modal,Kt as Pagination,Jt as Popconfirm,dt as Popup,Dt as Progress,en as Radio,an as Select,cn as Step,un as Swiper,mn as Tabs,pn as Tag,Ot as Text,bn as Tree,Nn as Upload,jt as Video,Bt as usePreview,Cn as useRipple};
//# sourceMappingURL=index.js.map
