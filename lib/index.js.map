{"version":3,"file":"index.js","sources":["../packages/components/loading/loading.tsx","../packages/components/button/button.tsx","../packages/components/button/index.tsx","../packages/components/button/toggle.tsx","../packages/components/button/group.tsx","../packages/components/icon/icon.tsx","../packages/components/affix/totop.tsx","../packages/components/affix/affix.tsx","../packages/components/area/area.tsx","../packages/components/area/item.tsx","../packages/components/badge/badge.tsx","../packages/components/card/area.tsx","../packages/components/card/card.tsx","../packages/js/usePreview/type.ts","../packages/js/utils.ts","../packages/components/checkbox/item.tsx","../packages/components/checkbox/checkbox.tsx","../packages/components/utils/helpericon/helpericon.tsx","../packages/components/collapse/collapse.tsx","../packages/components/utils/empty/index.tsx","../packages/components/datagrid/cell.tsx","../packages/components/collapse/item.tsx","../packages/js/hooks.ts","../packages/components/datagrid/resize.tsx","../packages/components/datagrid/sorter.tsx","../packages/components/datagrid/row.tsx","../packages/components/datagrid/datagrid.tsx","../packages/components/input/container.tsx","../packages/components/input/number.tsx","../packages/components/input/textarea.tsx","../packages/components/input/input.tsx","../packages/components/input/range.tsx","../packages/components/popup/content.tsx","../packages/components/popup/popup.tsx","../packages/components/datepicker/dates.tsx","../packages/components/datepicker/panel.tsx","../packages/components/datepicker/datepicker.tsx","../packages/components/description/description.tsx","../packages/components/drawer/drawer.tsx","../packages/components/dropdown/dropdown.tsx","../packages/components/list/item.tsx","../packages/components/list/list.tsx","../packages/components/list/virtual.tsx","../packages/components/dropdown/item.tsx","../packages/components/dropdown/index.tsx","../packages/components/flex/flex.tsx","../packages/components/form/context.tsx","../packages/components/form/useForm.ts","../packages/components/form/form.tsx","../packages/components/modal/modal.tsx","../packages/components/form/field.tsx","../packages/components/modal/useModal.tsx","../packages/components/modal/hookModal.tsx","../packages/components/text/text.tsx","../packages/components/progress/circle.tsx","../packages/components/text/highlight.tsx","../packages/components/text/number.tsx","../packages/components/text/time.tsx","../packages/components/progress/line.tsx","../packages/components/progress/progress.tsx","../packages/components/video/video.tsx","../packages/js/usePreview/renderFile.tsx","../packages/js/usePreview/content.tsx","../packages/js/usePreview/index.tsx","../packages/components/image/image.tsx","../packages/components/image/list.tsx","../packages/components/message/message.tsx","../packages/components/pagination/page.tsx","../packages/components/pagination/pagination.tsx","../packages/components/popconfirm/popconfirm.tsx","../packages/components/radio/item.tsx","../packages/components/radio/radio.tsx","../packages/components/select/options.tsx","../packages/components/select/select.tsx","../packages/components/step/divider.tsx","../packages/components/step/item.tsx","../packages/components/step/step.tsx","../packages/components/swiper/item.tsx","../packages/components/swiper/swiper.tsx","../packages/components/tabs/item.tsx","../packages/components/tabs/tabs.tsx","../packages/components/tag/tag.tsx","../packages/components/tree/item.tsx","../packages/components/tree/list.tsx","../packages/components/tree/tree.tsx","../packages/components/upload/renderFile.tsx","../packages/components/upload/upload.tsx","../packages/js/useRipple/index.ts"],"sourcesContent":["import classNames from \"classnames\";\r\nimport \"./index.css\";\r\nimport { ILoading } from \"./type\";\r\n\r\nconst Loading = (props: ILoading): JSX.Element => {\r\n\tconst { icon, text, size, style = {}, className, ...rest } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-loading-container\", className)}\r\n\t\t\tstyle={{ fontSize: size, ...style }}\r\n\t\t\t{...rest}\r\n\t\t>\r\n\t\t\t{icon || (\r\n\t\t\t\t<svg\r\n\t\t\t\t\twidth='24'\r\n\t\t\t\t\theight='24'\r\n\t\t\t\t\tstroke='#000'\r\n\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tclassName='i-loading-icon'\r\n\t\t\t\t>\r\n\t\t\t\t\t<circle\r\n\t\t\t\t\t\tcx='12'\r\n\t\t\t\t\t\tcy='12'\r\n\t\t\t\t\t\tr='9.5'\r\n\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\tstrokeWidth='3'\r\n\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\tstrokeDasharray={40}\r\n\t\t\t\t\t\tstrokeDashoffset={0}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t)}\r\n\r\n\t\t\t{text}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loading;\r\n","import classnames from \"classnames\";\r\nimport { MouseEvent, createElement, forwardRef } from \"react\";\r\nimport Loading from \"../loading\";\r\nimport \"./index.css\";\r\nimport { CompositionButton, IButton } from \"./type\";\r\n\r\nconst formatClass = ({\r\n\toutline,\r\n\tflat,\r\n\tloading,\r\n\tdisabled,\r\n\tsize = \"normal\",\r\n\tblock,\r\n\tround,\r\n\tsquare,\r\n\tsecondary,\r\n\tclassName,\r\n}: IButton) =>\r\n\tclassnames(\"i-btn\", className, {\r\n\t\t\"i-btn-outline\": outline,\r\n\t\t\"i-btn-flat\": flat,\r\n\t\t\"i-btn-block\": block,\r\n\t\t\"i-btn-loading\": loading,\r\n\t\t\"i-btn-square\": square,\r\n\t\t\"i-btn-secondary\": secondary,\r\n\t\t[`i-btn-${size}`]: size !== \"normal\",\r\n\t\tround,\r\n\t\tdisabled,\r\n\t});\r\n\r\nconst Button = forwardRef<HTMLElement, IButton>((props, ref) => {\r\n\tconst {\r\n\t\tas: As = \"a\",\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\tloading,\r\n\t\tflat,\r\n\t\toutline,\r\n\t\tsquare,\r\n\t\tsecondary,\r\n\t\tsize,\r\n\t\tround,\r\n\t\thref,\r\n\t\tripple = true,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst handleClick = (e: MouseEvent<HTMLElement>) => {\r\n\t\tif (loading || restProps.disabled) {\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonClick?.(e);\r\n\t};\r\n\r\n\tif (!children) return <></>;\r\n\r\n\tconst childNodes = [\r\n\t\tloading && <Loading key='loading' />,\r\n\t\tcreateElement(\r\n\t\t\t\"span\",\r\n\t\t\t{ key: \"content\", className: \"i-btn-content\" },\r\n\t\t\tchildren\r\n\t\t),\r\n\t];\r\n\r\n\tconst attrs = {\r\n\t\tclassName: formatClass(props),\r\n\t\t[\"data-ripple\"]: ripple,\r\n\t\tonClick: handleClick,\r\n\t};\r\n\r\n\tif (typeof As === \"string\") {\r\n\t\treturn createElement(\r\n\t\t\tAs,\r\n\t\t\t{\r\n\t\t\t\tref,\r\n\t\t\t\thref,\r\n\t\t\t\t...attrs,\r\n\t\t\t\t...restProps,\r\n\t\t\t},\r\n\t\t\tchildNodes\r\n\t\t);\r\n\t}\r\n\r\n\treturn createElement(\r\n\t\tAs,\r\n\t\t{\r\n\t\t\tto: href || \"\",\r\n\t\t\t...attrs,\r\n\t\t\t...restProps,\r\n\t\t},\r\n\t\tchildNodes\r\n\t);\r\n}) as CompositionButton;\r\n\r\nexport default Button;\r\n","import Button from \"./button\";\r\nimport Group from \"./group\";\r\nimport Toggle from \"./toggle\";\r\n\r\nButton.Toggle = Toggle;\r\nButton.Group = Group;\r\n\r\nexport default Button;\r\n","import { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { MouseEvent, useCallback, useEffect } from \"react\";\r\nimport Button from \"./button\";\r\nimport { IButtonToggle } from \"./type\";\r\n\r\nexport default function Toggle(props: IButtonToggle) {\r\n\tconst {\r\n\t\tactive,\r\n\t\tactiveClass,\r\n\t\tafter,\r\n\t\tdisabled,\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\tonClick,\r\n\t\tonToggle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tactive,\r\n\t\tdone: true,\r\n\t});\r\n\r\n\tconst toggle = useCallback(() => {\r\n\t\tconst hasAfter = after !== undefined;\r\n\t\tconst nextActive = !state.active;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tactive: nextActive,\r\n\t\t\tdone: !hasAfter,\r\n\t\t});\r\n\t\tonToggle?.(nextActive);\r\n\r\n\t\thasAfter &&\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.done = true;\r\n\t\t\t}, 16);\r\n\t}, [after]);\r\n\r\n\tconst handleClick = (e: MouseEvent<HTMLElement>) => {\r\n\t\tonClick?.(e);\r\n\r\n\t\t!disabled && toggle();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.active !== active && toggle();\r\n\t}, [active]);\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tclassName={classNames(\r\n\t\t\t\tclassName,\r\n\t\t\t\t{ [activeClass || \"\"]: state.active },\r\n\t\t\t\t\"i-btn-toggle\"\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-btn-toggle-content\", {\r\n\t\t\t\t\t\"i-btn-toggle-active\": state.done,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{state.active ? after ?? children : children}\r\n\t\t\t</div>\r\n\t\t</Button>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { IButtonGroup } from \"./type\";\r\n\r\nexport default function Group(props: IButtonGroup) {\r\n\tconst { children, vertical, className, style } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\tclassName,\r\n\t\t\t\tvertical ? \"i-btn-group-vertical\" : \"i-btn-group-horizonal\"\r\n\t\t\t)}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { cloneElement, forwardRef, isValidElement } from \"react\";\r\nimport \"./index.css\";\r\nimport { IIcon } from \"./type\";\r\n\r\nconst Icon = forwardRef((props: IIcon, ref) => {\r\n\tconst {\r\n\t\ticon,\r\n\t\tsize = \"1.425em\",\r\n\t\trotate,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tif (!isValidElement(icon)) return icon;\r\n\r\n\tconst elProps = {\r\n\t\tref,\r\n\t\tstyle: {\r\n\t\t\ttransform: rotate ? `rotate(${rotate}deg)` : undefined,\r\n\t\t\t...style,\r\n\t\t\twidth: size,\r\n\t\t\theight: size,\r\n\t\t},\r\n\t\tclassName: classNames(\"i-icon\", className),\r\n\t\t...restProps,\r\n\t};\r\n\r\n\treturn cloneElement(icon, elProps);\r\n});\r\n\r\nexport default Icon;\r\n","import { SkipPreviousRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport { IAffix } from \"./type\";\r\n\r\nfunction ToTop(props: IAffix) {\r\n\tconst { style, className, onClick } = props;\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tsquare\r\n\t\t\tclassName={classNames(\"i-affix-totop\", className)}\r\n\t\t\tstyle={{ ...style }}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t<Icon icon={<SkipPreviousRound />} rotate={90} />\r\n\t\t</Button>\r\n\t);\r\n}\r\n\r\nexport default ToTop;\r\n","import classNames from \"classnames\";\r\nimport { debounce } from \"radash\";\r\nimport {\r\n\tChildren,\r\n\tMouseEvent,\r\n\tcloneElement,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseState,\r\n} from \"react\";\r\nimport \"./index.css\";\r\nimport ToTop from \"./totop\";\r\nimport { IAffix } from \"./type\";\r\n\r\nconst Affix = (props: IAffix): JSX.Element => {\r\n\tconst {\r\n\t\tposition = \"fixed\",\r\n\t\tleft,\r\n\t\ttop,\r\n\t\tright,\r\n\t\tbottom,\r\n\t\toffset,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tgetContainer = () => document.body,\r\n\t} = props;\r\n\r\n\tconst [hidden, setHidden] = useState<boolean>(false);\r\n\r\n\tconst hijackChildren = useMemo(\r\n\t\t() =>\r\n\t\t\tChildren.map(children, (node: any) => {\r\n\t\t\t\tif (node.type === ToTop) {\r\n\t\t\t\t\tconst { onClick } = node.props;\r\n\r\n\t\t\t\t\treturn cloneElement(node, {\r\n\t\t\t\t\t\tkey: node.key,\r\n\t\t\t\t\t\t...node.props,\r\n\t\t\t\t\t\tonClick: (e: MouseEvent) => {\r\n\t\t\t\t\t\t\tconst container = getContainer();\r\n\r\n\t\t\t\t\t\t\tonClick?.(e);\r\n\t\t\t\t\t\t\tcontainer?.scrollTo({\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn node;\r\n\t\t\t}),\r\n\t\t[children, getContainer]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst container = getContainer();\r\n\t\tif (!offset || !container) return;\r\n\r\n\t\tconsole.log(container);\r\n\r\n\t\tconst listener = debounce({ delay: 160 }, () => {\r\n\t\t\tconst top = container.scrollTop;\r\n\t\t\tconsole.log(top);\r\n\r\n\t\t\tsetHidden(top < offset);\r\n\t\t});\r\n\t\tlistener();\r\n\r\n\t\tcontainer.addEventListener(\"scroll\", listener);\r\n\r\n\t\treturn () => {\r\n\t\t\tcontainer.removeEventListener(\"scroll\", listener);\r\n\t\t};\r\n\t}, [offset, getContainer]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-affix\", className, {\r\n\t\t\t\t\"i-affix-hidden\": hidden,\r\n\t\t\t})}\r\n\t\t\tstyle={{\r\n\t\t\t\t...style,\r\n\t\t\t\tposition,\r\n\t\t\t\tleft,\r\n\t\t\t\ttop,\r\n\t\t\t\tright,\r\n\t\t\t\tbottom,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{hijackChildren}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nAffix.ToTop = ToTop;\r\n\r\nexport default Affix;\r\n","import classNames from \"classnames\";\r\nimport \"./area.css\";\r\nimport Item from \"./item\";\r\n\r\nfunction Area<IArea>(props) {\r\n\tconst { layout = \"ltcb\", style, className, children } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(`i-area i-area-${layout}`, className)}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nArea.Item = Item;\r\n\r\nexport default Area;\r\n","import classNames from \"classnames\";\r\nimport Scrollbars from \"react-custom-scrollbars-2\";\r\nimport { IAreaItem } from \"./type\";\r\n\r\nfunction Item(props: IAreaItem) {\r\n\tconst { name = \"content\", style, className, children } = props;\r\n\r\n\treturn (\r\n\t\t<Scrollbars\r\n\t\t\tclassName={classNames(`i-area-${name}`, className)}\r\n\t\t\tstyle={{ gridArea: name, ...style }}\r\n\t\t\tautoHide\r\n\t\t\trenderView={(props) => (\r\n\t\t\t\t<div {...props} className='i-area-scrollview' />\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Scrollbars>\r\n\t);\r\n}\r\n\r\nexport default Item;\r\n","import classNames from \"classnames\";\r\nimport \"./index.css\";\r\nimport type { IBadge } from \"./type\";\r\n\r\nconst Badge = (props: IBadge): JSX.Element => {\r\n\tconst {\r\n\t\tcontent,\r\n\t\tcontentClass,\r\n\t\tdot,\r\n\t\tdotSize,\r\n\t\tround,\r\n\t\tdisabled,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\"i-badge\", { rounded: round }, className)}\r\n\t\t>\r\n\t\t\t{children}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-badge-content\", contentClass, {\r\n\t\t\t\t\t\"i-badge-dot\": dot,\r\n\t\t\t\t\t\"i-badge-hidden\": disabled,\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{ fontSize: dotSize }}\r\n\t\t\t>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Badge;\r\n","import classNames from \"classnames\";\r\n\r\nconst Area = (name: string) => (props) =>\r\n\t(\r\n\t\t<div\r\n\t\t\tstyle={props.style}\r\n\t\t\tclassName={classNames(\"i-card-\" + name, props.className)}\r\n\t\t>\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n\r\nconst Header = Area(\"header\") as any;\r\nconst Footer = Area(\"footer\") as any;\r\nconst Banner = Area(\"banner\") as any;\r\nconst Tailer = Area(\"tail\") as any;\r\n\r\nexport { Banner, Footer, Header, Tailer };\r\n","import classNames from \"classnames\";\r\nimport { Children, useMemo } from \"react\";\r\nimport { Banner, Footer, Header, Tailer } from \"./area\";\r\nimport \"./index.css\";\r\nimport { ICard } from \"./type\";\r\n\r\nconst Card = (props: ICard): JSX.Element => {\r\n\tconst { shadow = true, border, style, className, children } = props;\r\n\r\n\tconst slots: any = useMemo(() => {\r\n\t\tconst nodes = {};\r\n\r\n\t\tChildren.map(children, (child: any) => {\r\n\t\t\tconst type = child.type;\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase Header:\r\n\t\t\t\t\tnodes[\"header\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Footer:\r\n\t\t\t\t\tnodes[\"footer\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Banner:\r\n\t\t\t\t\tnodes[\"banner\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Tailer:\r\n\t\t\t\t\tnodes[\"tailer\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnodes[\"content\"] = [...(nodes[\"content\"] || []), child];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn nodes;\r\n\t}, [children]);\r\n\r\n\tconst { header, banner, content, footer, tailer } = slots;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\"i-card\", className, {\r\n\t\t\t\tshadow,\r\n\t\t\t\t\"i-card-bordered\": border,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{banner}\r\n\r\n\t\t\t{header}\r\n\r\n\t\t\t{content && <div className='i-card-content'>{content}</div>}\r\n\r\n\t\t\t{footer}\r\n\r\n\t\t\t{tailer}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCard.Header = Header;\r\nCard.Footer = Footer;\r\nCard.Banner = Banner;\r\nCard.Tailer = Tailer;\r\n\r\nexport default Card;\r\n","import { IModal } from \"@p/components/modal/type\";\r\nimport { CSSProperties, ReactNode } from \"react\";\r\n\r\nexport type TPreviewItem = {\r\n\tsrc: string;\r\n\tname?: ReactNode;\r\n\tthumb?: string;\r\n\trotate?: number;\r\n\tzoom?: number;\r\n\tstyle?: CSSProperties;\r\n\ttype?: TFileType;\r\n\tsuffix?: string;\r\n};\r\n\r\nexport enum TFileType {\r\n\tIMAGE = \"IMAGE\",\r\n\tVIDEO = \"VIDEO\",\r\n\tAUDIO = \"AUDIO\",\r\n\tPDF = \"PDF\",\r\n\tEXCEL = \"EXCEL\",\r\n\tTXT = \"TXT\",\r\n\tUNKNOWN = \"UNKNOWN\",\r\n}\r\n\r\nexport interface IPreview {\r\n\titems: (TPreviewItem | string)[];\r\n\tinitial?: number;\r\n\tcontrols?: boolean;\r\n\tloop?: boolean;\r\n\tclassName?: string;\r\n\tstyle?: CSSProperties;\r\n\tmodalProps?: IModal;\r\n\trenderImage?: (file: TPreviewItem) => ReactNode;\r\n\trenderFile?: (file: TPreviewItem) => ReactNode;\r\n\tonClose?: () => void;\r\n\tonChange?: (after: number, before?: number) => void;\r\n\tonZoom?: (scale: number) => void;\r\n\tonRotate?: (deg: number) => void;\r\n}\r\n","import { TFileType } from \"@p/js/usePreview/type\";\r\nimport { TOption, TOptions } from \"@p/types/type\";\r\nimport { MouseEvent, ReactNode } from \"react\";\r\nimport { Root, createRoot } from \"react-dom/client\";\r\nimport type { TRelativeOptions } from \"./type\";\r\n\r\ntype TComputePosition = {\r\n\tcontainerSize: number;\r\n\ttargetSize: number;\r\n\ttargetOffset: number;\r\n\tcontentSize: number;\r\n\tgap: number;\r\n\talign?: \"start\" | \"center\" | \"end\";\r\n};\r\n\r\nexport function getPosition(\r\n\t$source?: HTMLElement | null,\r\n\t$popup?: HTMLElement | null,\r\n\toptions: TRelativeOptions = {}\r\n): [\r\n\tx: number,\r\n\ty: number,\r\n\tz: {\r\n\t\tarrowX: number;\r\n\t\tarrowY: number;\r\n\t\tarrowPos: string;\r\n\t}\r\n] {\r\n\tconst { refWindow, gap = 0, offset = 0, position = \"top\", align } = options;\r\n\r\n\tif (!$source || !$popup)\r\n\t\treturn [\r\n\t\t\t0,\r\n\t\t\t0,\r\n\t\t\t{\r\n\t\t\t\tarrowX: 0,\r\n\t\t\t\tarrowY: 0,\r\n\t\t\t\tarrowPos: \"bottom\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\tconst rectT = $source.getBoundingClientRect();\r\n\tconst rectC = $popup.getBoundingClientRect();\r\n\r\n\tlet w = window.innerWidth;\r\n\tlet h = window.innerHeight;\r\n\tlet {\r\n\t\tleft: tl,\r\n\t\ttop: tt,\r\n\t\tright: tr,\r\n\t\tbottom: tb,\r\n\t\twidth: tw,\r\n\t\theight: th,\r\n\t} = rectT;\r\n\tconst { height: ch, width: cw } = rectC;\r\n\r\n\tif (!refWindow) {\r\n\t\tconst rectPa = $source.offsetParent?.getBoundingClientRect();\r\n\r\n\t\tw = rectPa?.width || w;\r\n\t\th = rectPa?.height || h;\r\n\t\ttl = $source.offsetLeft;\r\n\t\ttt = $source.offsetTop;\r\n\t\ttr = tl + rectT.width;\r\n\t\ttb = tt + rectT.height;\r\n\t}\r\n\r\n\tlet y = 0;\r\n\tlet x = 0;\r\n\tlet arrowX = 0;\r\n\tlet arrowY = 0;\r\n\tlet arrowPos = \"bottom\";\r\n\r\n\tswitch (position) {\r\n\t\tcase \"left\":\r\n\t\tcase \"right\":\r\n\t\t\ty =\r\n\t\t\t\tth !== ch\r\n\t\t\t\t\t? computePosition({\r\n\t\t\t\t\t\t\tcontainerSize: h,\r\n\t\t\t\t\t\t\ttargetSize: th,\r\n\t\t\t\t\t\t\ttargetOffset: tt,\r\n\t\t\t\t\t\t\tcontentSize: ch,\r\n\t\t\t\t\t\t\tgap,\r\n\t\t\t\t\t\t\talign,\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: tt;\r\n\t\t\tarrowY = y < tt ? tt - y + th / 2 : th / 2;\r\n\r\n\t\t\tconst xl = tl - offset - cw;\r\n\t\t\tconst xr = tr + offset + cw;\r\n\t\t\tif (position === \"left\") {\r\n\t\t\t\tx = xl < 0 ? tr + offset : xl;\r\n\t\t\t\tarrowX = xl < 0 ? 0 : cw;\r\n\t\t\t\tarrowPos = xl < 0 ? \"left\" : \"right\";\r\n\t\t\t} else {\r\n\t\t\t\tx = w > xr ? tr + offset : xl;\r\n\t\t\t\tarrowX = w > xr ? 0 : cw;\r\n\t\t\t\tarrowPos = w > xr ? \"left\" : \"right\";\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"top\":\r\n\t\tcase \"bottom\":\r\n\t\t\tx =\r\n\t\t\t\ttw !== cw\r\n\t\t\t\t\t? computePosition({\r\n\t\t\t\t\t\t\tcontainerSize: w,\r\n\t\t\t\t\t\t\ttargetOffset: tl,\r\n\t\t\t\t\t\t\ttargetSize: tw,\r\n\t\t\t\t\t\t\tcontentSize: cw,\r\n\t\t\t\t\t\t\tgap,\r\n\t\t\t\t\t\t\talign,\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: tl;\r\n\t\t\tarrowX = x > tl ? cw / 2 : tl - x + tw / 2;\r\n\r\n\t\t\tconst yt = tt - offset - ch;\r\n\t\t\tconst yb = tb + offset + ch;\r\n\t\t\tif (position === \"top\") {\r\n\t\t\t\ty = yt < 0 ? tb + offset : yt;\r\n\t\t\t\tarrowY = yt < 0 ? 0 : ch;\r\n\t\t\t\tarrowPos = yt < 0 ? \"top\" : \"bottom\";\r\n\t\t\t} else {\r\n\t\t\t\ty = h > yb ? tb + offset : yt;\r\n\t\t\t\tarrowY = h > yb ? 0 : ch;\r\n\t\t\t\tarrowPos = h > yb ? \"top\" : \"bottom\";\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn [\r\n\t\tx,\r\n\t\ty,\r\n\t\t{\r\n\t\t\tarrowX,\r\n\t\t\tarrowY,\r\n\t\t\tarrowPos,\r\n\t\t},\r\n\t];\r\n}\r\n\r\nexport function getPointPosition(e: MouseEvent, content: HTMLElement) {\r\n\tconst { pageX: x, pageY: y } = e;\r\n\tconst { width: w, height: h } = content.getBoundingClientRect();\r\n\tconst { innerHeight: wh, innerWidth: ww } = window;\r\n\r\n\tconst left = x + w >= ww ? (x - w > 0 ? x - w : x) : x;\r\n\tconst top = y + h >= wh ? (y - h > 0 ? y - h : y) : y;\r\n\r\n\treturn [left, top];\r\n}\r\n\r\nfunction computePosition({\r\n\tcontainerSize,\r\n\ttargetSize,\r\n\ttargetOffset,\r\n\tcontentSize,\r\n\tgap,\r\n\talign = \"center\",\r\n}: TComputePosition) {\r\n\tconst centerPoint = targetOffset + targetSize / 2;\r\n\r\n\tswitch (align) {\r\n\t\tcase \"start\":\r\n\t\t\treturn targetOffset + contentSize > containerSize\r\n\t\t\t\t? targetOffset + targetSize\r\n\t\t\t\t: targetOffset;\r\n\t\tcase \"center\":\r\n\t\t\tif (targetSize >= contentSize) {\r\n\t\t\t\treturn centerPoint - contentSize / 2;\r\n\t\t\t}\r\n\r\n\t\t\tif (centerPoint + contentSize / 2 + gap > containerSize) {\r\n\t\t\t\treturn targetOffset + targetSize - contentSize;\r\n\t\t\t}\r\n\r\n\t\t\tif (centerPoint - contentSize / 2 - gap < 0) {\r\n\t\t\t\treturn gap;\r\n\t\t\t}\r\n\r\n\t\t\treturn centerPoint - contentSize / 2;\r\n\t\tcase \"end\":\r\n\t\t\tconst result = targetOffset + targetSize - contentSize;\r\n\t\t\treturn result > 0 ? result : gap;\r\n\t\tdefault:\r\n\t\t\treturn centerPoint - contentSize / 2;\r\n\t}\r\n}\r\n\r\nexport function formatOption(options: TOptions): TOption[] {\r\n\treturn options.map((option) =>\r\n\t\t[\"string\", \"number\"].includes(typeof option)\r\n\t\t\t? { label: option, value: option }\r\n\t\t\t: option\r\n\t) as TOption[];\r\n}\r\n\r\nexport function animate(\r\n\tfrom: number,\r\n\tto: number,\r\n\tduration: number = 1000,\r\n\tcallback?: (v: number) => void,\r\n\teasing: (t: number) => number = (t) => 1 - Math.pow(1 - t, 4)\r\n) {\r\n\tconst start = performance.now();\r\n\tconst diff = to - from;\r\n\tlet raf = requestAnimationFrame(loop);\r\n\r\n\tfunction loop() {\r\n\t\traf = requestAnimationFrame(loop);\r\n\r\n\t\tconst past = performance.now() - start;\r\n\t\tlet percent = past / duration;\r\n\r\n\t\tif (percent >= 1) {\r\n\t\t\tpercent = 1;\r\n\t\t\tcancelAnimationFrame(raf);\r\n\t\t}\r\n\r\n\t\tconst pass = diff * easing(percent);\r\n\t\tcallback?.(pass);\r\n\t}\r\n}\r\n\r\nexport function formatNumber(\r\n\tvalue: number,\r\n\toptions: {\r\n\t\tprecision?: number;\r\n\t\tthousand?: string;\r\n\t} = {}\r\n) {\r\n\tconst { precision, thousand } = options;\r\n\r\n\tconst result = value.toFixed(precision);\r\n\r\n\tif (!thousand) return result;\r\n\r\n\tconst points = result.split(\".\");\r\n\tconst integer = points[0].replace(\r\n\t\t/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,\r\n\t\t`$&${thousand}`\r\n\t);\r\n\r\n\tif (points.length === 1) return integer;\r\n\r\n\treturn `${integer}.${points[1]}`;\r\n}\r\n\r\nexport function renderNode(node: ReactNode, container = document.body) {\r\n\tconst div: HTMLDivElement | null = document.createElement(\"div\");\r\n\tcontainer.append(div);\r\n\r\n\tconst root: Root | null = createRoot(div);\r\n\tconst sto = setTimeout(() => {\r\n\t\troot?.render(node);\r\n\t}, 0);\r\n\r\n\treturn () => {\r\n\t\tdiv?.remove();\r\n\t\troot?.unmount();\r\n\t\tsto && clearTimeout(sto);\r\n\t};\r\n}\r\n\r\nexport function getSuffixByUrl(url: string) {\r\n\treturn url.match(/\\.([^\\./\\?]+)($|\\?)/)?.[1];\r\n}\r\n\r\nexport function getFileType(suffix: string, type?: string): TFileType {\r\n\tswitch (true) {\r\n\t\tcase [\"jpg\", \"jpeg\", \"png\", \"webp\", \"svg\"].includes(suffix) ||\r\n\t\t\ttype?.startsWith(\"image/\"):\r\n\t\t\treturn TFileType[\"IMAGE\"];\r\n\t\tcase [\"mp4\", \"avi\"].includes(suffix) || type?.startsWith(\"video/\"):\r\n\t\t\treturn TFileType[\"VIDEO\"];\r\n\t\tdefault:\r\n\t\t\treturn TFileType[\"UNKNOWN\"];\r\n\t}\r\n}\r\n\r\nexport function fullScreen(el: HTMLElement) {\r\n\tel.requestFullscreen?.();\r\n}\r\n\r\nexport function exitFullScreen() {\r\n\tdocument.exitFullscreen?.();\r\n}\r\n\r\nexport function formatTime(\r\n\ttime: number,\r\n\toptions?: {\r\n\t\tzero?: boolean;\r\n\t\tunits?: string[];\r\n\t}\r\n) {\r\n\tconst result: string[] = [];\r\n\tconst { zero = true, units = [\"\", \":\", \":\"] } = options || {};\r\n\r\n\tconst l = units.length;\r\n\tlet i = 0;\r\n\r\n\twhile (i < l) {\r\n\t\tif (time <= 0 && i > 1) break;\r\n\r\n\t\tconst n = Math.round(time % 60);\r\n\r\n\t\ttime = Math.floor(time / 60);\r\n\r\n\t\tresult.unshift((zero && n < 10 ? `0${n}` : n) + units[i++]);\r\n\t}\r\n\r\n\treturn result.join(\"\");\r\n}\r\n\r\nexport function getNextSorter(\r\n\tprevSortBy: string,\r\n\tprevSortType: string,\r\n\tsortBy: string\r\n): [sortBy: string, sortType: string] {\r\n\tconst types = [\"desc\", \"asc\"];\r\n\r\n\tif (prevSortBy === sortBy) {\r\n\t\tconst i = types.findIndex((t) => t === prevSortType) + 1;\r\n\t\tconst type = types[i] || \"\";\r\n\t\tconst by = type === \"\" ? \"\" : sortBy;\r\n\r\n\t\treturn [by, type];\r\n\t}\r\n\r\n\treturn [sortBy, \"desc\"];\r\n}\r\n\r\nexport function formatBytes(bytes: number, decimals = 2) {\r\n\tif (!+bytes) return \"0 Bytes\";\r\n\r\n\tconst k = 1024;\r\n\tconst dm = decimals < 0 ? 0 : decimals;\r\n\tconst sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\r\n\r\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n\treturn `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\r\n}\r\n\r\nexport function clamp(value: number, min: number, max: number) {\r\n\treturn value < min ? min : value > max ? max : value;\r\n}\r\n","import { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { ChangeEvent, useEffect } from \"react\";\r\nimport { ICheckboxItem } from \"./type\";\r\n\r\nexport default function CheckboxItem(props: ICheckboxItem) {\r\n\tconst {\r\n\t\ttype = \"default\",\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = false,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\tdisabled,\r\n\t\tpartof,\r\n\t\tchildren,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t\tstatus,\r\n\t\tmessage,\r\n\t});\r\n\r\n\tconst handleChange = useMemoizedFn((e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst checked = e.target.checked;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tvalue: checked,\r\n\t\t\tstatus,\r\n\t\t\tmessage,\r\n\t\t});\r\n\r\n\t\tonChange?.(checked, e);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<label\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-checkbox-item\",\r\n\t\t\t\t{\r\n\t\t\t\t\t[`i-checkbox-${state.status}`]: state.status !== \"normal\",\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\ttype='checkbox'\r\n\t\t\t\tname={name}\r\n\t\t\t\tclassName={classNames(\"i-checkbox-input\", {\r\n\t\t\t\t\t[`i-checkbox-${type}`]: !partof,\r\n\t\t\t\t\t\"i-checkbox-partof\": partof,\r\n\t\t\t\t})}\r\n\t\t\t\tchecked={state.value}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<span className='i-checkbox-text'>{children || label}</span>\r\n\r\n\t\t\t{state.message && (\r\n\t\t\t\t<span className='i-checkbox-message'>*{state.message}</span>\r\n\t\t\t)}\r\n\t\t</label>\r\n\t);\r\n}\r\n","import { formatOption } from \"@p/js/utils\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport \"./index.css\";\r\nimport CheckboxItem from \"./item\";\r\nimport type { ICheckbox } from \"./type\";\r\n\r\nfunction Checkbox(props: ICheckbox) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\toptions = [],\r\n\t\tvalue = \"\",\r\n\t\ttype = \"default\",\r\n\t\toptionInline = true,\r\n\t\tlabelInline,\r\n\t\tdisabled,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\trequired,\r\n\t\tclassName,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive<{\r\n\t\tvalue: any;\r\n\t}>({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst formattedOptions = useMemo(() => formatOption(options), [options]);\r\n\r\n\tconst handleChange = useMemoizedFn((checked, opt, e) => {\r\n\t\tconst group = [...state.value];\r\n\t\tconst i = group.findIndex((item) => item === opt.value);\r\n\r\n\t\tif (checked && i < 0) {\r\n\t\t\tgroup.push(opt.value);\r\n\t\t} else if (!checked && i > -1) {\r\n\t\t\tgroup.splice(i, 1);\r\n\t\t}\r\n\r\n\t\tstate.value = group;\r\n\t\tonChange?.(group, opt, e);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-checkbox i-input-label\",\r\n\t\t\t\t{\r\n\t\t\t\t\t[`i-checkbox-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t\t},\r\n\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{label && (\r\n\t\t\t\t<span className='i-input-label-text'>\r\n\t\t\t\t\t{required && <span className='error'>*</span>}\r\n\t\t\t\t\t{label}\r\n\r\n\t\t\t\t\t{message && <p className='i-checkbox-message'>{message}</p>}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-checkbox-options\", {\r\n\t\t\t\t\t\"i-options-block\": !optionInline,\r\n\t\t\t\t\t\"i-checkbox-options-button\": type === \"button\",\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{formattedOptions.map((option) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<CheckboxItem\r\n\t\t\t\t\t\t\tkey={option.value as string}\r\n\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\tvalue={state.value.includes(option.value)}\r\n\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\tdisabled={disabled || option.disabled}\r\n\t\t\t\t\t\t\tonChange={(checked, e) =>\r\n\t\t\t\t\t\t\t\thandleChange(checked, option, e)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t</CheckboxItem>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nCheckbox.Item = CheckboxItem;\r\n\r\nexport default Checkbox;\r\n","import { CloseRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport { uid } from \"radash\";\r\nimport { createElement } from \"react\";\r\nimport Icon from \"../../icon\";\r\nimport \"./index.css\";\r\nimport { IHelperIcon } from \"./type\";\r\n\r\nconst Helpericon = (props: IHelperIcon): JSX.Element => {\r\n\tconst {\r\n\t\tas = \"a\",\r\n\t\tactive,\r\n\t\tclassName,\r\n\t\ticon = <CloseRound />,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tif (!active) return <></>;\r\n\r\n\treturn createElement(\r\n\t\tas,\r\n\t\t{\r\n\t\t\tclassName: classNames(\"i-helpericon\", className),\r\n\t\t\t...restProps,\r\n\t\t},\r\n\t\t[\r\n\t\t\tcreateElement(Icon, {\r\n\t\t\t\tkey: uid(3),\r\n\t\t\t\ticon,\r\n\t\t\t}),\r\n\t\t]\r\n\t);\r\n};\r\n\r\nexport default Helpericon;\r\n","import { MinusRound, PlusRound } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { Children, useMemo } from \"react\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { ICollapse, ICollapseItem, TKey } from \"./type\";\r\n\r\nconst Collapse = (props: ICollapse): JSX.Element => {\r\n\tconst {\r\n\t\tactive,\r\n\t\titems,\r\n\t\tmultiple,\r\n\t\tborder,\r\n\t\theaderClickable,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\trenderToggle = (active: boolean) =>\r\n\t\t\tactive ? <MinusRound /> : <PlusRound />,\r\n\t\tonCollapse,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tactive,\r\n\t});\r\n\r\n\tconst collapses = useMemo(() => {\r\n\t\tif (!items) {\r\n\t\t\tif (!children) return [];\r\n\r\n\t\t\treturn (\r\n\t\t\t\tChildren.map(children, (node, i) => {\r\n\t\t\t\t\tconst { key, props: nodeProps } = node as {\r\n\t\t\t\t\t\tkey?: TKey;\r\n\t\t\t\t\t\tprops?: any;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst { title, children, content, disabled, ...restProps } =\r\n\t\t\t\t\t\tnodeProps;\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...restProps,\r\n\t\t\t\t\t\tkey: key || i,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tcontent: children || content,\r\n\t\t\t\t\t\tdisabled,\r\n\t\t\t\t\t};\r\n\t\t\t\t}) || []\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn items;\r\n\t}, [children]);\r\n\r\n\tconst handleHeaderClick = (item: ICollapseItem) => {\r\n\t\tif (!headerClickable) return;\r\n\r\n\t\thandleToggle(item);\r\n\t};\r\n\r\n\tconst handleToggle = (item: ICollapseItem) => {\r\n\t\tconst { key, disabled } = item;\r\n\t\tif (disabled) return;\r\n\r\n\t\tif (!multiple) {\r\n\t\t\tstate.active = state.active === key ? undefined : key;\r\n\t\t\tonCollapse?.(key as TKey, state.active !== undefined);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(state.active)) state.active = [];\r\n\r\n\t\tconst i = state.active.findIndex((k) => k === key);\r\n\r\n\t\tif (i > -1) {\r\n\t\t\tstate.active.splice(i, 1);\r\n\t\t} else {\r\n\t\t\tkey !== undefined && state.active.push(key);\r\n\t\t}\r\n\t\tonCollapse?.(key as TKey, i < 0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-collapse\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-collapse-bordered\": border,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{collapses.map((item) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tcontent,\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t\tclassName,\r\n\t\t\t\t\t...restProps\r\n\t\t\t\t} = item;\r\n\t\t\t\tconst isActive = multiple\r\n\t\t\t\t\t? ((state.active as TKey[]) || []).includes(key)\r\n\t\t\t\t\t: state.active === key;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\tclassName={classNames(\"i-collapse-item\", className, {\r\n\t\t\t\t\t\t\t\"i-collapse-active\": isActive,\r\n\t\t\t\t\t\t\t\"i-collapse-disabled\": disabled,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='i-collapse-header'\r\n\t\t\t\t\t\t\tonClick={() => handleHeaderClick(item)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{title}\r\n\r\n\t\t\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\tclassName='i-collapse-toggle'\r\n\t\t\t\t\t\t\t\ticon={renderToggle(isActive)}\r\n\t\t\t\t\t\t\t\tonClick={() => handleToggle(item)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='i-collapse-content'>{content}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCollapse.Item = Item;\r\n\r\nexport default Collapse;\r\n","import { InboxTwotone } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport \"./index.css\";\r\n\r\nexport default function Empty(props) {\r\n\tconst { className, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<InboxTwotone\r\n\t\t\tclassName={classNames(\"i-empty\", className)}\r\n\t\t\t{...restProps}\r\n\t\t/>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { ICell, IColumn } from \"./type\";\r\n\r\nexport function getCellStyle({\r\n\tjustify,\r\n\tcol,\r\n\trow,\r\n\tcolSpan = 1,\r\n\trowSpan = 1,\r\n}: Pick<IColumn, \"justify\" | \"fixed\"> & {\r\n\tcol: number;\r\n\trow: number;\r\n\tcolSpan?: number;\r\n\trowSpan?: number;\r\n\tisHeader?: boolean;\r\n}) {\r\n\tconst style = {\r\n\t\t\"--datagrid-justify\": justify,\r\n\t\tgridArea: `${row + 1} / ${col + 1} / ${row + 1 + rowSpan} / ${\r\n\t\t\tcol + 1 + colSpan\r\n\t\t}`,\r\n\t\tinsetInline: `var(--datagrid-cell-inset-${col})`,\r\n\t};\r\n\r\n\treturn style;\r\n}\r\n\r\nexport function Cell(props: ICell) {\r\n\tconst { column, row, col, data, onCellClick, onCellDoubleClick } = props;\r\n\tconst { id, fixed, justify, rowSpan, render } = column;\r\n\tconst style = getCellStyle({ justify, fixed, col, row, rowSpan });\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-datagrid-cell\", {\r\n\t\t\t\t[`i-datagrid-cell-fixed-${fixed}`]: fixed,\r\n\t\t\t})}\r\n\t\t\tdata-col={id}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={(e) => onCellClick?.(data, column, row, col, e)}\r\n\t\t\tonDoubleClick={(e) =>\r\n\t\t\t\tonCellDoubleClick?.(data, column, row, col, e)\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{render?.(data[id], data, col) ?? (\r\n\t\t\t\t<div className='i-datagrid-cell-content'>{data[id]}</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { ICollapseItem } from \"./type\";\r\n\r\nexport default function Item(props: ICollapseItem) {\r\n\treturn <></>;\r\n}\r\n","import { useEffect } from \"react\";\r\n\r\ntype TMouseEvent = (e: MouseEvent) => void;\r\n\r\nconst MouseMoveEvents = new Set<TMouseEvent>();\r\nconst MouseUpEvents = new Set<TMouseEvent>();\r\n\r\ndocument.addEventListener(\"mousemove\", (e: MouseEvent) => {\r\n\tfor (const listener of MouseMoveEvents.values()) {\r\n\t\tlistener(e);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener(\"mouseup\", (e) => {\r\n\tfor (const listener of MouseUpEvents.values()) {\r\n\t\tlistener(e);\r\n\t}\r\n});\r\n\r\nexport function useMouseMove(listener: TMouseEvent) {\r\n\tuseEffect(() => {\r\n\t\tMouseMoveEvents.add(listener);\r\n\t\treturn () => {\r\n\t\t\tMouseMoveEvents.delete(listener);\r\n\t\t};\r\n\t}, [listener]);\r\n}\r\n\r\nexport function useMouseUp(listener: TMouseEvent) {\r\n\tuseEffect(() => {\r\n\t\tMouseUpEvents.add(listener);\r\n\t\treturn () => {\r\n\t\t\tMouseUpEvents.delete(listener);\r\n\t\t};\r\n\t}, [listener]);\r\n}\r\n\r\nexport function useIntersectionObserver(configs?: IntersectionObserverInit) {\r\n\tconst WM = new WeakMap();\r\n\tconst IO = new IntersectionObserver((entries) => {\r\n\t\tentries.map((entry) => {\r\n\t\t\tconst callback = WM.get(entry.target);\r\n\r\n\t\t\tcallback?.(entry.target, entry.isIntersecting);\r\n\t\t});\r\n\t}, configs);\r\n\r\n\tfunction observe(target: HTMLElement, callback: Function) {\r\n\t\tif (WM.get(target)) return;\r\n\r\n\t\tWM.set(target, callback);\r\n\t\ttarget && IO.observe(target);\r\n\t}\r\n\r\n\tfunction unobserve(target: HTMLElement) {\r\n\t\ttarget && IO.unobserve(target);\r\n\t\tWM.delete(target);\r\n\t}\r\n\r\n\tfunction disconnect() {\r\n\t\tIO.disconnect();\r\n\t}\r\n\r\n\treturn {\r\n\t\tobserve,\r\n\t\tunobserve,\r\n\t\tdisconnect,\r\n\t};\r\n}\r\n\r\nexport function useResizeObserver() {\r\n\tconst WM = new WeakMap();\r\n\tconst IO = new ResizeObserver((entries) => {\r\n\t\tentries.map((entry) => {\r\n\t\t\tconst callback = WM.get(entry.target);\r\n\r\n\t\t\tcallback?.(entry.target);\r\n\t\t});\r\n\t});\r\n\r\n\tfunction observe(target: HTMLElement, callback: Function) {\r\n\t\tif (WM.get(target)) return;\r\n\r\n\t\ttarget && IO.observe(target);\r\n\t\tWM.set(target, callback);\r\n\t}\r\n\r\n\tfunction unobserve(target: HTMLElement) {\r\n\t\ttarget && IO.unobserve(target);\r\n\t\tWM.delete(target);\r\n\t}\r\n\r\n\tfunction disconnect() {\r\n\t\tIO.disconnect();\r\n\t}\r\n\r\n\treturn {\r\n\t\tobserve,\r\n\t\tunobserve,\r\n\t\tdisconnect,\r\n\t};\r\n}\r\n","import { useMouseMove, useMouseUp } from \"@p/js/hooks\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport { MouseEvent } from \"react\";\r\n\r\nexport default function Resize(props) {\r\n\tconst { index, onWidthChange } = props;\r\n\tconst state = useReactive({\r\n\t\tresizing: false,\r\n\t\tx: 0,\r\n\t\twidth: 0,\r\n\t});\r\n\r\n\tconst handleMouseDown = useMemoizedFn((e: MouseEvent) => {\r\n\t\tconst tar = e.target as HTMLElement;\r\n\t\tconst width = (tar.offsetParent as HTMLElement).offsetWidth;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tx: e.pageX,\r\n\t\t\tresizing: true,\r\n\t\t\twidth,\r\n\t\t});\r\n\t});\r\n\r\n\tconst handleMouseMove = useMemoizedFn((e: any) => {\r\n\t\tif (!state.resizing) return;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tconst after = state.width + e.pageX - state.x;\r\n\t\tif (after <= 24) return;\r\n\r\n\t\tonWidthChange(index, after);\r\n\t});\r\n\r\n\tconst handleMouseUp = () => {\r\n\t\tif (!state.resizing) return;\r\n\r\n\t\tstate.resizing = false;\r\n\t};\r\n\r\n\tuseMouseMove(handleMouseMove);\r\n\tuseMouseUp(handleMouseUp);\r\n\r\n\treturn (\r\n\t\t<i\r\n\t\t\tclassName='i-datagrid-resizor'\r\n\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t/>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\n\r\nconst Arrow = (props) => (\r\n\t<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' {...props}>\r\n\t\t<g fill='none'>\r\n\t\t\t<path\r\n\t\t\t\td='M9 17.898c0 1.074 1.265 1.648 2.073.941l6.31-5.522a1.75 1.75 0 0 0 0-2.634l-6.31-5.522C10.265 4.454 9 5.028 9 6.102v11.796z'\r\n\t\t\t\tfill='currentColor'\r\n\t\t\t></path>\r\n\t\t</g>\r\n\t</svg>\r\n);\r\n\r\nexport default function Sorter(props) {\r\n\tconst { type } = props;\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\tclassName={classNames(\"i-datagrid-sorter\", {\r\n\t\t\t\t[`i-datagrid-sorter-${type}`]: type,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t<Arrow className='i-datagrid-sorter-caret' />\r\n\t\t\t<Arrow className='i-datagrid-sorter-caret' />\r\n\t\t</a>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { Cell, getCellStyle } from \"./cell\";\r\nimport Resize from \"./resize\";\r\nimport Sorter from \"./sorter\";\r\nimport { IHeader, IRow } from \"./type\";\r\n\r\nexport default function Row(props: IRow) {\r\n\tconst { row, data, columns, onRowClick, onCellClick, onCellDoubleClick } =\r\n\t\tprops;\r\n\r\n\treturn (\r\n\t\t<div className='i-datagrid-row' onClick={() => onRowClick?.(data, row)}>\r\n\t\t\t{columns.map((col, i) => (\r\n\t\t\t\t<Cell\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tcolumn={col}\r\n\t\t\t\t\tcol={i}\r\n\t\t\t\t\trow={row}\r\n\t\t\t\t\tdata={data}\r\n\t\t\t\t\tonCellClick={onCellClick}\r\n\t\t\t\t\tonCellDoubleClick={onCellDoubleClick}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function Header(props: IHeader) {\r\n\tconst {\r\n\t\tcolumns,\r\n\t\tresizable,\r\n\t\tsortBy,\r\n\t\tsortType,\r\n\t\tonWidthChange,\r\n\t\tonHeaderClick,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div className='i-datagrid-header i-datagrid-row'>\r\n\t\t\t{columns.map((column, col) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tfixed,\r\n\t\t\t\t\tcolSpan,\r\n\t\t\t\t\tsorter,\r\n\t\t\t\t\tjustify,\r\n\t\t\t\t\trenderHeader,\r\n\t\t\t\t} = column;\r\n\t\t\t\tconst style = getCellStyle({\r\n\t\t\t\t\tjustify,\r\n\t\t\t\t\trow: 0,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t\tcolSpan,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst order = sortBy === id ? sortType : \"\";\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={col}\r\n\t\t\t\t\t\tdata-col={id}\r\n\t\t\t\t\t\tclassName={classNames(\"i-datagrid-cell\", {\r\n\t\t\t\t\t\t\t\"i-datagrid-has-sorter\": sorter,\r\n\t\t\t\t\t\t\t\"i-datagrid-cell-fixed\": fixed,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tstyle={{ ...style, insetBlockStart: 0 }}\r\n\t\t\t\t\t\tonClick={(e) => onHeaderClick?.(column, e)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{renderHeader?.(column, col) ?? (\r\n\t\t\t\t\t\t\t<div className='i-datagrid-cell-content'>\r\n\t\t\t\t\t\t\t\t{title || id}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{sorter && <Sorter type={order} />}\r\n\r\n\t\t\t\t\t\t{resizable && (\r\n\t\t\t\t\t\t\t<Resize index={col} onWidthChange={onWidthChange} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { getNextSorter } from \"@p/js/utils\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tCSSProperties,\r\n\tMouseEvent,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport ScrollContainer, { Scrollbars } from \"react-custom-scrollbars-2\";\r\nimport Loading from \"../loading\";\r\nimport Empty from \"../utils/empty\";\r\nimport \"./index.css\";\r\nimport Row, { Header } from \"./row\";\r\nimport type { IColumn, IData, IDatagrid, TDatagridState } from \"./type\";\r\n\r\nconst Datagrid = (props: IDatagrid): JSX.Element => {\r\n\tconst {\r\n\t\tdata = [],\r\n\t\tcolumns = [],\r\n\t\tborder,\r\n\t\tstriped,\r\n\t\theader = true,\r\n\t\tresizable,\r\n\t\tcellPadding = \".5em\",\r\n\t\tempty = <Empty />,\r\n\t\tloading,\r\n\t\theight = \"unset\",\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\trenderLoading = () => <Loading size='1.5em' className='color-3' />,\r\n\t\tonCellClick,\r\n\t\tonRowClick,\r\n\t\tonHeaderClick,\r\n\t\tonSort,\r\n\t\tonScroll,\r\n\t\tonResize,\r\n\t} = props;\r\n\r\n\tconst container = useRef<HTMLDivElement>(null);\r\n\tconst scrollbar = useRef<Scrollbars>(null);\r\n\tconst state = useReactive<TDatagridState>({\r\n\t\trows: data,\r\n\t\twidths: columns.map((col) => col.width ?? \"auto\"),\r\n\t\tsortBy: \"\",\r\n\t\tsortType: \"\",\r\n\t});\r\n\r\n\tconst styles = useMemo(() => {\r\n\t\tconst { widths } = state;\r\n\r\n\t\tconst o = {\r\n\t\t\t...style,\r\n\t\t\t\"--grid-template-columns\": widths\r\n\t\t\t\t.map((w) => {\r\n\t\t\t\t\treturn typeof w === \"number\" ? `${w}px` : w;\r\n\t\t\t\t})\r\n\t\t\t\t.join(\" \"),\r\n\t\t};\r\n\r\n\t\tif (!resizable) return o;\r\n\r\n\t\tconst fws = columns.map((col, i) => {\r\n\t\t\tconst { fixed } = col;\r\n\t\t\tif (!fixed) return 0;\r\n\t\t\treturn widths[i] as number;\r\n\t\t});\r\n\r\n\t\tcolumns.map((col, i) => {\r\n\t\t\tconst { fixed } = col;\r\n\t\t\tif (!fixed) return;\r\n\t\t\tif (i === 0) {\r\n\t\t\t\to[`--datagrid-cell-inset-0`] = 0;\r\n\t\t\t} else if (i === fws.length - 1) {\r\n\t\t\t\to[`--datagrid-cell-inset-${fws.length - 1}`] = \"auto 0\";\r\n\t\t\t} else {\r\n\t\t\t\tconst isLeft = fixed === \"left\";\r\n\t\t\t\tconst before = isLeft ? fws.slice(0, i) : fws.slice(i + 1);\r\n\t\t\t\tconst sum = before.reduce((pre, cur) => pre + cur) + \"px\";\r\n\t\t\t\tconst result = isLeft ? `${sum} auto` : `auto ${sum}`;\r\n\t\t\t\to[`--datagrid-cell-inset-${i}`] = result;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn o;\r\n\t}, [state.widths, resizable]);\r\n\r\n\tconst handleWidthChange = useCallback(\r\n\t\t(i: number, w: number) => {\r\n\t\t\tif (!resizable) return;\r\n\r\n\t\t\tconst [...ws] = state.widths;\r\n\t\t\tws[i] = w;\r\n\t\t\tstate.widths = ws;\r\n\t\t\tonResize?.(columns[i], w);\r\n\t\t},\r\n\t\t[resizable]\r\n\t);\r\n\r\n\tconst handleHeaderClick = useCallback(\r\n\t\t(column?: IColumn, e?: MouseEvent) => {\r\n\t\t\tif (column?.sorter) {\r\n\t\t\t\tconst [sortBy, sortType] = getNextSorter(\r\n\t\t\t\t\tstate.sortBy,\r\n\t\t\t\t\tstate.sortType,\r\n\t\t\t\t\tcolumn.id\r\n\t\t\t\t);\r\n\r\n\t\t\t\tObject.assign(state, {\r\n\t\t\t\t\tsortBy,\r\n\t\t\t\t\tsortType,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tonSort?.(sortBy, sortType);\r\n\t\t\t}\r\n\r\n\t\t\tonHeaderClick?.(column, e);\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst rows = useMemo(() => {\r\n\t\tconst { sortBy, sortType } = state;\r\n\r\n\t\tif (sortBy && !onSort) {\r\n\t\t\tconst sorter = columns.find((col) => col.id === sortBy)?.sorter;\r\n\t\t\tconst sortFn =\r\n\t\t\t\ttypeof sorter === \"function\"\r\n\t\t\t\t\t? sorter\r\n\t\t\t\t\t: (a: IData, b: IData) => b[sortBy] - a[sortBy];\r\n\t\t\tconst sorted = [...data].sort(sortFn);\r\n\r\n\t\t\treturn sortType === \"desc\" ? sorted : sorted.reverse();\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}, [data, columns, state.sortBy, state.sortType]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!container.current) return;\r\n\t\tconst { current: div } = container;\r\n\t\tconst tds = div.querySelector(\".i-datagrid-row\")?.children;\r\n\t\tif (!tds?.length) return;\r\n\r\n\t\tstate.widths = Array.from(tds).map((node: any) => node.offsetWidth);\r\n\t}, [columns, resizable]);\r\n\r\n\tuseEffect(() => {\r\n\t\tloading && scrollbar.current?.scrollTop(0);\r\n\t}, [loading]);\r\n\r\n\tconst scrollBarStyle = {\r\n\t\t\"--padding\": cellPadding,\r\n\t\t...styles,\r\n\t} as CSSProperties;\r\n\r\n\treturn (\r\n\t\t<ScrollContainer\r\n\t\t\tref={scrollbar}\r\n\t\t\tautoHide\r\n\t\t\tautoHeight\r\n\t\t\tautoHeightMax={height}\r\n\t\t\tstyle={scrollBarStyle}\r\n\t\t\tclassName={classNames(\"i-datagrid-container\", className, {\r\n\t\t\t\t\"i-datagrid-bordered\": border,\r\n\t\t\t\t\"i-datagrid-striped\": striped,\r\n\t\t\t})}\r\n\t\t\trenderView={(props) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tclassName={classNames({ \"i-datagrid-loading\": loading })}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\tonScroll={onScroll}\r\n\t\t>\r\n\t\t\t<div ref={container} className='i-datagrid'>\r\n\t\t\t\t{header && (\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tresizable={resizable}\r\n\t\t\t\t\t\tsortType={state.sortType}\r\n\t\t\t\t\t\tsortBy={state.sortBy}\r\n\t\t\t\t\t\tonWidthChange={handleWidthChange}\r\n\t\t\t\t\t\tonHeaderClick={handleHeaderClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{rows.map((row, i) => (\r\n\t\t\t\t\t<Row\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\trow={i + (header ? 1 : 0)}\r\n\t\t\t\t\t\tdata={row}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tonCellClick={onCellClick}\r\n\t\t\t\t\t\tonRowClick={onRowClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t{rows.length < 1 && empty}\r\n\t\t\t</div>\r\n\r\n\t\t\t{loading && renderLoading()}\r\n\t\t</ScrollContainer>\r\n\t);\r\n};\r\n\r\nexport default Datagrid;\r\n","import classNames from \"classnames\";\r\nimport { IInputContainer } from \"./type\";\r\n\r\nexport default function InputContainer(props: IInputContainer) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tclassName,\r\n\t\tlabelInline,\r\n\t\tstyle,\r\n\t\tchildren,\r\n\t\tstatus,\r\n\t\ttip,\r\n\t\trequired,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<label\r\n\t\t\tclassName={classNames(\"i-input-label\", className, {\r\n\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{label && (\r\n\t\t\t\t<span className='i-input-label-text'>\r\n\t\t\t\t\t{required && <span className='error'>*</span>}\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\r\n\t\t\t{children}\r\n\r\n\t\t\t{tip && (\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName={classNames(\"i-input-message\", {\r\n\t\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t})}\r\n\t\t\t\t>\r\n\t\t\t\t\t{tip}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\t\t</label>\r\n\t);\r\n}\r\n","import { clamp, formatNumber } from \"@p/js/utils\";\r\nimport { MinusRound, PlusRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { ChangeEvent, forwardRef, useCallback, useEffect } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport InputContainer from \"./container\";\r\nimport \"./index.css\";\r\nimport type { IInputNumber } from \"./type\";\r\n\r\nconst Number = forwardRef<HTMLInputElement, IInputNumber>((props, ref) => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue,\r\n\t\tlabelInline,\r\n\t\tstep = 1,\r\n\t\tmin = -Infinity,\r\n\t\tmax = Infinity,\r\n\t\tthousand,\r\n\t\tprecision,\r\n\t\ttype,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tappend,\r\n\t\tborder,\r\n\t\tprepend,\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\thideControl,\r\n\t\tstyle,\r\n\t\tonChange,\r\n\t\tonEnter,\r\n\t\tonInput,\r\n\t\tonBlur,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst getRangeNumber = useCallback(\r\n\t\t(v: number) => clamp(v, min, max),\r\n\t\t[min, max]\r\n\t);\r\n\r\n\tconst getFormatNumber = useCallback(\r\n\t\t(v: number) => formatNumber(v, { precision, thousand }),\r\n\t\t[precision, thousand]\r\n\t);\r\n\r\n\tconst formatInputValue = useCallback(\r\n\t\t(v?: string | number) => {\r\n\t\t\tif (!v) return \"\";\r\n\t\t\tif (typeof v === \"number\" || !thousand) return v;\r\n\r\n\t\t\treturn v.replaceAll(thousand, \"\");\r\n\t\t},\r\n\t\t[thousand]\r\n\t);\r\n\r\n\tconst handleChange = useMemoizedFn((e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst { value } = e.target;\r\n\t\tconst v = formatInputValue(value.replace(/[^\\d\\.-]/g, \"\"));\r\n\r\n\t\tstate.value = v;\r\n\t\tonChange?.(+v, e);\r\n\t});\r\n\r\n\tconst handleOperate = useMemoizedFn((param: number) => {\r\n\t\tconst value = formatInputValue(state.value) ?? 0;\r\n\t\tconst result = getRangeNumber(+value + param);\r\n\r\n\t\tstate.value = getFormatNumber(result);\r\n\r\n\t\tonChange?.(result);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tref,\r\n\t\tname,\r\n\t\tvalue: state.value,\r\n\t\tclassName: \"i-input i-input-number\",\r\n\t\tonChange: handleChange,\r\n\t\t...rest,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend && <div className='i-input-prepend'>{prepend}</div>}\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<MinusRound />}\r\n\t\t\t\t\t\tonClick={() => handleOperate(-step)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<input {...inputProps} />\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<PlusRound />}\r\n\t\t\t\t\t\tonClick={() => handleOperate(step)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{append && <div className='i-input-append'>{append}</div>}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n});\r\n\r\nexport default Number;\r\n","import { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tChangeEvent,\r\n\tKeyboardEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseRef,\r\n} from \"react\";\r\nimport \"../../css/input.css\";\r\nimport InputContainer from \"./container\";\r\nimport \"./index.css\";\r\nimport type { ITextarea } from \"./type\";\r\n\r\nconst Textarea = forwardRef<HTMLTextAreaElement, ITextarea>((props, ref) => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue,\r\n\t\tlabelInline,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\tautoSize,\r\n\t\tborder,\r\n\t\tstyle,\r\n\t\tonChange,\r\n\t\tonEnter,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\tconst refTextarea = useRef<HTMLDivElement>(null);\r\n\r\n\tconst handleChange = useCallback(\r\n\t\t(e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n\t\t\tconst v = e.target.value;\r\n\r\n\t\t\tstate.value = v;\r\n\r\n\t\t\tconst ta = refTextarea.current?.firstChild as HTMLElement;\r\n\t\t\tif (autoSize && ta) {\r\n\t\t\t\t// ta.style.height = \"inherit\";\r\n\t\t\t\tta.style.height = `${ta.scrollHeight}px`;\r\n\t\t\t}\r\n\r\n\t\t\tonChange?.(v, e);\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst handleKeydown = useMemoizedFn((e: KeyboardEvent<HTMLElement>) => {\r\n\t\te.code === \"Enter\" && onEnter?.();\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tref,\r\n\t\tname,\r\n\t\tvalue: state.value,\r\n\t\tclassName: \"i-input i-textarea\",\r\n\t\tonChange: handleChange,\r\n\t\tonKeyDown: handleKeydown,\r\n\t\t...restProps,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tref={refTextarea}\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<textarea {...inputProps} />\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n});\r\n\r\nexport default Textarea;\r\n","import { VisibilityOffRound, VisibilityRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tChangeEvent,\r\n\tKeyboardEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n} from \"react\";\r\nimport \"../../css/input.css\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport InputContainer from \"./container\";\r\nimport \"./index.css\";\r\nimport Number from \"./number\";\r\nimport Range from \"./range\";\r\nimport Textarea from \"./textarea\";\r\nimport type { CompositionInput, IInput } from \"./type\";\r\n\r\nconst Input = forwardRef<HTMLInputElement, IInput>((props, ref) => {\r\n\tconst {\r\n\t\ttype = \"text\",\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue = \"\",\r\n\t\tprepend,\r\n\t\tappend,\r\n\t\tlabelInline,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\tclear,\r\n\t\thideVisible,\r\n\t\tborder,\r\n\t\trequired,\r\n\t\tonChange,\r\n\t\tonEnter,\r\n\t\tstyle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t\ttype,\r\n\t\tvisible: false,\r\n\t});\r\n\r\n\tconst handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst v = e.target.value;\r\n\r\n\t\tstate.value = v;\r\n\t\tonChange?.(v, e);\r\n\t}, []);\r\n\r\n\tconst handleKeydown = useMemoizedFn((e: KeyboardEvent<HTMLElement>) => {\r\n\t\te.code === \"Enter\" && onEnter?.();\r\n\t});\r\n\r\n\tconst handleHelperClick = () => {\r\n\t\tif (type === \"password\" && !hideVisible) {\r\n\t\t\tObject.assign(state, {\r\n\t\t\t\tvisible: !state.visible,\r\n\t\t\t\ttype: !state.visible ? \"text\" : \"password\",\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst v = \"\";\r\n\t\tonChange?.(v);\r\n\t};\r\n\r\n\tconst HelperIcon = useMemo(() => {\r\n\t\tif (type === \"password\") {\r\n\t\t\treturn state.visible ? <VisibilityRound /> : <VisibilityOffRound />;\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}, [state.visible]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tref,\r\n\t\ttype: state.type,\r\n\t\tname,\r\n\t\tvalue: state.value,\r\n\t\tclassName: classNames(\"i-input\", `i-input-${type}`),\r\n\t\tonChange: handleChange,\r\n\t\tonKeyDown: handleKeydown,\r\n\t\t...restProps,\r\n\t};\r\n\r\n\tconst clearable = clear && state.value;\r\n\tconst showHelper = type === \"password\" && !!state.value;\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t\trequired={required}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend && <div className='i-input-prepend'>{prepend}</div>}\r\n\r\n\t\t\t\t<input {...inputProps} />\r\n\r\n\t\t\t\t<Helpericon\r\n\t\t\t\t\tactive={!!clearable || showHelper}\r\n\t\t\t\t\ticon={HelperIcon}\r\n\t\t\t\t\tonClick={handleHelperClick}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{append && <div className='i-input-append'>{append}</div>}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n}) as CompositionInput;\r\n\r\nInput.Textarea = Textarea;\r\nInput.Number = Number;\r\nInput.Range = Range;\r\n\r\nexport default Input;\r\n","import { clamp, formatNumber } from \"@p/js/utils\";\r\nimport { MinusRound, PlusRound, SyncAltRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { ChangeEvent, MouseEvent, useCallback, useEffect } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport InputContainer from \"./container\";\r\nimport \"./index.css\";\r\nimport type { IInputRange } from \"./type\";\r\n\r\nconst Range = (props: IInputRange) => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue,\r\n\t\tlabelInline,\r\n\t\tmin = -Infinity,\r\n\t\tmax = Infinity,\r\n\t\ttype,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\tappend,\r\n\t\tprepend,\r\n\t\tstep = 1,\r\n\t\tthousand,\r\n\t\tprecision,\r\n\t\thideControl,\r\n\t\tplaceholder,\r\n\t\tborder,\r\n\t\tonChange,\r\n\t\tonBlur,\r\n\t\tstyle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst getRangeNumber = useCallback(\r\n\t\t(v: number) => clamp(v, min, max),\r\n\t\t[min, max]\r\n\t);\r\n\r\n\tconst getFormatNumber = useCallback(\r\n\t\t(v: number) => formatNumber(v, { precision, thousand }),\r\n\t\t[precision, thousand]\r\n\t);\r\n\r\n\tconst formatInputValue = useCallback(\r\n\t\t(v?: string | number) => {\r\n\t\t\tif (!v) return \"\";\r\n\t\t\tif (typeof v === \"number\" || !thousand) return v;\r\n\r\n\t\t\treturn v.replaceAll(thousand, \"\");\r\n\t\t},\r\n\t\t[thousand]\r\n\t);\r\n\r\n\tconst handleChange = useMemoizedFn(\r\n\t\t(e: ChangeEvent<HTMLInputElement>, i: number) => {\r\n\t\t\tconst { value } = e.target;\r\n\t\t\tconst v = formatInputValue(value.replace(/[^\\d\\.-]/g, \"\"));\r\n\r\n\t\t\tconst range = Array.isArray(state.value) ? state.value : [];\r\n\t\t\trange[i] = +v;\r\n\r\n\t\t\tstate.value = range;\r\n\t\t\tonChange?.(range, e);\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleOperate = useMemoizedFn(\r\n\t\t(e: MouseEvent<Element>, param: number, i: number) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tconst range = Array.isArray(state.value) ? state.value : [];\r\n\t\t\tconst value = formatInputValue(range[i]) ?? 0;\r\n\t\t\tconst result = getRangeNumber(+value + param);\r\n\r\n\t\t\trange[i] = getFormatNumber(result);\r\n\r\n\t\t\tstate.value = range;\r\n\t\t\tonChange?.(range, e);\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleSwitch = useMemoizedFn((e: MouseEvent) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tconst range = state.value ?? [];\r\n\t\tconst v = range[0];\r\n\t\trange[0] = range[1];\r\n\t\trange[1] = v;\r\n\r\n\t\tstate.value = range;\r\n\t\tonChange?.(range);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tname,\r\n\t\tclassName: \"i-input i-input-number\",\r\n\t\t...restProps,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend && <div className='i-input-prepend'>{prepend}</div>}\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<MinusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, -step, 0)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tvalue={state.value?.[0] || \"\"}\r\n\t\t\t\t\tplaceholder={placeholder?.[0]}\r\n\t\t\t\t\t{...inputProps}\r\n\t\t\t\t\tonChange={(e) => handleChange(e, 0)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<PlusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, step, 0)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t<Helpericon\r\n\t\t\t\t\tactive\r\n\t\t\t\t\ticon={<SyncAltRound />}\r\n\t\t\t\t\tstyle={{ margin: 0 }}\r\n\t\t\t\t\tonClick={handleSwitch}\r\n\t\t\t\t/>\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<MinusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, -step, 1)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tvalue={state.value?.[1] || \"\"}\r\n\t\t\t\t\tplaceholder={placeholder?.[1]}\r\n\t\t\t\t\t{...inputProps}\r\n\t\t\t\t\tonChange={(e) => handleChange(e, 1)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<PlusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, step, 1)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{append && <div className='i-input-append'>{append}</div>}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n};\r\n\r\nexport default Range;\r\n","import classNames from \"classnames\";\r\nimport { forwardRef, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { IPopupContent } from \"./type\";\r\n\r\nconst Content = forwardRef<HTMLDivElement, IPopupContent>((props, ref) => {\r\n\tconst {\r\n\t\tgetContainer = (trigger) => trigger?.offsetParent ?? document.body,\r\n\t\ttrigger,\r\n\t\tarrow,\r\n\t\tarrowProps = {},\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst arrowCSS = useMemo(() => {\r\n\t\tlet { left, top, pos } = arrowProps;\r\n\t\tlet transform = \"\";\r\n\r\n\t\tswitch (pos) {\r\n\t\t\tcase \"left\":\r\n\t\t\t\tleft += 2;\r\n\t\t\t\ttransform = `translate(-100%, -50%) rotate(180deg)`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"right\":\r\n\t\t\t\tleft -= 2;\r\n\t\t\t\ttransform = `translate(0, -50%)`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"top\":\r\n\t\t\t\ttop -= 2;\r\n\t\t\t\ttransform = `translate(-50%, -50%) rotate(-90deg)`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bottom\":\r\n\t\t\t\ttop += 2;\r\n\t\t\t\ttransform = `translate(-50%, -50%) rotate(90deg)`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\ttransform,\r\n\t\t};\r\n\t}, [arrowProps]);\r\n\r\n\tconst content = (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classNames(\"i-popup\", className)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{arrow && (\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tclassName='i-popup-arrow'\r\n\t\t\t\t\tstyle={arrowCSS}\r\n\t\t\t\t>\r\n\t\t\t\t\t<path d='M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z'></path>\r\n\t\t\t\t\t{/* <path d='M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z'></path> */}\r\n\t\t\t\t</svg>\r\n\t\t\t)}\r\n\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn createPortal(content, getContainer(trigger));\r\n});\r\n\r\nexport default Content;\r\n","import { useResizeObserver } from \"@p/js/hooks\";\r\nimport { getPointPosition, getPosition } from \"@p/js/utils\";\r\nimport { useClickAway, useCreation, useReactive } from \"ahooks\";\r\nimport {\r\n\tCSSProperties,\r\n\tChildren,\r\n\tMouseEvent,\r\n\tcloneElement,\r\n\tisValidElement,\r\n\tuseEffect,\r\n\tuseLayoutEffect,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Content from \"./content\";\r\nimport \"./index.css\";\r\nimport { IPopup } from \"./type\";\r\n\r\nexport default function Popup(props: IPopup) {\r\n\tconst {\r\n\t\tvisible = false,\r\n\t\tcontent,\r\n\t\ttrigger = \"hover\",\r\n\t\tgap = 12,\r\n\t\toffset = 8,\r\n\t\tfixed,\r\n\t\tposition = \"top\",\r\n\t\tshowDelay = 16,\r\n\t\thideDelay = 12,\r\n\t\ttouchable,\r\n\t\tarrow = true,\r\n\t\talign,\r\n\t\tfitSize,\r\n\t\twatchResize,\r\n\t\tclickOutside = true,\r\n\t\tdisabled,\r\n\t\treferToWindow,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tgetContainer,\r\n\t\tchildren,\r\n\t\tonVisibleChange,\r\n\t} = props;\r\n\r\n\tconst triggerRef = useRef<HTMLElement>(null);\r\n\tconst contentRef = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive<{\r\n\t\tshow: boolean;\r\n\t\ttoggling: any;\r\n\t\tstyle: CSSProperties;\r\n\t\tarrowProps: Record<string, any>;\r\n\t}>({\r\n\t\tshow: false,\r\n\t\ttoggling: false,\r\n\t\tstyle: { position: fixed ? \"fixed\" : \"absolute\" },\r\n\t\tarrowProps: {},\r\n\t});\r\n\r\n\tuseClickAway((e: Event) => {\r\n\t\tif (!clickOutside) return;\r\n\r\n\t\tconst tar = e.target as HTMLElement;\r\n\t\tconst isContain = triggerRef.current?.contains(tar);\r\n\r\n\t\tif (!state.show) return;\r\n\r\n\t\t(!isContain || trigger === \"contextmenu\") && handleToggle(false);\r\n\t}, contentRef);\r\n\r\n\tconst handleShow = () => {\r\n\t\tif (disabled) return;\r\n\t\tif (\r\n\t\t\tstate.show &&\r\n\t\t\t(trigger !== \"hover\" || (trigger === \"hover\" && !touchable))\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.show = true;\r\n\r\n\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\tstate.toggling = setTimeout(() => {\r\n\t\t\tconst [left, top, { arrowX, arrowY, arrowPos }] = getPosition(\r\n\t\t\t\ttriggerRef.current,\r\n\t\t\t\tcontentRef.current,\r\n\t\t\t\t{\r\n\t\t\t\t\tposition,\r\n\t\t\t\t\tgap,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\talign,\r\n\t\t\t\t\trefWindow: referToWindow,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tstate.style = {\r\n\t\t\t\t...state.style,\r\n\t\t\t\topacity: 1,\r\n\t\t\t\ttransform: \"none\",\r\n\t\t\t\tleft,\r\n\t\t\t\ttop,\r\n\t\t\t};\r\n\t\t\tstate.arrowProps = {\r\n\t\t\t\tleft: arrowX,\r\n\t\t\t\ttop: arrowY,\r\n\t\t\t\tpos: arrowPos,\r\n\t\t\t};\r\n\t\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\t\tonVisibleChange?.(true);\r\n\t\t}, showDelay);\r\n\t};\r\n\r\n\tconst handleHide = () => {\r\n\t\tif (!state.show) return;\r\n\t\tstate.toggling = setTimeout(() => {\r\n\t\t\tstate.style = {\r\n\t\t\t\t...state.style,\r\n\t\t\t\topacity: 0,\r\n\t\t\t\ttransform: \"translate(0, 2px)\",\r\n\t\t\t};\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.show = false;\r\n\t\t\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\t\t\tonVisibleChange?.(false);\r\n\t\t\t}, 160);\r\n\t\t}, hideDelay);\r\n\t};\r\n\r\n\tconst handleToggle = (action?: boolean) => {\r\n\t\tif (action !== undefined) {\r\n\t\t\taction ? handleShow() : handleHide();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.show ? handleHide() : handleShow();\r\n\t};\r\n\tconst eventMaps = useCreation(\r\n\t\t() => ({\r\n\t\t\tclick: {\r\n\t\t\t\tonClick: () => handleToggle(true),\r\n\t\t\t},\r\n\t\t\thover: {\r\n\t\t\t\tonMouseEnter: () => handleToggle(true),\r\n\t\t\t\tonMouseLeave: () => handleToggle(false),\r\n\t\t\t},\r\n\t\t\tfocus: {\r\n\t\t\t\tonFocus: () => handleToggle(true),\r\n\t\t\t\tonBlur: () => handleToggle(false),\r\n\t\t\t},\r\n\t\t\tcontextmenu: {\r\n\t\t\t\tonContextMenu: (e: MouseEvent) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\t\tif (state.show) {\r\n\t\t\t\t\t\tconst [left, top] = getPointPosition(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\tcontentRef.current as HTMLElement\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstate.style = {\r\n\t\t\t\t\t\t\t...state.style,\r\n\t\t\t\t\t\t\tleft,\r\n\t\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tstate.show = true;\r\n\r\n\t\t\t\t\tstate.toggling = setTimeout(() => {\r\n\t\t\t\t\t\tconst [left, top] = getPointPosition(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\tcontentRef.current as HTMLElement\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tstate.style = {\r\n\t\t\t\t\t\t\t...state.style,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\ttransform: \"none\",\r\n\t\t\t\t\t\t\tleft,\r\n\t\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\t\t\t\t\tonVisibleChange?.(true);\r\n\t\t\t\t\t}, showDelay);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnone: {},\r\n\t\t}),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst contentTouch = useMemo(() => {\r\n\t\tif (!touchable) return {};\r\n\t\tconst events: { [key: string]: () => void } = {};\r\n\r\n\t\tif (trigger === \"hover\") {\r\n\t\t\tevents[\"onMouseEnter\"] = () => handleToggle(true);\r\n\t\t\tevents[\"onMouseLeave\"] = () => handleToggle(false);\r\n\t\t}\r\n\r\n\t\treturn events;\r\n\t}, [touchable, trigger]);\r\n\r\n\tconst computePosition = () => {\r\n\t\tif (!state.show) return;\r\n\r\n\t\tconst [left, top, { arrowX, arrowY, arrowPos }] = getPosition(\r\n\t\t\ttriggerRef.current,\r\n\t\t\tcontentRef.current,\r\n\t\t\t{\r\n\t\t\t\tposition,\r\n\t\t\t\tgap,\r\n\t\t\t\toffset,\r\n\t\t\t\talign,\r\n\t\t\t\trefWindow: referToWindow,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tstyle: { ...state.style, left, top },\r\n\t\t\tarrowProps: { left: arrowX, top: arrowY, pos: arrowPos },\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (trigger === \"contextmenu\") return;\r\n\t\tconst { observe, unobserve, disconnect } = useResizeObserver();\r\n\r\n\t\ttriggerRef.current && observe(triggerRef.current, computePosition);\r\n\r\n\t\tif (!watchResize || !contentRef.current) return;\r\n\r\n\t\tobserve(contentRef.current, computePosition);\r\n\r\n\t\treturn () => {\r\n\t\t\tif (!watchResize || !contentRef.current) return;\r\n\r\n\t\t\tunobserve(contentRef.current);\r\n\t\t\ttriggerRef.current && unobserve(triggerRef.current);\r\n\t\t\tdisconnect();\r\n\t\t};\r\n\t}, [watchResize, contentRef.current, triggerRef.current]);\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\tif (!fitSize || !state.show) return;\r\n\r\n\t\tconst vertical = [\"top\", \"bottom\"].includes(position);\r\n\t\tconst size =\r\n\t\t\ttriggerRef.current?.[vertical ? \"offsetWidth\" : \"offsetHeight\"];\r\n\t\tstate.style = { ...state.style, [vertical ? \"width\" : \"height\"]: size };\r\n\t}, [state.show, fitSize]);\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\thandleToggle(visible);\r\n\t}, [visible]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{Children.map(children, (child) => {\r\n\t\t\t\tif (!isValidElement(child)) return;\r\n\r\n\t\t\t\tconst { type, props } = child;\r\n\r\n\t\t\t\tif (typeof type === \"function\") return child;\r\n\r\n\t\t\t\tconst { className, ...rest } = props;\r\n\r\n\t\t\t\treturn cloneElement(child, {\r\n\t\t\t\t\tref: triggerRef,\r\n\t\t\t\t\tclassName,\r\n\t\t\t\t\t...eventMaps[trigger],\r\n\t\t\t\t\t...rest,\r\n\t\t\t\t});\r\n\t\t\t})}\r\n\r\n\t\t\t{state.show && (\r\n\t\t\t\t<Content\r\n\t\t\t\t\tref={contentRef}\r\n\t\t\t\t\tarrow={arrow && trigger !== \"contextmenu\"}\r\n\t\t\t\t\tstyle={{ ...style, ...state.style }}\r\n\t\t\t\t\tarrowProps={state.arrowProps}\r\n\t\t\t\t\tclassName={className}\r\n\t\t\t\t\t{...contentTouch}\r\n\t\t\t\t\ttrigger={triggerRef.current as HTMLElement}\r\n\t\t\t\t\tgetContainer={getContainer}\r\n\t\t\t\t>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</Content>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n}\r\n","import { useMemoizedFn } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { ReactNode, useMemo } from \"react\";\r\nimport { IBaseDates } from \"./type\";\r\n\r\nconst Dates = (\r\n\tprops: IBaseDates & {\r\n\t\tmonth: any;\r\n\t}\r\n) => {\r\n\tconst {\r\n\t\tvalue,\r\n\t\tmonth,\r\n\t\tweeks = [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\trenderDate = (date: Dayjs) => date.date(),\r\n\t\tdisabledDate,\r\n\t\tonDateClick,\r\n\t} = props;\r\n\tconst today = dayjs();\r\n\r\n\tconst dates = useMemo(() => {\r\n\t\tconst dates: Dayjs[] = [];\r\n\r\n\t\tconst lastDateOfLastMonth = month.add(-1, \"month\").endOf(\"month\");\r\n\t\tlet { $W, $D } = lastDateOfLastMonth;\r\n\r\n\t\tif ($W !== 0) {\r\n\t\t\tconst lastMonthDates = Array.from({ length: $W }).map(\r\n\t\t\t\t(whatever, i) => lastDateOfLastMonth.add(i + 1 - $W, \"day\")\r\n\t\t\t);\r\n\t\t\tdates.push(...lastMonthDates);\r\n\t\t}\r\n\r\n\t\tconst lastDate = month.endOf(\"month\");\r\n\t\t$D = lastDate.$D;\r\n\t\t$W = lastDate.$W;\r\n\t\tdates.push(\r\n\t\t\t...Array.from({ length: $D }).map((whatever, i) =>\r\n\t\t\t\tlastDate.add(i + 1 - $D, \"day\")\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\tif ($W !== 0) {\r\n\t\t\tdates.push(\r\n\t\t\t\t...Array.from({ length: 7 - $W }).map((whatever, i) =>\r\n\t\t\t\t\tlastDate.add(i + 1, \"day\")\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn dates;\r\n\t}, [month]);\r\n\r\n\tconst handleDateClick = useMemoizedFn((date: Dayjs) => {\r\n\t\tif (disabledDate?.(date)) return;\r\n\r\n\t\tonDateClick?.(date);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className='i-datepicker-weeks'>\r\n\t\t\t\t{weeks.map((week: ReactNode, i: number) => (\r\n\t\t\t\t\t<span key={i} className='i-datepicker-week'>\r\n\t\t\t\t\t\t{week}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='i-datepicker-dates'>\r\n\t\t\t\t{dates.map((date, i: number) => {\r\n\t\t\t\t\tconst active = date.isSame(value, \"day\");\r\n\t\t\t\t\tconst isSameMonth = date.isSame(month, \"month\");\r\n\t\t\t\t\tconst isToday = date.isSame(today, \"day\");\r\n\t\t\t\t\tconst disabled = disabledDate?.(date);\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tclassName={classNames(\"i-datepicker-item\", {\r\n\t\t\t\t\t\t\t\t\"i-datepicker-active\": active,\r\n\t\t\t\t\t\t\t\t\"i-datepicker-same-month\": isSameMonth,\r\n\t\t\t\t\t\t\t\t\"i-datepicker-today\": isToday,\r\n\t\t\t\t\t\t\t\t\"i-datepicker-disabled\": disabled,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tonClick={() => handleDateClick(date)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderDate(date)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Dates;\r\n","import {\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { throttle } from \"radash\";\r\nimport { ReactNode, useCallback, useEffect, useRef } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport Dates from \"./dates\";\r\nimport { IBaseDates } from \"./type\";\r\n\r\nconst MONTHS = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\r\n\r\nconst YearMonth = (\r\n\tprops: IBaseDates & {\r\n\t\tonClick?: () => void;\r\n\t}\r\n) => {\r\n\tconst {\r\n\t\tvalue,\r\n\t\tunitMonth = \"\",\r\n\t\tunitYear = \"\",\r\n\t\trenderYear,\r\n\t\trenderMonth,\r\n\t\tonClick,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<a className='i-datepicker-action' data-ripple onClick={onClick}>\r\n\t\t\t<span>{renderYear?.(value.year())}</span>\r\n\t\t\t{unitYear}\r\n\t\t\t<span>{renderMonth?.(value.month() + 1)}</span>\r\n\t\t\t{unitMonth}\r\n\t\t</a>\r\n\t);\r\n};\r\n\r\nconst Panel = (props: IBaseDates) => {\r\n\tconst {\r\n\t\tvalue,\r\n\t\tunitYear,\r\n\t\tunitMonth,\r\n\t\trenderDate,\r\n\t\trenderMonth = (m: ReactNode) => m,\r\n\t\trenderYear = (y: ReactNode) => y,\r\n\t\tdisabledDate,\r\n\t\tonDateClick,\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\ttoday: value,\r\n\t\tmonth: value || dayjs(),\r\n\t\tselectedYear: dayjs(),\r\n\t\tyears: [] as number[],\r\n\t\tselectable: false,\r\n\t});\r\n\r\n\tconst $years = useRef<HTMLDivElement>(null);\r\n\r\n\tconst handleOperateMonth = useCallback((next: boolean) => {\r\n\t\tstate.month = state.month[next ? \"add\" : \"subtract\"](1, \"month\");\r\n\t}, []);\r\n\r\n\tconst handleChangeDate = (date: Dayjs) => {\r\n\t\tif (date.isSame(state.today, \"day\")) return;\r\n\r\n\t\tif (!date.isSame(state.month, \"month\")) {\r\n\t\t\tstate.month = date;\r\n\t\t}\r\n\r\n\t\tstate.today = date;\r\n\t\tonDateClick?.(date);\r\n\t};\r\n\r\n\tconst handleChangeMonth = (month: number) => {\r\n\t\tstate.month = state.month\r\n\t\t\t.year(state.selectedYear.year())\r\n\t\t\t.month(month - 1);\r\n\t\tstate.selectable = false;\r\n\t};\r\n\r\n\tconst getMoreYears = throttle({ interval: 100 }, (e) => {\r\n\t\tconst isUp = e.deltaY < 0;\r\n\r\n\t\tstate.years = state.years.map((y) => (y += isUp ? -1 : 1));\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!state.selectable) return;\r\n\r\n\t\tstate.selectedYear = state.month;\r\n\t\tconst y = state.selectedYear.year();\r\n\t\tconst years = Array.from({ length: 7 }).map((_, i) => y - 3 + i);\r\n\r\n\t\tstate.years = [...years];\r\n\t}, [state.selectable]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.today = value;\r\n\t\tstate.month = value || dayjs();\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div className='i-datepicker'>\r\n\t\t\t<div className='i-datepicker-units'>\r\n\t\t\t\t<YearMonth\r\n\t\t\t\t\tvalue={state.month}\r\n\t\t\t\t\tunitYear={unitYear}\r\n\t\t\t\t\tunitMonth={unitMonth}\r\n\t\t\t\t\trenderMonth={renderMonth}\r\n\t\t\t\t\trenderYear={renderYear}\r\n\t\t\t\t\tonClick={() => (state.selectable = true)}\r\n\t\t\t\t/>\r\n\t\t\t\t<a\r\n\t\t\t\t\tclassName='ml-auto i-datepicker-action'\r\n\t\t\t\t\tdata-ripple\r\n\t\t\t\t\tonClick={() => handleOperateMonth(false)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon icon={<KeyboardArrowLeftRound />} />\r\n\t\t\t\t</a>\r\n\t\t\t\t<a\r\n\t\t\t\t\tclassName='i-datepicker-action'\r\n\t\t\t\t\tdata-ripple\r\n\t\t\t\t\tonClick={() => handleOperateMonth(true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon icon={<KeyboardArrowRightRound />} />\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-datepicker-ym\", {\r\n\t\t\t\t\t\"i-datepicker-active\": state.selectable,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<Helpericon\r\n\t\t\t\t\tactive\r\n\t\t\t\t\tclassName='i-datepicker-close'\r\n\t\t\t\t\tonClick={() => (state.selectable = false)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={$years}\r\n\t\t\t\t\tclassName='i-datepicker-years'\r\n\t\t\t\t\tonWheel={getMoreYears}\r\n\t\t\t\t>\r\n\t\t\t\t\t{state.years.map((y) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={y}\r\n\t\t\t\t\t\t\tclassName={classNames(\"i-datepicker-year\", {\r\n\t\t\t\t\t\t\t\t\"i-datepicker-active\":\r\n\t\t\t\t\t\t\t\t\ty === state.selectedYear.year(),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t(state.selectedYear =\r\n\t\t\t\t\t\t\t\t\tstate.selectedYear.year(y))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderYear(y)}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='i-datepicker-months'>\r\n\t\t\t\t\t{MONTHS.map((m) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={m}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-datepicker-month\", {\r\n\t\t\t\t\t\t\t\t\t\"i-datepicker-active\":\r\n\t\t\t\t\t\t\t\t\t\tm === state.month.month() + 1,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tonClick={() => handleChangeMonth(m)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{renderMonth(m)}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Dates\r\n\t\t\t\tvalue={state.today}\r\n\t\t\t\tmonth={state.month}\r\n\t\t\t\tdisabledDate={disabledDate}\r\n\t\t\t\tonDateClick={handleChangeDate}\r\n\t\t\t\trenderDate={renderDate}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Panel;\r\n","import { CalendarMonthTwotone } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport customParseFormat from \"dayjs/plugin/customParseFormat\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport Input from \"../input\";\r\nimport Popup from \"../popup\";\r\nimport \"./index.css\";\r\nimport Panel from \"./panel\";\r\nimport { IDatePicker } from \"./type\";\r\n\r\ndayjs.extend(customParseFormat);\r\n\r\nconst FORMATTYPES = [\"YYYY-MM-DD\", \"YYYY-M-D\", \"YYYY/MM/DD\", \"YYYY/M/D\"];\r\n\r\nconst Datepicker = (props: IDatePicker): JSX.Element => {\r\n\tconst {\r\n\t\tname,\r\n\t\tvalue,\r\n\t\tweeks,\r\n\t\tformat = \"YYYY-MM-DD\",\r\n\t\trenderDate,\r\n\t\trenderMonth,\r\n\t\trenderYear,\r\n\t\tpopupProps,\r\n\t\tdisabledDate,\r\n\t\tonDateClick,\r\n\t\tonChange,\r\n\t\tonBlur,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst [active, setActive] = useState<boolean>(false);\r\n\r\n\tconst dayJsValue = useMemo(() => {\r\n\t\tif (!state.value) return null;\r\n\r\n\t\tconst date = dayjs(state.value as string, format, true);\r\n\r\n\t\tif (date.isValid()) return date;\r\n\r\n\t\treturn null;\r\n\t}, [state.value]);\r\n\r\n\tconst handleDateClick = (date: Dayjs) => {\r\n\t\thandleChange(date.format(format));\r\n\t};\r\n\r\n\tconst handleChange = (v) => {\r\n\t\tstate.value = v;\r\n\t\tonChange?.(v);\r\n\t};\r\n\r\n\tconst handleSetDate = () => {\r\n\t\tif (!state.value) return;\r\n\r\n\t\tconst date = dayjs(state.value as string, FORMATTYPES, true);\r\n\r\n\t\tif (date.isValid()) {\r\n\t\t\thandleChange(date.format(format));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thandleChange(\"\");\r\n\t};\r\n\r\n\tconst handleBlur = (e) => {\r\n\t\tonBlur?.(e);\r\n\r\n\t\thandleSetDate();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\tvisible={active}\r\n\t\t\ttrigger='click'\r\n\t\t\tposition='bottom'\r\n\t\t\tarrow={false}\r\n\t\t\talign='start'\r\n\t\t\tcontent={\r\n\t\t\t\t<Panel\r\n\t\t\t\t\tvalue={dayJsValue}\r\n\t\t\t\t\tweeks={weeks}\r\n\t\t\t\t\trenderDate={renderDate}\r\n\t\t\t\t\trenderMonth={renderMonth}\r\n\t\t\t\t\trenderYear={renderYear}\r\n\t\t\t\t\tdisabledDate={disabledDate}\r\n\t\t\t\t\tonDateClick={handleDateClick}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\t{...popupProps}\r\n\t\t\twatchResize\r\n\t\t\tonVisibleChange={setActive}\r\n\t\t>\r\n\t\t\t<Input\r\n\t\t\t\tvalue={state.value}\r\n\t\t\t\tprepend={\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<CalendarMonthTwotone />}\r\n\t\t\t\t\t\tclassName='i-datepicker-icon'\r\n\t\t\t\t\t\tsize='1em'\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\tonEnter={handleSetDate}\r\n\t\t\t\t{...restProps}\r\n\t\t\t/>\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nexport default Datepicker;\r\n","import classNames from \"classnames\";\r\nimport { CSSProperties, Fragment } from \"react\";\r\nimport \"./index.css\";\r\nimport { IDescription } from \"./type\";\r\n\r\nconst Description = (props: IDescription): JSX.Element => {\r\n\tconst {\r\n\t\tdata,\r\n\t\tcolon,\r\n\t\tcolumns = 1,\r\n\t\tgap = \".5em\",\r\n\t\talign,\r\n\t\tlabelWidth,\r\n\t\tlabelAlign,\r\n\t\tvertical,\r\n\t\tequally,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-description\", className)}\r\n\t\t\tstyle={\r\n\t\t\t\t{\r\n\t\t\t\t\t[\"--description-label-width\"]: labelWidth,\r\n\t\t\t\t\tgridTemplateColumns: `repeat(${columns}, ${\r\n\t\t\t\t\t\tequally ? \"1fr\" : \"auto\"\r\n\t\t\t\t\t})`,\r\n\t\t\t\t\tgap,\r\n\t\t\t\t\ttextAlign: align,\r\n\t\t\t\t\t...style,\r\n\t\t\t\t} as CSSProperties\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{data.map((item, i) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tlabel,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tstyle,\r\n\t\t\t\t\thidden,\r\n\t\t\t\t\trowSpan = 1,\r\n\t\t\t\t\tcolSpan = 1,\r\n\t\t\t\t} = item;\r\n\r\n\t\t\t\tif (hidden) return <Fragment key={i} />;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tclassName={classNames(\"i-description-item\", {\r\n\t\t\t\t\t\t\t\"i-description-item-vertical\": vertical,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tgridColumn: `span ${colSpan}`,\r\n\t\t\t\t\t\t\tgridRow: `span ${rowSpan}`,\r\n\t\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{label && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='i-description-label'\r\n\t\t\t\t\t\t\t\tstyle={{ textAlign: labelAlign }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t\t{colon}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className='i-description-value'>{value}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Description;\r\n","import classNames from \"classnames\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { IDrawer } from \"./type\";\r\n\r\nexport default function Drawer(props: IDrawer) {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tposition = \"left\",\r\n\t\theader,\r\n\t\tfooter,\r\n\t\tbackdropClosable = true,\r\n\t\thideCloseButton,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonVisibleChange,\r\n\t\tonClose,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst [show, setShow] = useState(visible);\r\n\tconst [active, setActive] = useState(visible);\r\n\tconst toggable = useRef(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tvisible ? handleShow() : handleHide();\r\n\t}, [visible]);\r\n\r\n\tconst handleShow = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\r\n\t\tsetShow(true);\r\n\t\tonVisibleChange?.(true);\r\n\t\ttoggable.current = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetActive(true);\r\n\t\t\ttoggable.current = true;\r\n\t\t}, 24);\r\n\t}, []);\r\n\r\n\tconst handleHide = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\t\ttoggable.current = false;\r\n\r\n\t\tsetActive(false);\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShow(false);\r\n\t\t\tonVisibleChange?.(false);\r\n\t\t\ttoggable.current = true;\r\n\t\t\tonClose?.();\r\n\t\t}, 240);\r\n\t}, []);\r\n\r\n\tconst handleBackdropClick = useCallback(function () {\r\n\t\tbackdropClosable && handleHide();\r\n\t}, []);\r\n\r\n\treturn createPortal(\r\n\t\tshow && (\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-backdrop-drawer\", className, {\r\n\t\t\t\t\t\"i-active\": active,\r\n\t\t\t\t})}\r\n\t\t\t\tonClick={handleBackdropClick}\r\n\t\t\t\t{...restProps}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classNames(\"i-drawer\", `i-drawer-${position}`)}\r\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<header className='i-drawer-header'>\r\n\t\t\t\t\t\t{header}\r\n\r\n\t\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\t\tactive={!hideCloseButton}\r\n\t\t\t\t\t\t\tclassName='i-drawer-close'\r\n\t\t\t\t\t\t\tonClick={handleHide}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t<div className='i-drawer-content'>{children}</div>\r\n\r\n\t\t\t\t\t<div className='i-drawer-footer'>{footer}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t),\r\n\t\tdocument.body\r\n\t);\r\n}\r\n","import { List, Popup } from \"@p\";\r\nimport \"./index.css\";\r\nimport { CompositionDropdown, IDropdown } from \"./type\";\r\n\r\nconst Dropdown = (props: IDropdown): JSX.Element => {\r\n\tconst { width, content, children, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\ttrigger='click'\r\n\t\t\tposition='bottom'\r\n\t\t\ttouchable\r\n\t\t\tcontent={\r\n\t\t\t\t<List\r\n\t\t\t\t\tclassName='i-dropdown-content'\r\n\t\t\t\t\tstyle={{ minWidth: width }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</List>\r\n\t\t\t}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nexport default Dropdown as CompositionDropdown;\r\n","import classNames from \"classnames\";\r\nimport { forwardRef } from \"react\";\r\nimport { IListItem } from \"./type\";\r\n\r\nconst Item = forwardRef<HTMLLIElement, IListItem>((props, ref) => {\r\n\tconst {\r\n\t\tactive,\r\n\t\ttype,\r\n\t\talign,\r\n\t\tdisabled,\r\n\t\tlabel,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<li\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classNames(\"i-list-item\", className, {\r\n\t\t\t\t\"i-list-item-active\": active,\r\n\t\t\t\t\"i-list-option\": type === \"option\",\r\n\t\t\t\tdisabled,\r\n\t\t\t})}\r\n\t\t\tstyle={{ alignItems: align, ...style }}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{label !== undefined && (\r\n\t\t\t\t<span className='i-list-item-label'>{label}</span>\r\n\t\t\t)}\r\n\t\t\t{children}\r\n\t\t</li>\r\n\t);\r\n});\r\n\r\nexport default Item;\r\n","import classNames from \"classnames\";\r\nimport { Children, cloneElement } from \"react\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { IList } from \"./type\";\r\nimport Virtual from \"./virtual\";\r\n\r\nconst List = (props: IList): JSX.Element => {\r\n\tconst { label, type, className, children, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<ul className={classNames(\"i-list\", className)} {...restProps}>\r\n\t\t\t{Children.map(children, (node: any, i) => {\r\n\t\t\t\tconst renderLabel =\r\n\t\t\t\t\ttypeof label === \"function\" ? label(i) : label;\r\n\r\n\t\t\t\treturn cloneElement(node, {\r\n\t\t\t\t\tlabel: renderLabel,\r\n\t\t\t\t\t...node.props,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t});\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nList.Virtual = Virtual;\r\nList.Item = Item;\r\n\r\nexport default List;\r\n","import VList from \"rc-virtual-list\";\r\nimport { IVirtual } from \"./type\";\r\n\r\nconst Virtual = (props: IVirtual) => {\r\n\tconst { data, itemKey, renderItem, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<VList data={data} itemKey={itemKey} {...restProps}>\r\n\t\t\t{(item, i) => {\r\n\t\t\t\treturn renderItem?.(item, i);\r\n\t\t\t}}\r\n\t\t</VList>\r\n\t);\r\n};\r\n\r\nexport default Virtual;\r\n","import List from \"../list\";\r\nimport Popup from \"../popup\";\r\nimport { IDropItem } from \"./type\";\r\n\r\nconst { Item: ListItem } = List;\r\n\r\nconst Item = (props: IDropItem) => {\r\n\tconst { more, moreProps, ...restProps } = props;\r\n\tconst Li = <ListItem {...restProps} />;\r\n\r\n\tif (!more) return Li;\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\tposition='right'\r\n\t\t\ttouchable\r\n\t\t\tarrow={false}\r\n\t\t\talign='start'\r\n\t\t\toffset={10}\r\n\t\t\t{...moreProps}\r\n\t\t\tcontent={\r\n\t\t\t\t<List\r\n\t\t\t\t\tclassName='i-dropdown-content'\r\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t{more}\r\n\t\t\t\t</List>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{Li}\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nexport default Item;\r\n","import Dropdown from \"./dropdown\";\r\nimport Item from \"./item\";\r\n\r\nDropdown.Item = Item;\r\n\r\nexport default Dropdown;\r\n","import classNames from \"classnames\";\r\nimport { useMemo } from \"react\";\r\nimport \"./index.css\";\r\nimport { IFlex } from \"./type\";\r\n\r\nconst Flex = (props: IFlex): JSX.Element => {\r\n\tconst {\r\n\t\tas: Component = \"div\",\r\n\t\talign,\r\n\t\tjustify,\r\n\t\tdirection,\r\n\t\twrap,\r\n\t\tgap,\r\n\t\tcolumns,\r\n\t\tclassName,\r\n\t\tstyle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst gridColumns = useMemo(() => {\r\n\t\tif (!columns) return;\r\n\r\n\t\tif (typeof columns === \"number\") return `repeat(${columns}, 1fr)`;\r\n\r\n\t\treturn columns;\r\n\t}, [columns]);\r\n\r\n\treturn (\r\n\t\t<Component\r\n\t\t\t{...restProps}\r\n\t\t\tstyle={{\r\n\t\t\t\talignItems: align,\r\n\t\t\t\tjustifyContent: justify,\r\n\t\t\t\tgap,\r\n\t\t\t\tflexDirection: direction,\r\n\t\t\t\tflexWrap: wrap === true ? \"wrap\" : wrap,\r\n\t\t\t\tgridTemplateColumns: gridColumns as any,\r\n\t\t\t\t...style,\r\n\t\t\t}}\r\n\t\t\tclassName={classNames(className, {\r\n\t\t\t\t[columns ? \"grid\" : \"flex\"]: true,\r\n\t\t\t})}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default Flex;\r\n","import { createContext } from \"react\";\r\nimport { IFormInstance } from \"./useForm\";\r\n\r\nconst Context = createContext({} as IFormInstance);\r\n\r\nexport default Context;\r\n","import { uid } from \"radash\";\r\nimport { useRef } from \"react\";\r\nimport { IForm, TRule } from \"./type\";\r\n\r\nexport class IFormInstance {\r\n\treadonly id?: string;\r\n\tdata: { [key: string]: any } = {};\r\n\trules?: Pick<IForm, \"rules\"> = {};\r\n\r\n\tconstructor() {\r\n\t\tthis.id = uid(8);\r\n\t\tthis.data = {};\r\n\t}\r\n\r\n\tget(field?: string) {\r\n\t\treturn field ? this.data[field] : this.data;\r\n\t}\r\n\r\n\tset(field: any, value?: any) {\r\n\t\tconst id = this.id;\r\n\t\tif (!this.data) return;\r\n\r\n\t\tif (typeof field === \"string\") {\r\n\t\t\tthis.data[field] = value;\r\n\t\t\tPubSub.publish(`${id}:set:${field}`, value);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tObject.keys(field).map((name) => {\r\n\t\t\tthis.data[name] = field[name];\r\n\t\t\tPubSub.publish(`${id}:set:${name}`, field[name]);\r\n\t\t});\r\n\t}\r\n\r\n\tclear() {\r\n\t\tif (!this.data) return;\r\n\r\n\t\tObject.keys(this.data).map((name) => {\r\n\t\t\tPubSub.publish(`${this.id}:set:${name}`, undefined);\r\n\t\t\tthis.data[name] = undefined;\r\n\t\t});\r\n\t}\r\n\r\n\tasync validate(field?: string) {\r\n\t\tconst { id, rules, data } = this;\r\n\t\tif (!rules) return data;\r\n\r\n\t\tif (field) {\r\n\t\t\tconst o = rules[field];\r\n\t\t\tconst rule: TRule = {\r\n\t\t\t\tvalidator: (v) =>\r\n\t\t\t\t\tArray.isArray(v)\r\n\t\t\t\t\t\t? v.length > 0\r\n\t\t\t\t\t\t: ![undefined, null, \"\"].includes(v),\r\n\t\t\t\tmessage: undefined,\r\n\t\t\t};\r\n\r\n\t\t\tif (typeof o === \"function\") {\r\n\t\t\t\trule.validator = o;\r\n\t\t\t} else if (o === true) {\r\n\t\t\t\trule.message = \"required\";\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(rule, o);\r\n\t\t\t}\r\n\r\n\t\t\tconst isValid = rule.validator?.(data[field], this);\r\n\r\n\t\t\tif (!isValid) {\r\n\t\t\t\tPubSub.publish(`${id}:invalid:${field}`, {\r\n\t\t\t\t\tmessage: rule.message,\r\n\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tPubSub.publish(`${id}:invalid:${name}`, {\r\n\t\t\t\tmessage: null,\r\n\t\t\t\tstatus: \"normal\",\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tlet isAllValid = true;\r\n\r\n\t\tObject.keys(data).map((name) => {\r\n\t\t\tconst o = rules[name];\r\n\t\t\tif (o === undefined) return;\r\n\r\n\t\t\tconst rule: TRule = {\r\n\t\t\t\tvalidator: (v) => (Array.isArray(v) ? v.length > 0 : !!v),\r\n\t\t\t\tmessage: undefined,\r\n\t\t\t};\r\n\r\n\t\t\tif (typeof o === \"function\") {\r\n\t\t\t\trule.validator = o;\r\n\t\t\t} else if (o === true) {\r\n\t\t\t\trule.message = \"required\";\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(rule, o);\r\n\t\t\t}\r\n\r\n\t\t\tconst isValid = rule.validator?.(data[name], this);\r\n\r\n\t\t\tif (!isValid) {\r\n\t\t\t\tPubSub.publish(`${id}:invalid:${name}`, {\r\n\t\t\t\t\tmessage: rule.message,\r\n\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\tisAllValid = false;\r\n\t\t\t} else {\r\n\t\t\t\tPubSub.publish(`${id}:invalid:${name}`, {\r\n\t\t\t\t\tmessage: null,\r\n\t\t\t\t\tstatus: \"normal\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn isAllValid ? data : false;\r\n\t}\r\n}\r\n\r\nexport default function useForm(form?: IFormInstance) {\r\n\tconst formRef = useRef<IFormInstance>();\r\n\r\n\tif (!formRef.current) {\r\n\t\tformRef.current = form ?? new IFormInstance();\r\n\t}\r\n\r\n\treturn formRef.current;\r\n}\r\n","import classNames from \"classnames\";\r\nimport { useEffect } from \"react\";\r\nimport Context from \"./context\";\r\nimport Field from \"./field\";\r\nimport \"./index.css\";\r\nimport { IForm } from \"./type\";\r\nimport useForm, { IFormInstance } from \"./useForm\";\r\n\r\nconst Form = (props: IForm): JSX.Element => {\r\n\tconst {\r\n\t\tform = {} as IFormInstance,\r\n\t\trules = {},\r\n\t\tinitialValues = {},\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\twidth,\r\n\t\tchildren,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\tuseEffect(() => {\r\n\t\tObject.assign(form, {\r\n\t\t\tdata: { ...initialValues },\r\n\t\t\trules: { ...rules },\r\n\t\t});\r\n\t}, [form, rules]);\r\n\r\n\treturn (\r\n\t\t<Context.Provider value={form}>\r\n\t\t\t<form\r\n\t\t\t\tstyle={{ ...style, width }}\r\n\t\t\t\tclassName={classNames(\"i-form\", className)}\r\n\t\t\t\t{...rest}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</form>\r\n\t\t</Context.Provider>\r\n\t);\r\n};\r\n\r\nForm.useForm = useForm;\r\nForm.Field = Field;\r\n\r\nexport default Form;\r\n","import classNames from \"classnames\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Button from \"../button\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { IModal, IModalContent } from \"./type\";\r\nimport useModal from \"./useModal\";\r\n\r\nfunction DefaultContent(props: IModalContent) {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tfooter,\r\n\t\thideCloseButton,\r\n\t\tfooterLeft,\r\n\t\tokButtonProps = {\r\n\t\t\tchildren: \"\",\r\n\t\t\tonClick: props.onOk,\r\n\t\t},\r\n\t\tcancelButtonProps = {\r\n\t\t\tsecondary: true,\r\n\t\t\tchildren: \"\",\r\n\t\t\tonClick: props.onClose,\r\n\t\t},\r\n\t\tchildren,\r\n\t\tonClose,\r\n\t} = props;\r\n\tconst showHeader = title || !hideCloseButton;\r\n\r\n\tconst renderFooter = useMemo(() => {\r\n\t\tif (footer || footer === null) return footer;\r\n\r\n\t\tconst propsOk = Object.assign({}, okButtonProps);\r\n\t\tconst propsCancel = Object.assign({}, cancelButtonProps);\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{footerLeft}\r\n\t\t\t\t<Button {...propsOk} />\r\n\t\t\t\t<Button {...propsCancel} />\r\n\t\t\t</>\r\n\t\t);\r\n\t}, [footer, okButtonProps, cancelButtonProps]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showHeader && (\r\n\t\t\t\t<header className='i-modal-header'>\r\n\t\t\t\t\t{title && <b>{title}</b>}\r\n\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive={!hideCloseButton}\r\n\t\t\t\t\t\tclassName='i-modal-close'\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</header>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className='i-modal-content'>{children}</div>\r\n\r\n\t\t\t<footer className='i-modal-footer'>{renderFooter}</footer>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction Modal(props: IModal) {\r\n\tconst {\r\n\t\tvisible,\r\n\t\ttitle,\r\n\t\tfooter,\r\n\t\tokButtonProps,\r\n\t\tcancelButtonProps,\r\n\t\tclosable = true,\r\n\t\thideBackdrop,\r\n\t\tbackdropClosable = true,\r\n\t\thideCloseButton,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tcustomized,\r\n\t\tfixed,\r\n\t\tshadow = true,\r\n\t\tchildren,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tfooterLeft,\r\n\t\tonVisibleChange,\r\n\t\tonClose,\r\n\t\tonOk,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst [show, setShow] = useState(visible);\r\n\tconst [active, setActive] = useState(false);\r\n\tconst [bounced, setBounced] = useState(false);\r\n\tconst toggable = useRef(true);\r\n\r\n\tconst handleShow = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\r\n\t\tsetShow(true);\r\n\t\ttoggable.current = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetActive(true);\r\n\t\t\tonVisibleChange?.(true);\r\n\t\t\ttoggable.current = true;\r\n\t\t}, 24);\r\n\t}, []);\r\n\r\n\tconst handleHide = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\t\ttoggable.current = false;\r\n\r\n\t\tif (!closable) {\r\n\t\t\tsetBounced(true);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetBounced(false);\r\n\t\t\t\ttoggable.current = true;\r\n\t\t\t}, 400);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetActive(false);\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShow(false);\r\n\t\t\ttoggable.current = true;\r\n\t\t\tonVisibleChange?.(false);\r\n\t\t\tonClose?.();\r\n\t\t}, 240);\r\n\t}, [closable]);\r\n\r\n\tconst handleBackdropClick = useCallback(\r\n\t\tfunction () {\r\n\t\t\tbackdropClosable && handleHide();\r\n\t\t},\r\n\t\t[closable, backdropClosable]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tvisible ? handleShow() : handleHide();\r\n\t}, [visible]);\r\n\r\n\tif (!show) return null;\r\n\r\n\treturn createPortal(\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-modal-container\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-modal-backdrop\": !hideBackdrop,\r\n\t\t\t\t\t\"i-modal-customized\": customized,\r\n\t\t\t\t\t\"i-modal-active\": active,\r\n\t\t\t\t\tfixed,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={handleBackdropClick}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-modal\", {\r\n\t\t\t\t\tbounced,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t{...restProps}\r\n\t\t\t>\r\n\t\t\t\t{customized && children}\r\n\r\n\t\t\t\t{!customized && (\r\n\t\t\t\t\t<DefaultContent\r\n\t\t\t\t\t\ttitle={title}\r\n\t\t\t\t\t\thideCloseButton={hideCloseButton}\r\n\t\t\t\t\t\tfooter={footer}\r\n\t\t\t\t\t\tokButtonProps={okButtonProps}\r\n\t\t\t\t\t\tcancelButtonProps={cancelButtonProps}\r\n\t\t\t\t\t\tchildren={children}\r\n\t\t\t\t\t\tfooterLeft={footerLeft}\r\n\t\t\t\t\t\tonOk={onOk}\r\n\t\t\t\t\t\tonClose={handleHide}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>,\r\n\t\tdocument.body\r\n\t);\r\n}\r\n\r\nModal.useModal = useModal;\r\n\r\nexport default Modal;\r\n","import { useReactive } from \"ahooks\";\r\nimport PubSub from \"pubsub-js\";\r\nimport {\r\n\tChildren,\r\n\tcloneElement,\r\n\tisValidElement,\r\n\tuseCallback,\r\n\tuseContext,\r\n\tuseEffect,\r\n\tuseMemo,\r\n} from \"react\";\r\nimport Context from \"./context\";\r\nimport { IField } from \"./type\";\r\n\r\nexport default function Field(props: IField) {\r\n\tconst { name, required, children } = props;\r\n\tconst state = useReactive({\r\n\t\tvalue: undefined,\r\n\t\tstatus: \"normal\",\r\n\t\tmessage: undefined,\r\n\t\tupdate: 0,\r\n\t});\r\n\tconst form = useContext(Context);\r\n\tconst { id } = form;\r\n\r\n\tconst handleChange = useCallback(\r\n\t\t(v) => {\r\n\t\t\tif (!name) return;\r\n\r\n\t\t\tform.set(name, v);\r\n\t\t},\r\n\t\t[name]\r\n\t);\r\n\r\n\tconst hijackChildren = useMemo(() => {\r\n\t\treturn Children.map(children, (node) => {\r\n\t\t\tif (!isValidElement(node)) return null;\r\n\r\n\t\t\tconst { onChange } = node.props as any;\r\n\t\t\tconst { value, status, message } = state;\r\n\r\n\t\t\treturn cloneElement(node, {\r\n\t\t\t\tvalue,\r\n\t\t\t\tstatus,\r\n\t\t\t\tmessage,\r\n\t\t\t\trequired,\r\n\t\t\t\tonChange: (...args) => {\r\n\t\t\t\t\thandleChange(args[0]);\r\n\t\t\t\t\tonChange?.(...args);\r\n\t\t\t\t\tObject.assign(state, {\r\n\t\t\t\t\t\tstatus: \"normal\",\r\n\t\t\t\t\t\tmessage: undefined,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t} as any);\r\n\t\t});\r\n\t}, [children, state.update]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!name) return;\r\n\r\n\t\tPubSub.subscribe(`${id}:set:${name}`, (evt, v) => {\r\n\t\t\tstate.value = v;\r\n\t\t\tstate.update += 1;\r\n\t\t});\r\n\t\tPubSub.subscribe(`${id}:invalid:${name}`, (evt, v) => {\r\n\t\t\tObject.assign(state, v);\r\n\t\t\tstate.update += 1;\r\n\t\t});\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tform.data[name] = form.data[name] ?? undefined;\r\n\t\t}, 0);\r\n\r\n\t\treturn () => {\r\n\t\t\tPubSub.unsubscribe(`${id}:set:${name}`);\r\n\t\t\tPubSub.unsubscribe(`${id}:invalid:${name}`);\r\n\t\t};\r\n\t}, [name]);\r\n\r\n\tif (!name) return children;\r\n\r\n\treturn hijackChildren;\r\n}\r\n","import { renderNode } from \"@p/js/utils\";\r\nimport { useRef } from \"react\";\r\nimport HookModal from \"./hookModal\";\r\nimport { IModal, RefHookModal } from \"./type\";\r\n\r\nexport default function useModal() {\r\n\tconst ref = useRef<RefHookModal>(null);\r\n\r\n\tconst handleOpen = (props: IModal) => {\r\n\t\tconst unMount = renderNode(\r\n\t\t\t<HookModal\r\n\t\t\t\tref={ref}\r\n\t\t\t\tvisible\r\n\t\t\t\t{...props}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tprops.onClose?.();\r\n\t\t\t\t\tunMount?.();\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleUpdate = (props: IModal) => {\r\n\t\tif (!ref.current) return;\r\n\r\n\t\tconst { update } = ref.current;\r\n\t\tupdate(props);\r\n\t};\r\n\r\n\treturn {\r\n\t\topen: handleOpen,\r\n\t\tupdate: handleUpdate,\r\n\t};\r\n}\r\n","import { useReactive } from \"ahooks\";\r\nimport { forwardRef, useImperativeHandle } from \"react\";\r\nimport Modal from \"./modal\";\r\nimport { IModal, RefHookModal } from \"./type\";\r\n\r\nconst HookModal = forwardRef<RefHookModal, IModal>((props, ref) => {\r\n\tconst state = useReactive<IModal>({});\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\tupdate: (config: IModal = {}) => {\r\n\t\t\tObject.assign(state, config);\r\n\t\t},\r\n\t}));\r\n\r\n\treturn <Modal {...props} {...state} />;\r\n});\r\n\r\nexport default HookModal;\r\n","import classNames from \"classnames\";\r\nimport { useMemo } from \"react\";\r\nimport Highlight from \"./highlight\";\r\nimport \"./index.css\";\r\nimport Number from \"./number\";\r\nimport Time from \"./time\";\r\nimport { IText } from \"./type\";\r\n\r\nconst Text = (props: IText): JSX.Element => {\r\n\tconst {\r\n\t\tas: Tag = \"span\",\r\n\t\tsize,\r\n\t\tweight,\r\n\t\tdecoration,\r\n\t\tgradient,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t} = props;\r\n\r\n\tconst gradients = useMemo(() => {\r\n\t\tif (!gradient || !Array.isArray(gradient)) return {};\r\n\r\n\t\treturn {\r\n\t\t\tbackground: `-webkit-linear-gradient(${gradient.join(\",\")})`,\r\n\t\t\tbackgroundClip: \"text\",\r\n\t\t};\r\n\t}, [gradient]);\r\n\r\n\treturn (\r\n\t\t<Tag\r\n\t\t\tstyle={{\r\n\t\t\t\tfontSize: size,\r\n\t\t\t\tfontWeight: weight,\r\n\t\t\t\ttextDecoration: decoration,\r\n\t\t\t\t...gradients,\r\n\t\t\t\t...style,\r\n\t\t\t}}\r\n\t\t\tclassName={classNames(className, {\r\n\t\t\t\t\"i-text-gradient\": gradient,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Tag>\r\n\t);\r\n};\r\n\r\nText.Highlight = Highlight;\r\nText.Number = Number;\r\nText.Time = Time;\r\n\r\nexport default Text;\r\n","import Text from \"../text\";\r\nimport { IProgress } from \"./type\";\r\n\r\nexport default function Circle(\r\n\tprops: Pick<IProgress, \"value\" | \"height\" | \"size\">\r\n) {\r\n\tconst { value, height = 40, size = 8 } = props;\r\n\r\n\treturn (\r\n\t\t<div className='i-progress-circle'>\r\n\t\t\t<svg width={height} height={height}>\r\n\t\t\t\t<circle\r\n\t\t\t\t\tcx={height / 2}\r\n\t\t\t\t\tcy={height / 2}\r\n\t\t\t\t\tr={height / 2 - size / 2}\r\n\t\t\t\t\tfill='none'\r\n\t\t\t\t\tstroke='var(--background-opacity-2)'\r\n\t\t\t\t\tstrokeWidth={size}\r\n\t\t\t\t/>\r\n\t\t\t\t<circle\r\n\t\t\t\t\tcx={height / 2}\r\n\t\t\t\t\tcy={height / 2}\r\n\t\t\t\t\tr={height / 2 - size / 2}\r\n\t\t\t\t\tfill='none'\r\n\t\t\t\t\tstroke='var(--color-main)'\r\n\t\t\t\t\tstrokeWidth={size}\r\n\t\t\t\t\tstrokeDasharray={100}\r\n\t\t\t\t\tpathLength={100}\r\n\t\t\t\t\tclassName='i-progress-circle-path'\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tstrokeDashoffset: `calc(100 - ${value})`,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\r\n\t\t\t<span className='i-progress-circle-value'>\r\n\t\t\t\t<span>{value}</span>\r\n\t\t\t\t<Text size='.81em' className='color-7'>\r\n\t\t\t\t\t%\r\n\t\t\t\t</Text>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n}\r\n","export default function Highlight(props) {\r\n\treturn <></>;\r\n}\r\n","import { animate, formatNumber } from \"@p/js/utils\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Text from \"./text\";\r\nimport { ITextNumber } from \"./type\";\r\n\r\nexport default function Number(props: ITextNumber) {\r\n\tconst {\r\n\t\tcount,\r\n\t\tto,\r\n\t\tdecimal,\r\n\t\tthousand = \",\",\r\n\t\tduration = 2400,\r\n\t\teasing,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst [n, setN] = useState(count);\r\n\r\n\tconst number = useMemo(() => {\r\n\t\tif (n === undefined) return;\r\n\r\n\t\tconst z = n.toFixed(decimal);\r\n\r\n\t\tif (!thousand) return z;\r\n\r\n\t\treturn formatNumber(n, { precision: decimal, thousand });\r\n\t}, [n, thousand]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (count === undefined || to === undefined) return;\r\n\r\n\t\tanimate(count, to, duration, (v) => setN(count + v), easing);\r\n\t}, [to]);\r\n\r\n\tuseEffect(() => setN(count), [count]);\r\n\r\n\treturn <Text {...restProps}>{number}</Text>;\r\n}\r\n","import { formatTime } from \"@p/js/utils\";\r\nimport { useMemo } from \"react\";\r\nimport Text from \"./text\";\r\nimport { ITextTime } from \"./type\";\r\n\r\nexport default function Number(props: ITextTime) {\r\n\tconst { seconds, zero, units, ...restProps } = props;\r\n\r\n\tconst text = useMemo(() => {\r\n\t\tif (seconds === undefined) return \"\";\r\n\r\n\t\treturn formatTime(seconds, {\r\n\t\t\tzero,\r\n\t\t\tunits,\r\n\t\t});\r\n\t}, [seconds]);\r\n\r\n\treturn <Text {...restProps}>{text}</Text>;\r\n}\r\n","import classNames from \"classnames\";\r\nimport { MouseEvent, forwardRef } from \"react\";\r\nimport { IProgress } from \"./type\";\r\n\r\nconst Line = forwardRef<\r\n\tHTMLDivElement,\r\n\tPick<IProgress, \"value\" | \"size\" | \"barClass\" | \"renderCursor\"> & {\r\n\t\tdragging: boolean;\r\n\t\tonMouseDown: (e: MouseEvent) => void;\r\n\t}\r\n>((props, ref) => {\r\n\tconst { value, size, barClass, dragging, renderCursor, onMouseDown } =\r\n\t\tprops;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName='i-progress'\r\n\t\t\tstyle={{ height: size }}\r\n\t\t\tonMouseDown={onMouseDown}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-progress-bar\", barClass, {\r\n\t\t\t\t\t\"no-transition\": dragging,\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{ width: `${value}%` }}\r\n\t\t\t>\r\n\t\t\t\t{renderCursor && (\r\n\t\t\t\t\t<a className='i-progress-cursor'>\r\n\t\t\t\t\t\t{renderCursor(value ?? 0)}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Line;\r\n","import { useMouseMove, useMouseUp } from \"@p/js/hooks\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { MouseEvent, useEffect, useMemo, useRef } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport Circle from \"./circle\";\r\nimport \"./index.css\";\r\nimport Line from \"./line\";\r\nimport { IProgress } from \"./type\";\r\n\r\nconst Progress = (props: IProgress): JSX.Element => {\r\n\tconst {\r\n\t\tvalue = 0,\r\n\t\tsize = 8,\r\n\t\theight = 40,\r\n\t\tprecision = 0,\r\n\t\tstyle,\r\n\t\tdraggable = true,\r\n\t\ttype = \"line\",\r\n\t\tbarClass,\r\n\t\tlabel,\r\n\t\tlabelInline,\r\n\t\tclassName,\r\n\t\trenderCursor,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\tconst ref = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t\tdragging: false,\r\n\t\twidth: 0,\r\n\t\tstart: 0,\r\n\t});\r\n\r\n\tconst toFixedValue = useMemo(() => {\r\n\t\tlet value = +state.value.toFixed(precision);\r\n\t\tvalue = Math.min(100, value);\r\n\t\tvalue = Math.max(0, value);\r\n\r\n\t\treturn value;\r\n\t}, [state.value, precision]);\r\n\r\n\tconst handleMouseDown = useMemoizedFn((e: MouseEvent) => {\r\n\t\tif (!ref.current || !draggable) return;\r\n\r\n\t\tconst rect = ref.current.getBoundingClientRect();\r\n\t\tconst value = ((e.pageX - rect.left) * 100) / rect.width;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tvalue,\r\n\t\t\twidth: rect.width,\r\n\t\t\tstart: rect.left,\r\n\t\t\tdragging: true,\r\n\t\t});\r\n\t});\r\n\r\n\tconst handleMouseMove = useMemoizedFn((e: any) => {\r\n\t\tif (!state.dragging || !draggable) return;\r\n\t\te.preventDefault();\r\n\t\tconst { start, width } = state;\r\n\t\tconst offset = e.pageX - start;\r\n\r\n\t\tif (offset < 0 || offset > width) return;\r\n\r\n\t\tstate.value = ((e.pageX - start) * 100) / width;\r\n\t});\r\n\r\n\tconst handleMouseUp = useMemoizedFn(() => {\r\n\t\tif (!state.dragging || !draggable) return;\r\n\r\n\t\tonChange?.(toFixedValue);\r\n\t\tstate.dragging = false;\r\n\t});\r\n\r\n\tuseMouseMove(handleMouseMove);\r\n\tuseMouseUp(handleMouseUp);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (value > 100) {\r\n\t\t\tstate.value = 100;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (value < 0) {\r\n\t\t\tstate.value = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-input-label\", className, {\r\n\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{label && <span className='i-input-label-text'>{label}</span>}\r\n\r\n\t\t\t{type === \"line\" && (\r\n\t\t\t\t<Line\r\n\t\t\t\t\tref={ref}\r\n\t\t\t\t\tsize={size}\r\n\t\t\t\t\tbarClass={barClass}\r\n\t\t\t\t\tdragging={state.dragging}\r\n\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\trenderCursor={renderCursor}\r\n\t\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{type === \"circle\" && (\r\n\t\t\t\t<Circle value={state.value} height={height} size={size} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Progress;\r\n","import { exitFullScreen, fullScreen } from \"@p/js/utils\";\r\nimport {\r\n\tFullscreenExitRound,\r\n\tFullscreenRound,\r\n\tPauseRound,\r\n\tPlayArrowRound,\r\n\tStopRound,\r\n\tVolumeDownRound,\r\n\tVolumeOffRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { forwardRef, useEffect, useImperativeHandle, useRef } from \"react\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport Progress from \"../progress\";\r\nimport Text from \"../text\";\r\nimport \"./index.css\";\r\nimport { IVideo, RefVideo } from \"./type\";\r\n\r\nconst Video = forwardRef<RefVideo, IVideo>((props, ref): JSX.Element => {\r\n\tconst {\r\n\t\tstyle,\r\n\t\thideControls,\r\n\t\tautoplay,\r\n\t\tmuted,\r\n\t\tvolume = 50,\r\n\t\theight,\r\n\t\twidth,\r\n\t\tuseOriginControls,\r\n\t\ttimeProgressProps = {\r\n\t\t\tbarClass: \"bg-2\",\r\n\t\t},\r\n\t\tvolumeProgressProps = {\r\n\t\t\tbarClass: \"bg-1\",\r\n\t\t},\r\n\t\tclassName,\r\n\t\tonFullScreenChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst state = useReactive({\r\n\t\tplaying: autoplay,\r\n\t\tvolume: muted ? 0 : volume,\r\n\t\tvolumeCache: 0,\r\n\t\tmuted,\r\n\t\tcurrent: 0,\r\n\t\tduration: 0,\r\n\t\tisFullscreen: false,\r\n\t});\r\n\tconst $v = useRef<HTMLVideoElement>(null);\r\n\r\n\tconst timeUpdateListener = (e) => {\r\n\t\tconst tar = e.target;\r\n\t\tif (tar.paused) return;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tcurrent: tar.currentTime,\r\n\t\t});\r\n\t};\r\n\r\n\tconst playChangeListener = (e) => {\r\n\t\tstate.playing = !e.target.paused;\r\n\t};\r\n\r\n\tconst fsChangeListener = (e) => {\r\n\t\tconst tar = $v.current?.parentElement;\r\n\t\tif (!tar) return;\r\n\r\n\t\tstate.isFullscreen = document.fullscreenElement === tar;\r\n\t};\r\n\r\n\tconst volumeChangeListener = (e) => {\r\n\t\tconst tar = e.target;\r\n\t\tObject.assign(state, {\r\n\t\t\tvolume: tar.volume * 100,\r\n\t\t\tmuted: tar.volume === 0,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handlePlay = () => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.paused ? v.play() : v.pause();\r\n\t};\r\n\r\n\tconst handleReady = (e) => {\r\n\t\tconst tar = e.target;\r\n\t\tObject.assign(state, {\r\n\t\t\tduration: tar.duration,\r\n\t\t\tcurrent: tar.currentTime,\r\n\t\t});\r\n\t\ttar.volume = state.volume / 100;\r\n\t};\r\n\r\n\tconst handleMuted = () => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tif (v.volume > 0) {\r\n\t\t\tstate.volumeCache = v.volume;\r\n\t\t\tv.volume = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tv.volume = state.volumeCache === 0 ? 0.5 : state.volumeCache;\r\n\t};\r\n\r\n\tconst handleStop = () => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.currentTime = 0;\r\n\t\tv.pause();\r\n\t};\r\n\r\n\tconst handleFullscreen = (fs?: boolean) => {\r\n\t\tconst tar = $v.current?.parentElement;\r\n\t\tif (!tar) return;\r\n\r\n\t\tstate.isFullscreen ? exitFullScreen() : fullScreen(tar);\r\n\t\tonFullScreenChange?.(!state.isFullscreen);\r\n\t};\r\n\r\n\tconst handleUpdateTime = (t) => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.currentTime = (state.duration * t) / 100;\r\n\t};\r\n\r\n\tconst handleUpdateVolume = (t) => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.volume = t / 100;\r\n\t};\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\tplay: () => {\r\n\t\t\tconst v = $v.current;\r\n\t\t\tif (!v) return;\r\n\r\n\t\t\tv.play();\r\n\t\t},\r\n\t\tpause: () => {\r\n\t\t\tconst v = $v.current;\r\n\t\t\tif (!v) return;\r\n\r\n\t\t\tv.pause();\r\n\t\t},\r\n\t\tstop: handleStop,\r\n\t\tfullscreen: handleFullscreen,\r\n\t\tgetVideo: () => $v.current,\r\n\t}));\r\n\r\n\tuseEffect(() => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.addEventListener(\"timeupdate\", timeUpdateListener);\r\n\t\tv.addEventListener(\"play\", playChangeListener);\r\n\t\tv.addEventListener(\"pause\", playChangeListener);\r\n\t\tv.addEventListener(\"volumechange\", volumeChangeListener);\r\n\t\tdocument.addEventListener(\"fullscreenchange\", fsChangeListener);\r\n\r\n\t\treturn () => {\r\n\t\t\tv.removeEventListener(\"timeupdate\", timeUpdateListener);\r\n\t\t\tv.removeEventListener(\"play\", playChangeListener);\r\n\t\t\tv.removeEventListener(\"pause\", playChangeListener);\r\n\t\t\tv.removeEventListener(\"volumechange\", volumeChangeListener);\r\n\t\t\tdocument.removeEventListener(\"fullscreenchange\", fsChangeListener);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-video\", className)}\r\n\t\t\tstyle={{ height, width, ...style }}\r\n\t\t\tonClick={handlePlay}\r\n\t\t\tonDoubleClick={() => handleFullscreen()}\r\n\t\t>\r\n\t\t\t<video\r\n\t\t\t\tref={$v}\r\n\t\t\t\tonCanPlay={handleReady}\r\n\t\t\t\t{...restProps}\r\n\t\t\t\tcontrols={useOriginControls}\r\n\t\t\t/>\r\n\r\n\t\t\t{!hideControls && !useOriginControls && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='i-video-controls'\r\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className='i-video-control flex-1'>\r\n\t\t\t\t\t\t<Button.Toggle\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tafter={<Icon icon={<PauseRound />} />}\r\n\t\t\t\t\t\t\tactive={state.playing}\r\n\t\t\t\t\t\t\tonClick={handlePlay}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<PlayArrowRound />} />\r\n\t\t\t\t\t\t</Button.Toggle>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tonClick={handleStop}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<StopRound />} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<span className='i-video-times'>\r\n\t\t\t\t\t\t\t<Text.Time seconds={state.current} /> /\r\n\t\t\t\t\t\t\t<Text.Time seconds={state.duration} />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<Progress\r\n\t\t\t\t\t\t\tclassName='mr-8'\r\n\t\t\t\t\t\t\t{...timeProgressProps}\r\n\t\t\t\t\t\t\tvalue={(state.current / state.duration) * 100}\r\n\t\t\t\t\t\t\tonChange={handleUpdateTime}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='i-video-control'>\r\n\t\t\t\t\t\t<Button.Toggle\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tafter={<Icon icon={<FullscreenExitRound />} />}\r\n\t\t\t\t\t\t\tactive={state.isFullscreen}\r\n\t\t\t\t\t\t\tonClick={() => handleFullscreen()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<FullscreenRound />} />\r\n\t\t\t\t\t\t</Button.Toggle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='i-video-control'>\r\n\t\t\t\t\t\t<Button.Toggle\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tactive={state.volume <= 0}\r\n\t\t\t\t\t\t\tafter={\r\n\t\t\t\t\t\t\t\t<Icon icon={<VolumeOffRound />} size='1.2em' />\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={handleMuted}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<VolumeDownRound />} />\r\n\t\t\t\t\t\t</Button.Toggle>\r\n\t\t\t\t\t\t<Progress\r\n\t\t\t\t\t\t\tstyle={{ width: 100 }}\r\n\t\t\t\t\t\t\tclassName='mr-8'\r\n\t\t\t\t\t\t\t{...volumeProgressProps}\r\n\t\t\t\t\t\t\tvalue={state.volume}\r\n\t\t\t\t\t\t\tonChange={handleUpdateVolume}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Video;\r\n","import Icon from \"@p/components/icon\";\r\nimport Video from \"@p/components/video\";\r\nimport { FeedOutlined } from \"@ricons/material\";\r\nimport { TFileType, TPreviewItem } from \"./type\";\r\n\r\nexport default function renderFile(props: TPreviewItem) {\r\n\tconst { name, suffix, type } = props;\r\n\r\n\tswitch (type) {\r\n\t\tcase TFileType.IMAGE:\r\n\t\t\treturn <img src={props.src} />;\r\n\t\tcase TFileType.VIDEO:\r\n\t\t\treturn <Video {...props} />;\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<div className='i-preview-unknown'>\r\n\t\t\t\t\t<Icon icon={<FeedOutlined />} size='3em' />\r\n\t\t\t\t\t<h5 className='mt-4'>{name || suffix || \"?\"}</h5>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n","import { Button, Icon } from \"@p\";\r\nimport {\r\n\tAspectRatioRound,\r\n\tCloseRound,\r\n\tFileDownloadOutlined,\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n\tOpenInNewRound,\r\n\tRotateLeftRound,\r\n\tRotateRightRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport { throttle } from \"radash\";\r\nimport { useMemo, useRef } from \"react\";\r\nimport { getFileType, getSuffixByUrl } from \"../utils\";\r\nimport DefaultRenderFile from \"./renderFile\";\r\nimport { IPreview, TFileType, TPreviewItem } from \"./type\";\r\n\r\nexport default function Content(props: IPreview) {\r\n\tconst {\r\n\t\titems = [],\r\n\t\tinitial = 0,\r\n\t\trenderFile = DefaultRenderFile,\r\n\t\tonRotate,\r\n\t\tonChange,\r\n\t\tonClose,\r\n\t\tonZoom,\r\n\t} = props;\r\n\tconst state = useReactive({\r\n\t\tcurrent: initial,\r\n\t\trotate: 0,\r\n\t\tscale: 1,\r\n\t\ttranslate: `0, 0`,\r\n\t});\r\n\tconst box = useRef<HTMLDivElement>(null);\r\n\r\n\tconst files = useMemo(() => {\r\n\t\treturn items.map((item) => {\r\n\t\t\tconst o: TPreviewItem = {\r\n\t\t\t\tsrc: \"\",\r\n\t\t\t};\r\n\t\t\tif (typeof item === \"string\") {\r\n\t\t\t\to.src = item;\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(o, item);\r\n\t\t\t}\r\n\r\n\t\t\to.suffix = getSuffixByUrl(o.src) || \"\";\r\n\t\t\to.type = getFileType(o.suffix, item[\"type\"]);\r\n\r\n\t\t\treturn o;\r\n\t\t});\r\n\t}, [items]);\r\n\r\n\tconst { file, content } = useMemo(() => {\r\n\t\tconst file = files[state.current];\r\n\t\tconst content = renderFile(file);\r\n\r\n\t\treturn {\r\n\t\t\tfile,\r\n\t\t\tcontent,\r\n\t\t};\r\n\t}, [state.current, items]);\r\n\r\n\tconst isImage = file.type === TFileType.IMAGE;\r\n\r\n\tconst handleSwitch = (next: number) => {\r\n\t\tconst l = files.length;\r\n\t\tconst { current: before } = state;\r\n\t\tif (next >= l) {\r\n\t\t\tstate.current = 0;\r\n\t\t} else if (next < 0) {\r\n\t\t\tstate.current = l - 1;\r\n\t\t} else {\r\n\t\t\tstate.current = next;\r\n\t\t}\r\n\t\tonChange?.(state.current, before);\r\n\r\n\t\tstate.rotate = files[state.current].rotate || 0;\r\n\r\n\t\tif (state.scale !== 1) {\r\n\t\t\tstate.scale = 1;\r\n\t\t\tonZoom?.(1);\r\n\t\t}\r\n\t\tonRotate?.(state.rotate);\r\n\t};\r\n\r\n\tconst handleRotate = (deg: number) => {\r\n\t\tstate.rotate += deg;\r\n\r\n\t\tonRotate?.(state.rotate);\r\n\t};\r\n\r\n\tconst handleMouseWheel = throttle({ interval: 60 }, (e) => {\r\n\t\tif (!isImage) return;\r\n\t\tlet after = state.scale + (e.deltaY < 0 ? 0.05 : -0.05);\r\n\t\tif (after > 2) after = 2;\r\n\t\tif (after < 0.25) after = 0.25;\r\n\r\n\t\tonZoom?.(after);\r\n\t\tstate.scale = after;\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tref={box}\r\n\t\t\t\tclassName='i-preview-content'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\ttransform: `rotate(${state.rotate}deg) scale(${state.scale})`,\r\n\t\t\t\t}}\r\n\t\t\t\tonWheel={handleMouseWheel}\r\n\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='i-preview-controls'>\r\n\t\t\t\t<Button square flat onClick={onClose}>\r\n\t\t\t\t\t<Icon icon={<CloseRound />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t{files.length > 1 && (\r\n\t\t\t\t\t<span className='px-8'>\r\n\t\t\t\t\t\t{state.current + 1} / {files.length}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{state.scale !== 1 && (\r\n\t\t\t\t\t<Button flat onClick={() => (state.scale = 1)}>\r\n\t\t\t\t\t\t<Icon icon={<AspectRatioRound />} />\r\n\t\t\t\t\t\t<span className='mt-4'>\r\n\t\t\t\t\t\t\t{(state.scale * 100).toFixed(0)}%\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t<Button square flat href={file.src} target='_blank'>\r\n\t\t\t\t\t<Icon icon={<OpenInNewRound />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button square flat href={file.src} download target='_blank'>\r\n\t\t\t\t\t<Icon icon={<FileDownloadOutlined />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button square flat onClick={() => handleRotate(90)}>\r\n\t\t\t\t\t<Icon icon={<RotateRightRound />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button square flat onClick={() => handleRotate(-90)}>\r\n\t\t\t\t\t<Icon icon={<RotateLeftRound />} />\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t\t{files.length > 1 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tonClick={() => handleSwitch(state.current - 1)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<KeyboardArrowLeftRound />} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tonClick={() => handleSwitch(state.current + 1)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<KeyboardArrowRightRound />} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n","import HookModal from \"@p/components/modal/hookModal\";\r\nimport { RefHookModal } from \"@p/components/modal/type\";\r\nimport { useRef } from \"react\";\r\nimport { renderNode } from \"../utils\";\r\nimport Content from \"./content\";\r\nimport \"./index.css\";\r\nimport { IPreview } from \"./type\";\r\n\r\nexport default function usePreview() {\r\n\tconst ref = useRef<RefHookModal>(null);\r\n\r\n\tconst preview = (config: IPreview) => {\r\n\t\tconst { items, modalProps, onClose, ...restProps } = config;\r\n\r\n\t\tconst handleClose = () => {\r\n\t\t\tonClose?.();\r\n\t\t\tunMount?.();\r\n\t\t};\r\n\r\n\t\tconst unMount = renderNode(\r\n\t\t\t<HookModal\r\n\t\t\t\tref={ref}\r\n\t\t\t\tvisible\r\n\t\t\t\tclassName='i-preview'\r\n\t\t\t\tcustomized\r\n\t\t\t\tshadow={false}\r\n\t\t\t\t{...modalProps}\r\n\t\t\t\tchildren={\r\n\t\t\t\t\t<Content\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t\titems={items}\r\n\t\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\t\tref.current?.update({ visible: false });\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tfixed\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\treturn preview;\r\n}\r\n","import { useIntersectionObserver } from \"@p/js/hooks\";\r\nimport usePreview from \"@p/js/usePreview\";\r\nimport { TFileType } from \"@p/js/usePreview/type\";\r\nimport { HideImageTwotone } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport Loading from \"../loading\";\r\nimport \"./index.css\";\r\nimport List from \"./list\";\r\nimport { IImage } from \"./type\";\r\n\r\nconst Image = (props: IImage): JSX.Element => {\r\n\tconst {\r\n\t\tsrc,\r\n\t\tround,\r\n\t\tsize,\r\n\t\tinitSize,\r\n\t\tlazyload,\r\n\t\tfallback = (\r\n\t\t\t<Icon icon={<HideImageTwotone />} size='2em' className='color-5' />\r\n\t\t),\r\n\t\tfit,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tusePreview: previewable,\r\n\t\tonLoad,\r\n\t\tonError,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive<{ status?: string }>({\r\n\t\tstatus: \"loading\",\r\n\t});\r\n\tconst ref = useRef<HTMLImageElement>(null);\r\n\tconst wh = fit ? \"100%\" : undefined;\r\n\r\n\tconst { observe, unobserve } = useIntersectionObserver();\r\n\tconst preview = usePreview();\r\n\r\n\tconst handleError = (err) => {\r\n\t\tonError?.(err);\r\n\t\tstate.status = \"error\";\r\n\t};\r\n\r\n\tconst handleLoad = (e) => {\r\n\t\tonLoad?.(e);\r\n\t\tstate.status = undefined;\r\n\t};\r\n\r\n\tconst handleClick = (e) => {\r\n\t\tonClick?.(e);\r\n\r\n\t\tpreviewable &&\r\n\t\t\tsrc &&\r\n\t\t\tpreview({\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsrc,\r\n\t\t\t\t\t\ttype: TFileType.IMAGE,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!src) return;\r\n\r\n\t\tstate.status = \"loading\";\r\n\r\n\t\tif (!lazyload || !ref.current) return;\r\n\r\n\t\tobserve(ref.current, (tar: HTMLElement, visible: boolean) => {\r\n\t\t\tif (!visible) return;\r\n\r\n\t\t\ttar.setAttribute(\"src\", tar.dataset.src || \"\");\r\n\t\t\tunobserve(tar);\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tref.current && unobserve(ref.current);\r\n\t\t};\r\n\t}, [src]);\r\n\r\n\trestProps[lazyload ? \"data-src\" : \"src\"] = src;\r\n\tconst iSize = state.status === \"loading\" ? initSize : undefined;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\twidth: size ?? iSize,\r\n\t\t\t\theight: size ?? iSize,\r\n\t\t\t\t...style,\r\n\t\t\t}}\r\n\t\t\tclassName={classNames(\"i-image\", className, {\r\n\t\t\t\trounded: round,\r\n\t\t\t\t[`i-image-${state.status}`]: state.status,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{state.status === \"error\" ? (\r\n\t\t\t\tfallback\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{src && (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\t\tstyle={{ objectFit: fit, width: wh, height: wh }}\r\n\t\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t\t\tonLoad={handleLoad}\r\n\t\t\t\t\t\t\tonError={handleError}\r\n\t\t\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{src && state.status === \"loading\" && <Loading />}\r\n\r\n\t\t\t\t\t{children && <div className='i-image-text'>{children}</div>}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nImage.List = List;\r\n\r\nexport default Image;\r\n","import usePreview from \"@p/js/usePreview\";\r\nimport { TPreviewItem } from \"@p/js/usePreview/type\";\r\nimport { getFileType, getSuffixByUrl } from \"@p/js/utils\";\r\nimport { useMemo } from \"react\";\r\nimport Flex from \"../flex\";\r\nimport Image from \"./image\";\r\nimport { IImageList } from \"./type\";\r\n\r\nexport default function List(props: IImageList) {\r\n\tconst {\r\n\t\titems = [],\r\n\t\tgap = 8,\r\n\t\tcolumns,\r\n\t\twrap,\r\n\t\tdirection,\r\n\t\tusePreview: previewable,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst preview = usePreview();\r\n\r\n\tconst files = useMemo(() => {\r\n\t\treturn items.map((item) => {\r\n\t\t\tconst o: TPreviewItem = {\r\n\t\t\t\tsrc: \"\",\r\n\t\t\t};\r\n\t\t\tif (typeof item === \"string\") {\r\n\t\t\t\to.src = item;\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(o, item);\r\n\t\t\t}\r\n\r\n\t\t\to.suffix = getSuffixByUrl(o.src) || \"\";\r\n\t\t\to.type = getFileType(o.suffix, item[\"type\"]);\r\n\r\n\t\t\treturn o;\r\n\t\t});\r\n\t}, [items]);\r\n\r\n\tconst handleClick = (e, i) => {\r\n\t\tonClick?.(e);\r\n\r\n\t\tpreviewable &&\r\n\t\t\tpreview({\r\n\t\t\t\titems: files,\r\n\t\t\t\tinitial: i,\r\n\t\t\t});\r\n\t};\r\n\r\n\tif (!files.length) return \"\";\r\n\r\n\treturn (\r\n\t\t<Flex\r\n\t\t\tclassName='i-image-list'\r\n\t\t\tgap={gap}\r\n\t\t\tcolumns={columns}\r\n\t\t\twrap={wrap}\r\n\t\t\tdirection={direction}\r\n\t\t>\r\n\t\t\t{files.map((img, i) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tsrc={img.src}\r\n\t\t\t\t\t\tsize={60}\r\n\t\t\t\t\t\tusePreview={false}\r\n\t\t\t\t\t\tonClick={(e) => handleClick(e, i)}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Flex>\r\n\t);\r\n}\r\n","import { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { uid } from \"radash\";\r\nimport {\r\n\tReactNode,\r\n\tforwardRef,\r\n\tisValidElement,\r\n\tuseEffect,\r\n\tuseRef,\r\n} from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport \"./index.css\";\r\nimport type { IMessage, IMessageItem, THeights, TMessageQueue } from \"./type\";\r\n\r\nconst AlignMap = {\r\n\tleft: \"flex-start\",\r\n\tcenter: \"center\",\r\n\tright: \"flex-end\",\r\n};\r\n\r\nconst GlobalConfig = {\r\n\talign: \"center\",\r\n\toffset: \"12px\",\r\n\tgap: 12,\r\n\tmax: 0,\r\n};\r\n\r\nconst ItemDefaultConfig = {\r\n\tduration: 3000,\r\n\tclosable: true,\r\n\tactive: false,\r\n};\r\n\r\nconst container = createContainer();\r\nconst handler = {\r\n\tcallout(item: IMessage) {},\r\n\tclose() {},\r\n};\r\n\r\nconst queue: TMessageQueue = {\r\n\tleft: [],\r\n\tcenter: [],\r\n\tright: [],\r\n};\r\nconst heights: THeights = {\r\n\tleft: [],\r\n\tcenter: [],\r\n\tright: [],\r\n};\r\n\r\ncreateRoot(container).render(<Messages />);\r\n\r\nconst MessageItem = forwardRef<HTMLDivElement, IMessageItem>(function (\r\n\t{ active, content, top, className, style, onClick },\r\n\tref\r\n) {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classNames(\"i-message\", className, {\r\n\t\t\t\t\"i-message-active\": active,\r\n\t\t\t})}\r\n\t\t\tstyle={{\r\n\t\t\t\t...style,\r\n\t\t\t\ttop,\r\n\t\t\t}}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t{content}\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nfunction Messages() {\r\n\tconst ref = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive<{\r\n\t\ttops: THeights;\r\n\t\titems: TMessageQueue;\r\n\t}>({\r\n\t\titems: {\r\n\t\t\tleft: [],\r\n\t\t\tcenter: [],\r\n\t\t\tright: [],\r\n\t\t},\r\n\t\ttops: {\r\n\t\t\tleft: [],\r\n\t\t\tcenter: [],\r\n\t\t\tright: [],\r\n\t\t},\r\n\t});\r\n\tconst offsetTop = {\r\n\t\tleft: 0,\r\n\t\tcenter: 0,\r\n\t\tright: 0,\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tObject.assign(handler, {\r\n\t\t\tcallout: function (item: IMessage) {\r\n\t\t\t\tconst { align = \"center\", unshift, onShow } = item;\r\n\t\t\t\tconst size = queue[align][unshift ? \"unshift\" : \"push\"](item);\r\n\t\t\t\tstate.items[align] = [...queue[align]];\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst h = ref.current?.offsetHeight || 0;\r\n\r\n\t\t\t\t\tqueue[align][unshift ? 0 : size - 1].active = true;\r\n\t\t\t\t\tstate.items[align] = [...queue[align]];\r\n\t\t\t\t\theights[align][unshift ? \"unshift\" : \"push\"](h);\r\n\t\t\t\t\tstate.tops[align] = [...heights[align]];\r\n\t\t\t\t\tonShow?.();\r\n\t\t\t\t}, 0);\r\n\r\n\t\t\t\titem.duration !== 0 &&\r\n\t\t\t\t\tsetTimeout(this.close.bind(item), item.duration);\r\n\t\t\t},\r\n\t\t\tclose: function () {\r\n\t\t\t\tconst item = this as IMessage;\r\n\t\t\t\tconst { align = \"center\", onHide } = item;\r\n\t\t\t\tconst index = queue[align].findIndex((i) => i.id === item.id);\r\n\t\t\t\tif (index < 0) return;\r\n\r\n\t\t\t\tqueue[align][index].active = false;\r\n\t\t\t\tstate.items[align] = [...queue[align]];\r\n\r\n\t\t\t\titem.timer = setTimeout(() => {\r\n\t\t\t\t\tconst index = queue[align].findIndex(\r\n\t\t\t\t\t\t(i) => i.id === item.id\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tqueue[align].splice(index, 1);\r\n\t\t\t\t\theights[align].splice(index, 1);\r\n\t\t\t\t\tstate.tops[align] = [...heights[align]];\r\n\t\t\t\t\tstate.items[align] = [...queue[align]];\r\n\t\t\t\t\titem.timer && clearTimeout(item.timer);\r\n\t\t\t\t\tonHide?.();\r\n\t\t\t\t}, 240);\r\n\t\t\t},\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst renderItems = (item, i) => {\r\n\t\tif (!item) return <></>;\r\n\r\n\t\tconst { id, active, content, align = \"center\", className } = item;\r\n\t\toffsetTop[align] += state.tops[align][i - 1] || 0;\r\n\t\tconst top = GlobalConfig.gap * i + offsetTop[align];\r\n\r\n\t\treturn (\r\n\t\t\t<MessageItem\r\n\t\t\t\tkey={id}\r\n\t\t\t\tref={ref}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tcontent={content}\r\n\t\t\t\ttop={top}\r\n\t\t\t\tclassName={className}\r\n\t\t\t\tstyle={{ alignSelf: AlignMap[align] }}\r\n\t\t\t\tonClick={handler.close.bind(item)}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='i-messages'>\r\n\t\t\t{state.items.left.map(renderItems)}\r\n\t\t\t{state.items.center.map(renderItems)}\r\n\t\t\t{state.items.right.map(renderItems)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function setMessageConfig(config: IMessage) {\r\n\tObject.assign(GlobalConfig, config);\r\n}\r\n\r\nexport default function message(config: IMessage | ReactNode) {\r\n\tif (\r\n\t\t[\"string\", \"number\"].includes(typeof config) ||\r\n\t\tisValidElement(config)\r\n\t) {\r\n\t\tconfig = { content: config as ReactNode };\r\n\t}\r\n\r\n\tconfig = Object.assign(\r\n\t\t{ id: uid(7) },\r\n\t\tItemDefaultConfig,\r\n\t\tconfig as IMessage\r\n\t);\r\n\r\n\thandler.callout(config as IMessage);\r\n\r\n\treturn handler.close.bind(config);\r\n}\r\n\r\nfunction createContainer(direction?: string) {\r\n\tconst container = document.createElement(\"div\");\r\n\tcontainer.dataset.id = \"messages\";\r\n\tdocument.body.append(container);\r\n\r\n\treturn container;\r\n}\r\n","import classNames from \"classnames\";\r\nimport { useState } from \"react\";\r\nimport Loading from \"../loading\";\r\nimport { IPageItem } from \"./type\";\r\n\r\nconst Page = (props: IPageItem) => {\r\n\tconst { page, active, children, onChange } = props;\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst handleClick = async () => {\r\n\t\tif (active || loading) return;\r\n\r\n\t\tsetLoading(true);\r\n\t\tawait onChange?.(page);\r\n\t\tsetLoading(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\tclassName={classNames(\"i-page\", {\r\n\t\t\t\t\"i-page-active\": active,\r\n\t\t\t\t\"i-page-loading\": loading,\r\n\t\t\t\t\"i-page-disabled\": false,\r\n\t\t\t})}\r\n\t\t\tdata-page={page}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t{loading && <Loading />}\r\n\t\t\t{children}\r\n\t\t</a>\r\n\t);\r\n};\r\n\r\nexport default Page;\r\n","import {\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n\tMoreHorizRound,\r\n} from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport \"./index.css\";\r\nimport Page from \"./page\";\r\nimport { IPagination } from \"./type\";\r\n\r\nconst Pagination = (props: IPagination): JSX.Element => {\r\n\tconst {\r\n\t\tpage: defaultPage = 1,\r\n\t\tsize = 10,\r\n\t\ttotal = 0,\r\n\t\tsibling = 2,\r\n\t\tprev = <Icon icon={<KeyboardArrowLeftRound />} />,\r\n\t\tnext = <Icon icon={<KeyboardArrowRightRound />} />,\r\n\t\tsimple,\r\n\t\tjumper,\r\n\t\tclassName,\r\n\t\trenderEllipsis = () => (\r\n\t\t\t<Icon icon={<MoreHorizRound />} className='color-7' />\r\n\t\t),\r\n\t\trenderPage = (i) => i,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst [page, setPage] = useState(defaultPage);\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst totalPage = useMemo(() => Math.ceil(total / size), [size, total]);\r\n\r\n\tconst [start, end, loop] = useMemo(() => {\r\n\t\tconst start = Math.max(1, page - sibling);\r\n\t\tconst end = Math.min(totalPage, page + sibling);\r\n\r\n\t\treturn [\r\n\t\t\tstart,\r\n\t\t\tend,\r\n\t\t\tArray.from({ length: end - start + 1 }).map((n, i) => start + i),\r\n\t\t];\r\n\t}, [page, totalPage, sibling]);\r\n\r\n\tif (totalPage <= page && page === 1) return <></>;\r\n\r\n\tconst handlePageChange = async (p?: number) => {\r\n\t\tif (!onChange || loading) return;\r\n\t\tsetLoading(true);\r\n\r\n\t\treturn new Promise<void>(async (resolve) => {\r\n\t\t\tif (p === undefined) return;\r\n\t\t\tawait onChange(p);\r\n\t\t\tsetPage(p);\r\n\t\t\tsetLoading(false);\r\n\t\t\tresolve();\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => setPage(defaultPage), [defaultPage]);\r\n\r\n\treturn (\r\n\t\t<div className={classNames(\"i-pagination\", className)} {...restProps}>\r\n\t\t\t{prev && (\r\n\t\t\t\t<Page page={page - 1 || 1} onChange={handlePageChange}>\r\n\t\t\t\t\t{prev}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\r\n\t\t\t{start > 1 && (\r\n\t\t\t\t<Page page={1} onChange={handlePageChange}>\r\n\t\t\t\t\t{renderPage(1)}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\r\n\t\t\t{start > 2 && renderEllipsis()}\r\n\r\n\t\t\t{loop.map((p) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Page\r\n\t\t\t\t\t\tkey={p}\r\n\t\t\t\t\t\tpage={p}\r\n\t\t\t\t\t\tactive={p === page}\r\n\t\t\t\t\t\tonChange={handlePageChange}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{renderPage(p)}\r\n\t\t\t\t\t</Page>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\r\n\t\t\t{end < totalPage - 1 && renderEllipsis()}\r\n\r\n\t\t\t{end < totalPage && (\r\n\t\t\t\t<Page page={totalPage} onChange={handlePageChange}>\r\n\t\t\t\t\t{renderPage(totalPage)}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\r\n\t\t\t{next && (\r\n\t\t\t\t<Page page={page + 1} onChange={handlePageChange}>\r\n\t\t\t\t\t{next}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Pagination;\r\n","import { InfoOutlined } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport { MouseEvent } from \"react\";\r\nimport Button from \"../button\";\r\nimport { IButton } from \"../button/type\";\r\nimport Flex from \"../flex\";\r\nimport Icon from \"../icon\";\r\nimport Popup from \"../popup\";\r\nimport \"./index.css\";\r\nimport { IPopconfirm } from \"./type\";\r\n\r\nconst defaultOk = {\r\n\tchildren: \"\",\r\n};\r\n\r\nconst defaultCancel = {\r\n\tchildren: \"\",\r\n\tsecondary: true,\r\n};\r\n\r\nconst Popconfirm = (props: IPopconfirm): JSX.Element => {\r\n\tconst {\r\n\t\ttrigger = \"click\",\r\n\t\tvisible,\r\n\t\ticon = <Icon icon={<InfoOutlined />} className='error' />,\r\n\t\tcontent,\r\n\t\tokButtonProps,\r\n\t\tcancelButtonProps,\r\n\t\tchildren,\r\n\t\talign = \"end\",\r\n\t\tposition = \"top\",\r\n\t\toffset = 12,\r\n\t\textra,\r\n\t\tonOk,\r\n\t\tonClose,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tloading: false,\r\n\t\tvisible,\r\n\t});\r\n\r\n\tconst ok: IButton = okButtonProps\r\n\t\t? Object.assign({}, defaultOk, okButtonProps)\r\n\t\t: defaultOk;\r\n\tconst cancel: IButton = cancelButtonProps\r\n\t\t? Object.assign({}, defaultCancel, cancelButtonProps)\r\n\t\t: defaultCancel;\r\n\r\n\tconst handleVisibleChange = (v: boolean) => {\r\n\t\tstate.visible = v;\r\n\t\trestProps.onVisibleChange?.(v);\r\n\t};\r\n\r\n\tconst handleOk = async (e: MouseEvent<HTMLElement>) => {\r\n\t\tstate.loading = true;\r\n\t\tok.onClick?.(e);\r\n\t\tawait onOk?.();\r\n\t\tstate.loading = false;\r\n\t\tstate.visible = false;\r\n\t};\r\n\r\n\tconst handleCancel = async (e: MouseEvent<HTMLElement>) => {\r\n\t\tcancel.onClick?.(e);\r\n\t\tawait onClose?.();\r\n\t\tstate.visible = false;\r\n\t};\r\n\r\n\tconst popconfirmContent = (\r\n\t\t<div className='i-popconfirm'>\r\n\t\t\t<Flex gap={12}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<div className='i-popconfirm-content'>{content}</div>\r\n\t\t\t</Flex>\r\n\r\n\t\t\t<Flex\r\n\t\t\t\tgap={12}\r\n\t\t\t\tjustify='flex-end'\r\n\t\t\t\tclassName='mt-8 i-popconfirm-footer'\r\n\t\t\t>\r\n\t\t\t\t{cancelButtonProps !== null && (\r\n\t\t\t\t\t<Button {...cancel} onClick={handleCancel} />\r\n\t\t\t\t)}\r\n\t\t\t\t{extra}\r\n\t\t\t\t{okButtonProps !== null && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tloading={state.loading}\r\n\t\t\t\t\t\t{...ok}\r\n\t\t\t\t\t\tonClick={handleOk}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Flex>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\tcontent={popconfirmContent}\r\n\t\t\t{...restProps}\r\n\t\t\ttrigger={trigger}\r\n\t\t\tvisible={state.visible}\r\n\t\t\talign={align}\r\n\t\t\toffset={offset}\r\n\t\t\tposition={position}\r\n\t\t\tonVisibleChange={handleVisibleChange}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nexport default Popconfirm;\r\n","import classNames from \"classnames\";\r\nimport { ChangeEvent } from \"react\";\r\nimport { IRadioItem } from \"./type\";\r\n\r\nexport default function RadioItem(props: IRadioItem) {\r\n\tconst {\r\n\t\ttype = \"default\",\r\n\t\tname,\r\n\t\tvalue,\r\n\t\tchecked,\r\n\t\tdisabled,\r\n\t\tchildren,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\tconst handleChange = (e: ChangeEvent) => {\r\n\t\tonChange?.(value, e);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<label className={classNames(\"i-radio-item\", { disabled })}>\r\n\t\t\t<input\r\n\t\t\t\ttype='radio'\r\n\t\t\t\tname={name}\r\n\t\t\t\tchecked={checked}\r\n\t\t\t\tclassName={classNames(\"i-radio-input\", `i-radio-${type}`)}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<span className='i-radio-text'>{children}</span>\r\n\t\t</label>\r\n\t);\r\n}\r\n","import { formatOption } from \"@p/js/utils\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport \"./index.css\";\r\nimport RadioItem from \"./item\";\r\nimport { IRadio } from \"./type\";\r\n\r\nfunction Radio(props: IRadio) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\toptions,\r\n\t\tvalue,\r\n\t\ttype = \"default\",\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\toptionInline = true,\r\n\t\tlabelInline,\r\n\t\tdisabled,\r\n\t\trequired,\r\n\t\tclassName,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst formattedOptions = useMemo(() => formatOption(options), [options]);\r\n\r\n\tconst handleChange = useMemoizedFn((value, e) => {\r\n\t\tstate.value = value;\r\n\t\tonChange?.(value, e);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-radio i-input-label\",\r\n\t\t\t\t{\r\n\t\t\t\t\t[`i-radio-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t{label && (\r\n\t\t\t\t<span className='i-input-label-text'>\r\n\t\t\t\t\t{required && <span className='error'>*</span>}\r\n\t\t\t\t\t{label}\r\n\r\n\t\t\t\t\t{message && <p className='i-radio-message'>{message}</p>}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-radio-options\", {\r\n\t\t\t\t\t\"i-options-block\": !optionInline,\r\n\t\t\t\t\t\"i-radio-options-button\": type === \"button\",\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{formattedOptions.map((option) => (\r\n\t\t\t\t\t<RadioItem\r\n\t\t\t\t\t\tkey={option.value as string}\r\n\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\tvalue={option.value}\r\n\t\t\t\t\t\tchecked={state.value === option.value}\r\n\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\tdisabled={disabled || option.disabled}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t</RadioItem>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nRadio.Item = RadioItem;\r\n\r\nexport default Radio;\r\n","import { Icon, List, Tag } from \"@p\";\r\nimport { TOption } from \"@p/types/type\";\r\nimport { CheckRound, SearchRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport Empty from \"../utils/empty\";\r\nimport { ISelectOptions } from \"./type\";\r\n\r\nexport const Options = (props: ISelectOptions) => {\r\n\tconst {\r\n\t\tvalue: val,\r\n\t\toptions,\r\n\t\tfilter,\r\n\t\tfilterPlaceholder,\r\n\t\tmultiple,\r\n\t\tempty = <Empty />,\r\n\t\tonSelect,\r\n\t\tonFilter,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-select-options\", {\r\n\t\t\t\t\"i-select-options-multiple\": multiple,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{filter && multiple && (\r\n\t\t\t\t<div className='i-select-filter'>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<SearchRound />}\r\n\t\t\t\t\t\tclassName='color-8 ml-8 my-auto'\r\n\t\t\t\t\t\tsize='1.2em'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tclassName='i-input'\r\n\t\t\t\t\t\tplaceholder={filterPlaceholder}\r\n\t\t\t\t\t\tonChange={onFilter}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{options.length === 0 && empty}\r\n\r\n\t\t\t{options.map((option, i) => {\r\n\t\t\t\tconst { label, value, disabled } = option;\r\n\t\t\t\tconst isActive = multiple\r\n\t\t\t\t\t? val?.includes(value)\r\n\t\t\t\t\t: val === value;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\tkey={(value as string) || i}\r\n\t\t\t\t\t\tactive={isActive}\r\n\t\t\t\t\t\ttype='option'\r\n\t\t\t\t\t\tonClick={() => onSelect?.(value, option)}\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{multiple && (\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={<CheckRound />}\r\n\t\t\t\t\t\t\t\tclassName='i-select-option-check'\r\n\t\t\t\t\t\t\t\tsize='1em'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{label}\r\n\t\t\t\t\t</List.Item>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport const activeOptions = (\r\n\toptions: TOption[] = [],\r\n\tvalue: any[] = [],\r\n\tmax = 3\r\n) => {\r\n\tconst total = options.flatMap((opt) =>\r\n\t\tvalue.includes(opt.value) ? [opt] : []\r\n\t);\r\n\r\n\tif (max >= total.length) return total;\r\n\r\n\tconst rest = total.length - max;\r\n\tconst after = total.slice(0, max);\r\n\tafter.push(rest as any);\r\n\r\n\treturn after;\r\n};\r\n\r\nexport const displayValue = (config) => {\r\n\tconst { options, value, maxDisplay, multiple, onSelect } = config;\r\n\r\n\tif (multiple) {\r\n\t\treturn activeOptions(options, value, maxDisplay).map((opt, i) => {\r\n\t\t\tif (typeof opt === \"number\") return <Tag key={i}>+{opt}</Tag>;\r\n\r\n\t\t\tconst { label, value } = opt;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Tag\r\n\t\t\t\t\tkey={value as string}\r\n\t\t\t\t\tonClose={(e) => {\r\n\t\t\t\t\t\te?.stopPropagation();\r\n\t\t\t\t\t\tonSelect?.(value, opt);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</Tag>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\treturn options.find((opt: TOption) => opt.value === value)?.label;\r\n};\r\n","import { Popup } from \"@p\";\r\nimport { formatOption } from \"@p/js/utils\";\r\nimport { TOption } from \"@p/types/type\";\r\nimport { UnfoldMoreRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { debounce } from \"radash\";\r\nimport {\r\n\tChangeEvent,\r\n\tMouseEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseState,\r\n} from \"react\";\r\nimport \"../../css/input.css\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { Options, displayValue } from \"./options\";\r\nimport { ISelect } from \"./type\";\r\n\r\nconst Select = forwardRef<HTMLInputElement, ISelect>((props, ref) => {\r\n\tconst {\r\n\t\ttype = \"text\",\r\n\t\tname,\r\n\t\tlabel,\r\n\t\tvalue = \"\",\r\n\t\tplaceholder,\r\n\t\toptions = [],\r\n\t\tmultiple,\r\n\t\tprepend,\r\n\t\tappend,\r\n\t\tlabelInline,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tmessage,\r\n\t\tstatus = \"normal\",\r\n\t\thideClear,\r\n\t\tmaxDisplay,\r\n\t\tborder,\r\n\t\tfilter,\r\n\t\ttip,\r\n\t\tfilterPlaceholder = \"...\",\r\n\t\tpopupProps,\r\n\t\tonSelect,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tinputValue: \"\",\r\n\t\tfilterValue: \"\",\r\n\t\tvalue,\r\n\t\tloading: false,\r\n\t});\r\n\r\n\tconst [active, setActive] = useState<boolean>(false);\r\n\r\n\tconst formattedOptions = useMemo(() => formatOption(options), [options]);\r\n\r\n\tconst filterOptions = useMemo(() => {\r\n\t\tconst { filterValue: fv } = state;\r\n\t\tif (!fv || !filter) return formattedOptions;\r\n\r\n\t\tconst filterFn =\r\n\t\t\ttypeof filter === \"function\"\r\n\t\t\t\t? filter\r\n\t\t\t\t: (opt) => opt.value.includes(fv) || opt.label.includes(fv);\r\n\r\n\t\treturn formattedOptions.filter(filterFn);\r\n\t}, [formattedOptions, filter, state.filterValue]);\r\n\r\n\tconst changeValue = (v: any) => {\r\n\t\tstate.value = v;\r\n\t\tonChange?.(v);\r\n\t};\r\n\r\n\tconst handleSelect = useCallback((value: any, option?: TOption) => {\r\n\t\tonSelect?.(value, option);\r\n\r\n\t\tif (multiple) {\r\n\t\t\tconst values = [...(state.value as any[])];\r\n\t\t\tconst i = values.findIndex((v) => v === value);\r\n\r\n\t\t\ti > -1 ? values.splice(i, 1) : values.push(value);\r\n\t\t\tchangeValue(values as any);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetActive(false);\r\n\t\tchangeValue(value);\r\n\t}, []);\r\n\r\n\tconst handleVisibleChange = (visible: boolean) => {\r\n\t\tsetActive(visible);\r\n\r\n\t\tif (!filter) return;\r\n\r\n\t\tstate.filterValue = \"\";\r\n\t};\r\n\r\n\tconst handleHelperClick = (e: MouseEvent) => {\r\n\t\tif (!active) return;\r\n\r\n\t\tchangeValue(multiple ? [] : \"\");\r\n\t};\r\n\r\n\tconst handleFilterChange = useMemoizedFn(\r\n\t\tdebounce({ delay: 400 }, (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\t\tconst v = e.target.value;\r\n\t\t\tstate.filterValue = v;\r\n\t\t})\r\n\t);\r\n\r\n\tconst handleInputChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tstate.filterValue = e.target.value;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst hasValue = multiple\r\n\t\t? (state.value as any[]).length > 0\r\n\t\t: !!state.value;\r\n\tconst clearable = !hideClear && active && hasValue;\r\n\tconst text = message ?? tip;\r\n\r\n\treturn (\r\n\t\t<label\r\n\t\t\tclassName={classNames(\"i-input-label\", className, {\r\n\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{label && <span className='i-input-label-text'>{label}</span>}\r\n\r\n\t\t\t<Popup\r\n\t\t\t\tposition='bottom'\r\n\t\t\t\tarrow={false}\r\n\t\t\t\tfitSize\r\n\t\t\t\t{...popupProps}\r\n\t\t\t\tvisible={active}\r\n\t\t\t\ttrigger='none'\r\n\t\t\t\tonVisibleChange={handleVisibleChange}\r\n\t\t\t\tcontent={\r\n\t\t\t\t\t<Options\r\n\t\t\t\t\t\toptions={filterOptions}\r\n\t\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\t\tmultiple={multiple}\r\n\t\t\t\t\t\tfilter={!!filter}\r\n\t\t\t\t\t\tfilterPlaceholder={filterPlaceholder}\r\n\t\t\t\t\t\tonSelect={handleSelect}\r\n\t\t\t\t\t\tonFilter={handleFilterChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t\t\t\"i-input-focus\": active,\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tonClick={() => setActive(true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{prepend}\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\ttype='hidden'\r\n\t\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{multiple ? (\r\n\t\t\t\t\t\thasValue ? (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-input i-select\", {\r\n\t\t\t\t\t\t\t\t\t\"i-select-multiple\": multiple,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{displayValue({\r\n\t\t\t\t\t\t\t\t\toptions: formattedOptions,\r\n\t\t\t\t\t\t\t\t\tvalue: state.value,\r\n\t\t\t\t\t\t\t\t\tmultiple,\r\n\t\t\t\t\t\t\t\t\tmaxDisplay,\r\n\t\t\t\t\t\t\t\t\tonSelect: handleSelect,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName='i-input i-select'\r\n\t\t\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\t\t\treadOnly\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t{!multiple && (\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tvalue={active ? state.filterValue : state.value}\r\n\t\t\t\t\t\t\tclassName='i-input i-select'\r\n\t\t\t\t\t\t\tplaceholder={state.value || placeholder}\r\n\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\treadOnly={!filter}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={clearable ? undefined : <UnfoldMoreRound />}\r\n\t\t\t\t\t\tonClick={handleHelperClick}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{append}\r\n\t\t\t\t</div>\r\n\t\t\t</Popup>\r\n\r\n\t\t\t{text && <span className='i-input-message'>{text}</span>}\r\n\t\t</label>\r\n\t);\r\n});\r\n\r\nexport default Select;\r\n","import \"./index.css\";\r\n\r\nexport default function Divider() {\r\n\treturn <i className='i-step-divider' />;\r\n}\r\n","import { CheckRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport Divider from \"./divider\";\r\nimport { IStepItem } from \"./type\";\r\n\r\nconst STATUS = [\"finished\", \"active\", \"pending\"];\r\n\r\nfunction defaultRenderIcon(i: number, status: string) {\r\n\treturn (\r\n\t\t<span className='i-step-item-index'>\r\n\t\t\t{status === \"finished\" ? (\r\n\t\t\t\t<CheckRound style={{ width: \"1em\", height: \"1.5em\" }} />\r\n\t\t\t) : (\r\n\t\t\t\ti + 1\r\n\t\t\t)}\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\nfunction Item(props: IStepItem) {\r\n\tconst {\r\n\t\tindex = 0,\r\n\t\tactive = 0,\r\n\t\trenderIcon = defaultRenderIcon,\r\n\t\ttitle,\r\n\t\tvertical,\r\n\t\tline = <Divider />,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t} = props;\r\n\tconst status = STATUS[index === active ? 1 : index < active ? 0 : 2];\r\n\r\n\tconst handleClick = () => {\r\n\t\tonClick?.(index);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-step-item\",\r\n\t\t\t\t`i-step-item-${status}`,\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t{vertical ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='i-step-item-left'>\r\n\t\t\t\t\t\t{renderIcon?.(index, status)}\r\n\t\t\t\t\t\t{line}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='i-step-item-right'>\r\n\t\t\t\t\t\t<div className='i-step-item-title'>{title}</div>\r\n\t\t\t\t\t\t{children && (\r\n\t\t\t\t\t\t\t<div className='i-step-item-content'>\r\n\t\t\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='i-step-item-title'>\r\n\t\t\t\t\t\t{renderIcon?.(index, status)}\r\n\r\n\t\t\t\t\t\t<span>{title}</span>\r\n\r\n\t\t\t\t\t\t{line}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{children && (\r\n\t\t\t\t\t\t<div className='i-step-item-content'>{children}</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Item;\r\n","import classNames from \"classnames\";\r\nimport { Children, ReactNode, useMemo } from \"react\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { IStep } from \"./type\";\r\n\r\nconst Step = (props: IStep): JSX.Element => {\r\n\tconst {\r\n\t\tactive = 0,\r\n\t\tvertical,\r\n\t\trenderIcon,\r\n\t\tline,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t} = props;\r\n\r\n\tconst steps = useMemo(() => {\r\n\t\tconst nodes: ReactNode[] = [];\r\n\t\tlet index = 0;\r\n\r\n\t\tChildren.map(children, (el: any) => {\r\n\t\t\tif (!el || el.type !== Item) return;\r\n\r\n\t\t\tconst { props: elProps } = el;\r\n\r\n\t\t\tnodes.push({\r\n\t\t\t\t...el,\r\n\t\t\t\tprops: {\r\n\t\t\t\t\trenderIcon,\r\n\t\t\t\t\tline,\r\n\t\t\t\t\tonClick,\r\n\t\t\t\t\t...elProps,\r\n\t\t\t\t\tvertical,\r\n\t\t\t\t\tactive,\r\n\t\t\t\t\tindex: index++,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn nodes;\r\n\t}, [active, children]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-step\",\r\n\t\t\t\t{ \"i-step-vertical\": vertical },\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{steps}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nStep.Item = Item;\r\n\r\nexport default Step;\r\n","import classNames from \"classnames\";\r\nimport { useMemo } from \"react\";\r\nimport { ISwiperItem } from \"./type\";\r\n\r\nfunction Item(props: ISwiperItem) {\r\n\tconst {\r\n\t\tindex = 0,\r\n\t\tactive,\r\n\t\ttype,\r\n\t\ttransition,\r\n\t\tgap = 0,\r\n\t\titemHeight,\r\n\t\tvertical,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t} = props;\r\n\r\n\tconst selfStyle = useMemo(() => {\r\n\t\tif (type === \"normal\") {\r\n\t\t\treturn {\r\n\t\t\t\t[vertical ? \"paddingBlock\" : \"paddingInline\"]: gap / 2,\r\n\t\t\t\theight: itemHeight,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttransform: `translate(-${index * 100}%, 0)`,\r\n\t\t\ttransition,\r\n\t\t};\r\n\t}, [index, gap, itemHeight, vertical, type]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{ ...style, ...selfStyle }}\r\n\t\t\tclassName={classNames(\"i-swiper-item\", className, {\r\n\t\t\t\t\"i-swiper-active\": active,\r\n\t\t\t})}\r\n\t\t\tdata-index={index}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Item;\r\n","import { useMouseMove, useMouseUp } from \"@p/js/hooks\";\r\nimport { clamp } from \"@p/js/utils\";\r\nimport {\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tChildren,\r\n\tMouseEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseImperativeHandle,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Icon from \"../icon\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { CompositionSwiper, ISwiper, RefSwiper } from \"./type\";\r\n\r\nconst Swiper = forwardRef<RefSwiper, ISwiper>((props, ref): JSX.Element => {\r\n\tconst {\r\n\t\ttype = \"normal\",\r\n\t\tinitial = 0,\r\n\t\tdisplay = 1,\r\n\t\tscroll = 1,\r\n\t\tloop = true,\r\n\t\tvertical,\r\n\t\tprev = <Icon icon={<KeyboardArrowLeftRound />} size='2em' />,\r\n\t\tnext = <Icon icon={<KeyboardArrowRightRound />} size='2em' />,\r\n\t\tduration = 600,\r\n\t\tinterval = 3000,\r\n\t\tautoplay,\r\n\t\tpauseOnHover,\r\n\t\tarrow = true,\r\n\t\treverse,\r\n\t\tdraggable,\r\n\t\tdragOffset = 40,\r\n\t\tgap = 0,\r\n\t\titemHeight,\r\n\t\tindicator,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\trenderIndicator,\r\n\t\tonBeforeSwipe,\r\n\t\tonAfterSwipe,\r\n\t} = props;\r\n\r\n\tconst listRef = useRef<HTMLDivElement>(null);\r\n\tconst timerRef = useRef<any>(null);\r\n\tconst transition = `all ${duration / 1000}s`;\r\n\tconst state = useReactive({\r\n\t\tcurrent: initial,\r\n\t\tswipable: true,\r\n\t\ttransition: type === \"fade\" ? \"none\" : transition,\r\n\t\tdragStart: 0,\r\n\t\tdragging: false,\r\n\t\tinitialized: false,\r\n\t});\r\n\r\n\tconst items = useMemo(() => {\r\n\t\treturn Children.map(children, (node: any) => {\r\n\t\t\tif (node.type !== Item) return;\r\n\r\n\t\t\treturn node;\r\n\t\t});\r\n\t}, [children]);\r\n\r\n\tconst [displayItems, extra, size, total, listSize] = useMemo(() => {\r\n\t\tconst extra =\r\n\t\t\ttype === \"normal\" && loop && items.length > display\r\n\t\t\t\t? display + 1\r\n\t\t\t\t: 0;\r\n\t\tlet list: any = [];\r\n\r\n\t\tif (extra <= 0) {\r\n\t\t\tlist = [...items];\r\n\t\t} else {\r\n\t\t\tconst head = items.slice(0, extra);\r\n\t\t\tconst tail = items.slice(-extra);\r\n\t\t\tlist = [...tail, ...items, ...head];\r\n\t\t}\r\n\r\n\t\tconst listSize = `${(list.length / display) * 100}%`;\r\n\r\n\t\treturn [list, extra, items.length, list.length, listSize];\r\n\t}, [display, loop, type, items]);\r\n\r\n\tconst offsetPercent = useMemo(\r\n\t\t() => (-100 * (state.current + extra)) / total,\r\n\t\t[state.current, total]\r\n\t);\r\n\r\n\tconst position = useMemo(() => {\r\n\t\tif (size <= display || type === \"fade\") return;\r\n\r\n\t\tconst offset = vertical\r\n\t\t\t? `0, ${offsetPercent}%`\r\n\t\t\t: `${offsetPercent}%, 0`;\r\n\t\treturn `translate3d(${offset}, 0)`;\r\n\t}, [offsetPercent, vertical, display, size, type]);\r\n\r\n\tconst trackStyle = useMemo(() => {\r\n\t\tif (!vertical || !itemHeight) return;\r\n\r\n\t\treturn {\r\n\t\t\theight: itemHeight * display,\r\n\t\t};\r\n\t}, [vertical, itemHeight, display]);\r\n\r\n\tconst indicatorsLoop = useMemo(() => {\r\n\t\treturn Array.from({\r\n\t\t\tlength: Math.ceil((size - display) / scroll) + 1,\r\n\t\t});\r\n\t}, [loop, indicator]);\r\n\r\n\tconst clearTimer = () => {\r\n\t\tclearTimeout(timerRef.current);\r\n\t\ttimerRef.current = null;\r\n\t};\r\n\r\n\tconst swipeTo = useCallback(\r\n\t\t(i: number) => {\r\n\t\t\tif (!state.swipable || i === state.current) return;\r\n\t\t\tstate.swipable = false;\r\n\t\t\tonBeforeSwipe?.(state.current);\r\n\r\n\t\t\tlet reset = false;\r\n\t\t\tlet next = i;\r\n\t\t\tconst lastDisplay = size - display;\r\n\r\n\t\t\tif (loop) {\r\n\t\t\t\tif (i > lastDisplay) {\r\n\t\t\t\t\treset = true;\r\n\t\t\t\t\ti = size;\r\n\t\t\t\t\tnext = 0;\r\n\t\t\t\t} else if (i < 0) {\r\n\t\t\t\t\treset = true;\r\n\t\t\t\t\ti = -display;\r\n\t\t\t\t\tnext = lastDisplay;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnext = clamp(next, 0, lastDisplay);\r\n\t\t\t\ti = next;\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.swipable = true;\r\n\t\t\t}, duration + 32);\r\n\r\n\t\t\tif (type === \"fade\") {\r\n\t\t\t\tstate.current = next;\r\n\t\t\t\tonAfterSwipe?.(next);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tstate.current = i;\r\n\r\n\t\t\tif (!reset) {\r\n\t\t\t\tif (autoplay) {\r\n\t\t\t\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tonAfterSwipe?.(next);\r\n\t\t\t\t}, duration + 12);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.transition = \"none\";\r\n\t\t\t\tstate.current = next;\r\n\t\t\t\tonAfterSwipe?.(next);\r\n\t\t\t\tif (autoplay) {\r\n\t\t\t\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tstate.transition = transition;\r\n\t\t\t\t}, 60);\r\n\t\t\t}, duration + 20);\r\n\t\t},\r\n\t\t[duration, autoplay]\r\n\t);\r\n\r\n\tconst swipeNext = () => {\r\n\t\tswipeTo(reverse ? state.current - scroll : state.current + scroll);\r\n\t};\r\n\r\n\tconst swipePrev = () => {\r\n\t\tswipeTo(reverse ? state.current + scroll : state.current - scroll);\r\n\t};\r\n\r\n\tconst handleMouseDown = useCallback(\r\n\t\t(e: MouseEvent) => {\r\n\t\t\tif (!draggable || !state.swipable || type === \"fade\") return;\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tObject.assign(state, {\r\n\t\t\t\tdragStart: vertical ? e.clientY : e.clientX,\r\n\t\t\t\tdragging: true,\r\n\t\t\t\ttransition: \"none\",\r\n\t\t\t});\r\n\t\t},\r\n\t\t[draggable, vertical]\r\n\t);\r\n\r\n\tconst handleMouseMove = useCallback(\r\n\t\t(e: any) => {\r\n\t\t\tif (!state.dragging || !listRef.current) return;\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst dragEnd = vertical ? e.clientY : e.clientX;\r\n\t\t\tconst offset =\r\n\t\t\t\t((dragEnd - state.dragStart) * 61.8) /\r\n\t\t\t\t\tlistRef.current[vertical ? \"offsetHeight\" : \"offsetWidth\"] +\r\n\t\t\t\toffsetPercent;\r\n\r\n\t\t\tlistRef.current.style.transform = `translate3d(${\r\n\t\t\t\tvertical ? `0, ${offset}%` : `${offset}%, 0`\r\n\t\t\t}, 0)`;\r\n\t\t},\r\n\t\t[vertical, listRef.current, offsetPercent]\r\n\t);\r\n\r\n\tconst handleMouseUp = useCallback(\r\n\t\t(e: any) => {\r\n\t\t\tif (!state.dragging || !listRef.current) return;\r\n\r\n\t\t\tconst dragEnd = vertical ? e.clientY : e.clientX;\r\n\t\t\tconst part =\r\n\t\t\t\tlistRef.current[vertical ? \"offsetHeight\" : \"offsetWidth\"] /\r\n\t\t\t\ttotal;\r\n\t\t\tconst offset = (dragEnd - state.dragStart) * 0.618;\r\n\t\t\tconst absOffset = Math.abs(offset);\r\n\r\n\t\t\tif (absOffset > dragOffset) {\r\n\t\t\t\tconst base = Math.floor(absOffset / part);\r\n\t\t\t\tconst mod = (absOffset % part) - dragOffset > 0 ? 1 : 0;\r\n\t\t\t\tconst p = base + mod;\r\n\r\n\t\t\t\tlet to = state.current + (offset > 0 ? -p : p);\r\n\r\n\t\t\t\tswipeTo(to);\r\n\t\t\t}\r\n\r\n\t\t\tlistRef.current.style.transform = position || \"\";\r\n\r\n\t\t\tObject.assign(state, {\r\n\t\t\t\tdragging: false,\r\n\t\t\t\ttransition,\r\n\t\t\t});\r\n\t\t},\r\n\t\t[vertical, listRef.current, offsetPercent]\r\n\t);\r\n\r\n\tconst handleMouseOver = () => {\r\n\t\tif (!pauseOnHover) return;\r\n\t\tclearTimer();\r\n\t};\r\n\r\n\tconst handleMouseLeave = () => {\r\n\t\tif (!pauseOnHover) return;\r\n\t\tclearTimer();\r\n\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\t};\r\n\r\n\tuseMouseMove(handleMouseMove);\r\n\tuseMouseUp(handleMouseUp);\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\tswipeTo,\r\n\t\tswipeNext,\r\n\t\tswipePrev,\r\n\t}));\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!autoplay) return;\r\n\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(timerRef.current);\r\n\t\t\ttimerRef.current = null;\r\n\t\t};\r\n\t}, [autoplay, interval]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-swiper\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-swiper-vertical\": vertical,\r\n\t\t\t\t\t\"i-swiper-initialized\": state.initialized,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName='i-swiper-track'\r\n\t\t\t\tstyle={trackStyle}\r\n\t\t\t\tonMouseOver={handleMouseOver}\r\n\t\t\t\tonMouseLeave={handleMouseLeave}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={listRef}\r\n\t\t\t\t\tclassName={classNames(\"i-swiper-list\", {\r\n\t\t\t\t\t\t\"i-swiper-fade\": type === \"fade\",\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t[vertical ? \"height\" : \"width\"]: listSize,\r\n\t\t\t\t\t\ttransform: position,\r\n\t\t\t\t\t\ttransition: state.transition,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\t>\r\n\t\t\t\t\t{displayItems.map((item, i) => {\r\n\t\t\t\t\t\tconst { props: itemProps } = item;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Item\r\n\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\tindex={i}\r\n\t\t\t\t\t\t\t\tactive={i - extra === state.current}\r\n\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\tgap={gap}\r\n\t\t\t\t\t\t\t\ttransition={transition}\r\n\t\t\t\t\t\t\t\titemHeight={itemHeight}\r\n\t\t\t\t\t\t\t\tvertical={vertical}\r\n\t\t\t\t\t\t\t\t{...itemProps}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{arrow && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclassName='i-swiper-arrow i-swiper-prev'\r\n\t\t\t\t\t\t\tonClick={swipePrev}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{prev}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclassName='i-swiper-arrow i-swiper-next'\r\n\t\t\t\t\t\t\tonClick={swipeNext}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{next}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{indicator && (\r\n\t\t\t\t<div className='i-swiper-indicators'>\r\n\t\t\t\t\t{indicatorsLoop.map((whatever, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-swiper-indicator\", {\r\n\t\t\t\t\t\t\t\t\t\"i-indicator-active\":\r\n\t\t\t\t\t\t\t\t\t\ti ===\r\n\t\t\t\t\t\t\t\t\t\tMath[loop ? \"floor\" : \"ceil\"](\r\n\t\t\t\t\t\t\t\t\t\t\t((state.current + size) % size) /\r\n\t\t\t\t\t\t\t\t\t\t\t\tscroll\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tonClick={() => swipeTo(i * scroll)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{renderIndicator?.(i)}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}) as CompositionSwiper;\r\n\r\nSwiper.Item = Item;\r\n\r\nexport default Swiper;\r\n","import { ITabItem } from \"./type\";\r\n\r\nconst Item = (props: ITabItem) => {\r\n\treturn <></>;\r\n};\r\n\r\nexport default Item;\r\n","import { useIntersectionObserver } from \"@p/js/hooks\";\r\nimport { MoreHorizRound } from \"@ricons/material\";\r\nimport { useReactive, useSize } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { pick } from \"radash\";\r\nimport {\r\n\tCSSProperties,\r\n\tChildren,\r\n\tforwardRef,\r\n\tuseEffect,\r\n\tuseImperativeHandle,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport Popup from \"../popup\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport TabItem from \"./item\";\r\nimport { CompositionTabs, ITabItem, ITabs, RefTabs, TTabKey } from \"./type\";\r\n\r\ntype TState = {\r\n\tactive?: TTabKey;\r\n\tprevActive?: TTabKey;\r\n\tbarStyle: CSSProperties;\r\n\tcachedTabs: TTabKey[];\r\n\toverflow: boolean;\r\n\tmore: ITabItem[];\r\n\ttabs: ITabItem[];\r\n};\r\n\r\nconst Tabs = forwardRef<RefTabs, ITabs>((props, ref) => {\r\n\tconst {\r\n\t\tactive,\r\n\t\ttabs: items,\r\n\t\ttype = \"default\",\r\n\t\tprepend,\r\n\t\tappend,\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\tvertical,\r\n\t\ttoggable,\r\n\t\tbar = true,\r\n\t\thideMore,\r\n\t\tbarClass,\r\n\t\trenderMore = () => (\r\n\t\t\t<Button flat square size='small'>\r\n\t\t\t\t<Icon icon={<MoreHorizRound />} />\r\n\t\t\t</Button>\r\n\t\t),\r\n\t\tonTabChange,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\tconst navRefs = useRef<HTMLElement[]>([]);\r\n\tconst barRef = useRef<HTMLSpanElement>(null);\r\n\tconst navsRef = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive<TState>({\r\n\t\tactive,\r\n\t\tprevActive: undefined,\r\n\t\tbarStyle: {},\r\n\t\tcachedTabs: [],\r\n\t\toverflow: false,\r\n\t\tmore: [],\r\n\t\ttabs: [],\r\n\t});\r\n\tconst { observe, unobserve } = useIntersectionObserver();\r\n\tconst size = useSize(navsRef);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!items) {\r\n\t\t\tif (!children) {\r\n\t\t\t\tstate.tabs = [];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tstate.tabs = Children.map(children, (node, i) => {\r\n\t\t\t\tconst { key, props: nodeProps } = node as {\r\n\t\t\t\t\tkey?: TTabKey;\r\n\t\t\t\t\tprops?: any;\r\n\t\t\t\t};\r\n\t\t\t\tconst { title, children, content, keepDOM } = nodeProps;\r\n\t\t\t\tconst cloned = children\r\n\t\t\t\t\t? pick(children, [\"props\", \"type\", \"$$typeof\", \"ref\"])\r\n\t\t\t\t\t: content;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tkey: key || String(i),\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tcontent: cloned,\r\n\t\t\t\t\tkeepDOM,\r\n\t\t\t\t};\r\n\t\t\t}) as ITabItem[];\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.tabs = items.map((item, i) => {\r\n\t\t\tif ([\"string\", \"number\"].includes(typeof item)) {\r\n\t\t\t\treturn { key: item, title: item };\r\n\t\t\t}\r\n\t\t\tif (item.key === undefined) {\r\n\t\t\t\titem.key = i;\r\n\t\t\t}\r\n\t\t\treturn item;\r\n\t\t});\r\n\t}, [children, items]);\r\n\r\n\tconst add = (tab: ITabItem) => {\r\n\t\tconst { key } = tab;\r\n\t\tconst i = state.tabs.findIndex((t) => t.key === key);\r\n\r\n\t\tif (i > -1) {\r\n\t\t\topen(state.tabs[i].key ?? i);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst l = state.tabs.length;\r\n\t\tconst tkey = tab.key ?? l;\r\n\t\tstate.tabs.push({ ...tab, key: tkey });\r\n\t\topen(tkey);\r\n\t};\r\n\r\n\tconst close = (key: TTabKey) => {\r\n\t\tconst i = state.tabs.findIndex((t) => t.key === key);\r\n\r\n\t\tif (i < 0) return;\r\n\r\n\t\tstate.tabs.splice(i, 1);\r\n\r\n\t\tif (state.active !== key) return;\r\n\r\n\t\tconst next = state.tabs[i] || state.tabs[i - 1];\r\n\t\topen(state.prevActive ?? next?.key ?? \"\");\r\n\t};\r\n\r\n\tconst open = (key: TTabKey) => {\r\n\t\tif (key === state.active) {\r\n\t\t\tif (!toggable) return;\r\n\r\n\t\t\tonTabChange?.(undefined, key);\r\n\t\t\tstate.active = undefined;\r\n\r\n\t\t\tstate.barStyle = {\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: 0,\r\n\t\t\t};\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.prevActive = state.active;\r\n\t\tonTabChange?.(key, state.active);\r\n\t\tstate.active = key;\r\n\t};\r\n\r\n\tconst handleMouseWheel = (e) => {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tif (vertical) return;\r\n\r\n\t\tnavsRef.current?.scrollBy({\r\n\t\t\tleft: e.deltaY + e.deltaX,\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!size || hideMore) return;\r\n\t\tconst { scrollHeight, scrollWidth } = navsRef.current as HTMLElement;\r\n\t\tconst { width, height } = size;\r\n\r\n\t\tstate.overflow = scrollHeight > height || scrollWidth > width;\r\n\r\n\t\tif (!state.overflow) return;\r\n\r\n\t\tnavRefs.current.map((nav, i) => {\r\n\t\t\tif (!nav) return;\r\n\t\t\tobserve(nav, (tar: HTMLElement, visible: boolean) => {\r\n\t\t\t\tif (!state.tabs[i]) return;\r\n\t\t\t\tstate.tabs[i].intersecting = visible;\r\n\t\t\t\tstate.more = state.tabs.filter((tab) => !tab.intersecting);\r\n\t\t\t});\r\n\t\t});\r\n\t}, [size, hideMore, state.tabs.length]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!bar || type === \"pane\" || state.active === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst index = state.tabs.findIndex((tab) => tab.key === state.active);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst nav = navRefs.current[index];\r\n\r\n\t\t\tif (!nav) return;\r\n\r\n\t\t\tif (state.tabs[index].keepDOM && state.active) {\r\n\t\t\t\tconst i = state.cachedTabs.findIndex((k) => k === state.active);\r\n\t\t\t\ti < 0 && state.cachedTabs.unshift(state.active);\r\n\t\t\t}\r\n\r\n\t\t\tconst { offsetHeight, offsetLeft, offsetTop, offsetWidth } = nav;\r\n\t\t\tconst isLine = type === \"line\";\r\n\r\n\t\t\tstate.barStyle = {\r\n\t\t\t\theight: !vertical && isLine ? \".25em\" : offsetHeight,\r\n\t\t\t\twidth: vertical && isLine ? \".25em\" : offsetWidth,\r\n\t\t\t\ttransform: `translate(${offsetLeft}px, ${offsetTop}px)`,\r\n\t\t\t};\r\n\t\t}, 16);\r\n\t}, [state.active, bar]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (active === undefined || state.active === active) return;\r\n\r\n\t\topen(active);\r\n\t}, [active]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (hideMore) return;\r\n\t\treturn () => {\r\n\t\t\tnavRefs.current?.map(unobserve);\r\n\t\t};\r\n\t}, [state.tabs.length]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!navsRef.current || vertical) return;\r\n\t\tnavsRef.current.addEventListener(\"wheel\", handleMouseWheel, {\r\n\t\t\tpassive: false,\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tif (!navsRef.current) return;\r\n\t\t\tnavsRef.current.removeEventListener(\"wheel\", handleMouseWheel);\r\n\t\t};\r\n\t}, [navsRef.current]);\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\topen,\r\n\t\tclose,\r\n\t\tadd,\r\n\t\tnavs: navsRef,\r\n\t}));\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-tabs\",\r\n\t\t\t\t{ flex: vertical, [`i-tabs-${type}`]: type !== \"default\" },\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...rest}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-tab-navs-container\", {\r\n\t\t\t\t\t\"i-tab-navs-vertical\": vertical,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend}\r\n\r\n\t\t\t\t<div ref={navsRef} className='i-tab-navs'>\r\n\t\t\t\t\t{state.tabs.map((tab, i) => {\r\n\t\t\t\t\t\tconst { title, key = i, closable } = tab;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\tref={(ref) =>\r\n\t\t\t\t\t\t\t\t\t(navRefs.current[i] =\r\n\t\t\t\t\t\t\t\t\t\tref as HTMLAnchorElement)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-tab-nav\", {\r\n\t\t\t\t\t\t\t\t\t\"i-tab-active\": state.active === key,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tonClick={() => open(key)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{title}\r\n\r\n\t\t\t\t\t\t\t\t{closable && (\r\n\t\t\t\t\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\t\t\t\t\tas='i'\r\n\t\t\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\t\t\tclassName='i-tab-nav-close'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\tclose(key);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t{bar && (\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tref={barRef}\r\n\t\t\t\t\t\t\tclassName={classNames(\"i-tab-navs-bar\", barClass)}\r\n\t\t\t\t\t\t\tstyle={state.barStyle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!hideMore && state.overflow && state.more.length > 0 && (\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tarrow={false}\r\n\t\t\t\t\t\tposition={vertical ? \"right\" : \"bottom\"}\r\n\t\t\t\t\t\talign='end'\r\n\t\t\t\t\t\ttouchable\r\n\t\t\t\t\t\thideDelay={500}\r\n\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t<div className='i-tabs-morelist pd-4'>\r\n\t\t\t\t\t\t\t\t{state.more.map((tab, i) => {\r\n\t\t\t\t\t\t\t\t\tconst { key = i, title } = tab;\r\n\t\t\t\t\t\t\t\t\tconst isActive = state.active === key;\r\n\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classNames(\"i-tab-nav\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"i-tab-active\": isActive,\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => open(key)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{renderMore(state.more)}\r\n\t\t\t\t\t</Popup>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{append}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='i-tab-contents'>\r\n\t\t\t\t{state.tabs.map((tab, i) => {\r\n\t\t\t\t\tconst { key = i, content } = tab;\r\n\t\t\t\t\tconst isActive = state.active === key;\r\n\t\t\t\t\tconst show =\r\n\t\t\t\t\t\tisActive ||\r\n\t\t\t\t\t\t(key !== undefined && state.cachedTabs.includes(key));\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tshow && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-tab-content\", {\r\n\t\t\t\t\t\t\t\t\t\"i-tab-active\": isActive,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{content}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}) as CompositionTabs;\r\n\r\nTabs.Item = TabItem;\r\n\r\nexport default Tabs;\r\n","import classNames from \"classnames\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { ITag } from \"./type\";\r\n\r\nconst Tag = (props: ITag): JSX.Element => {\r\n\tconst {\r\n\t\tdot,\r\n\t\tdotClass,\r\n\t\toutline,\r\n\t\tround,\r\n\t\tsize = \"normal\",\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonClose,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<span\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-tag\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-tag-outline\": outline,\r\n\t\t\t\t\t\"i-tag-clickable\": onClick,\r\n\t\t\t\t\t[`i-tag-${size}`]: size !== \"normal\",\r\n\t\t\t\t\tround,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tonClick={onClick}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{dot && <span className={classNames(\"i-tag-dot\", dotClass)}></span>}\r\n\r\n\t\t\t{children}\r\n\r\n\t\t\t{onClose && (\r\n\t\t\t\t<Helpericon active className='i-tag-close' onClick={onClose} />\r\n\t\t\t)}\r\n\t\t</span>\r\n\t);\r\n};\r\n\r\nexport default Tag;\r\n","import { KeyboardArrowDownRound } from \"@ricons/material\";\r\nimport { useMemoizedFn } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { MouseEvent, useState } from \"react\";\r\nimport Checkbox from \"../checkbox\";\r\nimport Icon from \"../icon\";\r\nimport TreeList from \"./list\";\r\nimport { ITreeHeader, PropsTreeItem } from \"./type\";\r\n\r\nconst Header = (props: ITreeHeader) => {\r\n\tconst { as: Tag = \"a\", href, selected, children, ...restProps } = props;\r\n\r\n\tconst className = classNames(\"i-tree-item-header\", {\r\n\t\t\"i-tree-item-selected\": selected,\r\n\t});\r\n\r\n\tif (typeof Tag === \"string\") {\r\n\t\treturn (\r\n\t\t\t<Tag href={href} className={className} {...restProps}>\r\n\t\t\t\t{children}\r\n\t\t\t</Tag>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Tag to={href || \"\"} className={className} {...restProps}>\r\n\t\t\t{children}\r\n\t\t</Tag>\r\n\t);\r\n};\r\n\r\nexport const TreeItem = (props: PropsTreeItem) => {\r\n\tconst {\r\n\t\titem,\r\n\t\tdepth = 0,\r\n\t\tindex,\r\n\t\tselected,\r\n\t\tchecked = [],\r\n\t\tpartofs = {},\r\n\t\tcheckable,\r\n\t\tnodeProps,\r\n\t\trenderExtra,\r\n\t\tonItemClick,\r\n\t\tonItemSelect,\r\n\t\tonItemCheck,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst { as, key = \"\", href, icon, title, expanded, disabled } = item;\r\n\tconst children = item[nodeProps.children];\r\n\r\n\tconst [expand, setExpand] = useState(expanded);\r\n\r\n\tconst handleExpand = useMemoizedFn(\r\n\t\t(e: MouseEvent<HTMLElement>, fromToggle?: boolean) => {\r\n\t\t\tif (fromToggle) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tif (disabled || !children?.length) return;\r\n\r\n\t\t\tsetExpand((v) => !v);\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleItemClick = useMemoizedFn((e: MouseEvent<HTMLElement>) => {\r\n\t\tif (disabled) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thandleExpand(e);\r\n\t\tonItemClick?.(item, e);\r\n\t\tonItemSelect?.(key, item);\r\n\t});\r\n\r\n\tconst handleItemCheck = (checked) => onItemCheck?.(item, checked, []);\r\n\tconst itemChecked = checked.includes(key);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-tree-item\", {\r\n\t\t\t\t\"i-tree-expand\": expand,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t<Header\r\n\t\t\t\tas={as}\r\n\t\t\t\thref={href}\r\n\t\t\t\tstyle={{ paddingLeft: `${depth * 1.5 + 0.5}em` }}\r\n\t\t\t\tselected={selected === key}\r\n\t\t\t\tonClick={handleItemClick}\r\n\t\t\t>\r\n\t\t\t\t{checkable && (\r\n\t\t\t\t\t<Checkbox.Item\r\n\t\t\t\t\t\tvalue={itemChecked}\r\n\t\t\t\t\t\tpartof={!itemChecked && partofs[key]}\r\n\t\t\t\t\t\tclassName='i-tree-checkbox'\r\n\t\t\t\t\t\tonChange={handleItemCheck}\r\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{icon && <span className='i-tree-item-icon'>{icon}</span>}\r\n\r\n\t\t\t\t<span className='i-tree-item-title'>{title}</span>\r\n\r\n\t\t\t\t{renderExtra?.(item)}\r\n\r\n\t\t\t\t{children && (\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<KeyboardArrowDownRound />}\r\n\t\t\t\t\t\tclassName='i-tree-toggle'\r\n\t\t\t\t\t\tonClick={(e) => handleExpand(e, true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Header>\r\n\r\n\t\t\t{children?.length && (\r\n\t\t\t\t<div className='i-tree-item-content'>\r\n\t\t\t\t\t<TreeList\r\n\t\t\t\t\t\tdata={children}\r\n\t\t\t\t\t\tdepth={depth + 1}\r\n\t\t\t\t\t\tselected={selected}\r\n\t\t\t\t\t\tcheckable={checkable}\r\n\t\t\t\t\t\tparent={item}\r\n\t\t\t\t\t\tpartofs={partofs}\r\n\t\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\t\tnodeProps={nodeProps}\r\n\t\t\t\t\t\trenderExtra={renderExtra}\r\n\t\t\t\t\t\tonItemClick={onItemClick}\r\n\t\t\t\t\t\tonItemSelect={onItemSelect}\r\n\t\t\t\t\t\tonItemCheck={onItemCheck}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import classNames from \"classnames\";\r\nimport { TreeItem } from \"./item\";\r\nimport { ITree } from \"./type\";\r\n\r\ninterface ITreeList extends Omit<ITree, \"nodeProps\"> {\r\n\tnodeProps: {\r\n\t\tkey: string;\r\n\t\ttitle: string;\r\n\t\tchildren: string;\r\n\t};\r\n}\r\n\r\nfunction TreeList(props: ITreeList) {\r\n\tconst {\r\n\t\tdata = [],\r\n\t\tdepth = 0,\r\n\t\tround,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tparent,\r\n\t\tnodeProps,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst contents = data.map((item, i) => {\r\n\t\tconst { type } = item;\r\n\t\tconst title = item[nodeProps.title];\r\n\t\tconst itemKey =\r\n\t\t\titem[nodeProps.key] ||\r\n\t\t\t(parent?.key !== undefined ? `${parent.key}-${i}` : `${i}`);\r\n\r\n\t\titem.key = itemKey;\r\n\t\titem.parent = parent;\r\n\r\n\t\tif (type === \"title\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div key={i} className='i-tree-group-title'>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (type && type !== \"item\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div key={i} className={`i-tree-type-${type}`}>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<TreeItem\r\n\t\t\t\tkey={itemKey}\r\n\t\t\t\tindex={i}\r\n\t\t\t\titem={item}\r\n\t\t\t\tdepth={depth}\r\n\t\t\t\tnodeProps={nodeProps}\r\n\t\t\t\t{...restProps}\r\n\t\t\t/>\r\n\t\t);\r\n\t});\r\n\r\n\tif (depth > 0) return <>{contents}</>;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-tree\", className, {\r\n\t\t\t\t\"i-tree-round\": round,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{contents}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TreeList;\r\n","import { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport { forwardRef, useEffect, useImperativeHandle } from \"react\";\r\nimport \"./index.css\";\r\nimport TreeList from \"./list\";\r\nimport { ITree, ITreeItem, RefTree } from \"./type\";\r\n\r\nconst defaultNodeProps = {\r\n\tkey: \"key\",\r\n\ttitle: \"title\",\r\n\tchildren: \"children\",\r\n};\r\n\r\nconst Tree = forwardRef<RefTree, ITree>((props, ref) => {\r\n\tconst {\r\n\t\tdata = [],\r\n\t\tselected,\r\n\t\tchecked = [],\r\n\t\tdisabledRelated,\r\n\t\tnodeProps,\r\n\t\tonItemSelect,\r\n\t\tonItemCheck,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst state = useReactive({\r\n\t\tselected,\r\n\t\tchecked,\r\n\t\tpartofs: {} as Record<string, boolean>,\r\n\t\tnodeMaps: new Map(),\r\n\t});\r\n\tconst oNodeProps = Object.assign({}, defaultNodeProps, nodeProps);\r\n\r\n\tconst isChecked = (key?: string) => state.checked.includes(key || \"\");\r\n\r\n\tconst checkItem = useMemoizedFn(\r\n\t\t(item: ITreeItem, checked: boolean, direction?: \"root\" | \"leaf\") => {\r\n\t\t\tconst { key = \"\", parent, children } = item;\r\n\t\t\tconst shouldChanged = { [key]: checked };\r\n\t\t\tconst partofs = { [key]: false };\r\n\r\n\t\t\tif (disabledRelated) return [shouldChanged];\r\n\r\n\t\t\tif (checked) {\r\n\t\t\t\tif (parent && direction !== \"leaf\") {\r\n\t\t\t\t\tconst hasUnchecked = parent.children?.some(\r\n\t\t\t\t\t\t(o) => o.key !== key && !isChecked(o.key)\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst [changes, parts] = checkItem(parent, true, \"root\");\r\n\r\n\t\t\t\t\tif (!hasUnchecked) {\r\n\t\t\t\t\t\tObject.assign(shouldChanged, changes);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tObject.assign(partofs, hasUnchecked ? parts : {}, {\r\n\t\t\t\t\t\t[parent.key as string]: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (children?.length && direction !== \"root\") {\r\n\t\t\t\t\tchildren.map((o) => {\r\n\t\t\t\t\t\tif (isChecked(o.key)) return;\r\n\r\n\t\t\t\t\t\tconst [changes] = checkItem(o, true, \"leaf\");\r\n\r\n\t\t\t\t\t\tObject.assign(shouldChanged, changes);\r\n\t\t\t\t\t\tpartofs[o.key as string] = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn [shouldChanged, partofs];\r\n\t\t\t}\r\n\r\n\t\t\tif (parent && direction !== \"leaf\") {\r\n\t\t\t\tconst [changes, parts] = checkItem(parent, false, \"root\");\r\n\r\n\t\t\t\tObject.assign(shouldChanged, changes);\r\n\r\n\t\t\t\tconst hasChecked = parent.children?.some(\r\n\t\t\t\t\t(o) => isChecked(o.key) && o.key !== key\r\n\t\t\t\t);\r\n\r\n\t\t\t\tObject.assign(partofs, hasChecked ? {} : parts, {\r\n\t\t\t\t\t[parent.key as string]: hasChecked,\r\n\t\t\t\t\t[key]: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (children?.length && direction !== \"root\") {\r\n\t\t\t\tchildren.map((o) => {\r\n\t\t\t\t\tconst [changes] = checkItem(o, false, \"leaf\");\r\n\r\n\t\t\t\t\tif (!isChecked(o.key)) return;\r\n\r\n\t\t\t\t\tObject.assign(shouldChanged, changes);\r\n\t\t\t\t\tpartofs[o.key as string] = false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn [shouldChanged, partofs];\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleCheck = (item: ITreeItem, checked: boolean) => {\r\n\t\tconst [shouldChanged, partofs] = checkItem(item, checked);\r\n\t\tconst changedKeys = Object.keys(shouldChanged);\r\n\r\n\t\tstate.checked = checked\r\n\t\t\t? Array.from(new Set([...state.checked, ...changedKeys]))\r\n\t\t\t: state.checked.filter((k) => !changedKeys.includes(k));\r\n\r\n\t\tObject.assign(state.partofs, partofs);\r\n\r\n\t\tonItemCheck?.(item, checked, state.checked);\r\n\t};\r\n\r\n\tconst handleSelect = (key: string, item: ITreeItem) => {\r\n\t\tif (!props.selectable) return;\r\n\r\n\t\tstate.selected = key;\r\n\t\tonItemSelect?.(key, item);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (selected === undefined) return;\r\n\r\n\t\tstate.selected = selected;\r\n\t}, [selected]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.nodeMaps.clear();\r\n\r\n\t\tconst { key, children } = oNodeProps;\r\n\t\tconst recursive = (nodes) => {\r\n\t\t\tnodes.map((o) => {\r\n\t\t\t\tstate.nodeMaps.set(o[key], o);\r\n\r\n\t\t\t\to[children]?.length > 0 && recursive(o[children]);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\trecursive(data);\r\n\t}, [data]);\r\n\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {\r\n\t\t\tgetChecked: () => {\r\n\t\t\t\tconst items: ITreeItem[] = [];\r\n\t\t\t\tstate.checked.map((k) => {\r\n\t\t\t\t\tconst item = state.nodeMaps.get(k);\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t});\r\n\t\t\t\treturn [state.checked, items];\r\n\t\t\t},\r\n\t\t\tgetSelected: () => {\r\n\t\t\t\tconst item = state.nodeMaps.get(state.selected);\r\n\t\t\t\treturn [state.selected, item];\r\n\t\t\t},\r\n\t\t\tgetPartofs: () => {\r\n\t\t\t\tconst items: ITreeItem[] = [];\r\n\t\t\t\tconst keys = Object.keys(state.partofs).filter((k) => {\r\n\t\t\t\t\tconst indeterminate = state.partofs[k];\r\n\r\n\t\t\t\t\tif (indeterminate) {\r\n\t\t\t\t\t\tconst item = state.nodeMaps.get(k);\r\n\t\t\t\t\t\titems.push(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn indeterminate;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn [keys, items];\r\n\t\t\t},\r\n\t\t};\r\n\t});\r\n\r\n\treturn (\r\n\t\t<TreeList\r\n\t\t\tdata={data}\r\n\t\t\tselected={state.selected}\r\n\t\t\tchecked={state.checked}\r\n\t\t\tpartofs={state.partofs}\r\n\t\t\tnodeProps={oNodeProps}\r\n\t\t\tonItemCheck={handleCheck}\r\n\t\t\tonItemSelect={handleSelect}\r\n\t\t\t{...restProps}\r\n\t\t/>\r\n\t);\r\n});\r\n\r\nexport default Tree;\r\n","import { TFileType } from \"@p/js/usePreview/type\";\r\nimport { formatBytes, getFileType } from \"@p/js/utils\";\r\nimport { ListAltRound } from \"@ricons/material\";\r\nimport { title } from \"radash\";\r\nimport Icon from \"../icon\";\r\nimport Image from \"../image\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport { IUploadItem } from \"./type\";\r\n\r\nexport default function RenderFile(props: IUploadItem) {\r\n\tconst { mode, index, file, onRemove, onPreview } = props;\r\n\r\n\tif (!file) return \"\";\r\n\tconst { name, size, url, src } = file;\r\n\tconst type = getFileType(name, file.type);\r\n\r\n\tconst CloseBtn = (\r\n\t\t<Helpericon\r\n\t\t\tactive\r\n\t\t\tclassName='i-upload-delete'\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tonRemove(index);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n\r\n\tswitch (mode) {\r\n\t\tcase \"card\":\r\n\t\t\tlet node = <></>;\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase TFileType.IMAGE:\r\n\t\t\t\t\tnode = (\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tlazyload\r\n\t\t\t\t\t\t\tsrc={url || src}\r\n\t\t\t\t\t\t\tfit='cover'\r\n\t\t\t\t\t\t\tusePreview={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase TFileType.VIDEO:\r\n\t\t\t\t\tnode = <video src={url || src} preload='none' />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnode = (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Icon icon={<ListAltRound />} />\r\n\t\t\t\t\t\t\t<span className='i-upload-file-name'>\r\n\t\t\t\t\t\t\t\t{title(name)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\ttitle={name}\r\n\t\t\t\t\tclassName='i-upload-item-card'\r\n\t\t\t\t\tonClick={() => onPreview?.(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{node}\r\n\r\n\t\t\t\t\t{CloseBtn}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='i-upload-item'\r\n\t\t\t\t\tonClick={() => onPreview?.(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{name}</span>\r\n\r\n\t\t\t\t\t<i className='i-upload-size'>{formatBytes(size ?? 0)}</i>\r\n\r\n\t\t\t\t\t{CloseBtn}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n","import usePreview from \"@p/js/usePreview\";\r\nimport { TPreviewItem } from \"@p/js/usePreview/type\";\r\nimport { CloudUploadTwotone, PlusSharp } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { uid } from \"radash\";\r\nimport {\r\n\tCSSProperties,\r\n\tChangeEvent,\r\n\tFragment,\r\n\tforwardRef,\r\n\tuseEffect,\r\n\tuseImperativeHandle,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport InputContainer from \"../input/container\";\r\nimport \"./index.css\";\r\nimport renderFile from \"./renderFile\";\r\nimport { IFile, IUpload, RefUpload } from \"./type\";\r\n\r\nconst Upload = forwardRef<RefUpload, IUpload>((props, ref): JSX.Element => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tlabelInline,\r\n\t\tvalue,\r\n\t\tfiles = [],\r\n\t\tplaceholder,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\tclassName,\r\n\t\tstyle,\r\n\t\tchildren,\r\n\t\tmode = \"default\",\r\n\t\tcardSize = \"4em\",\r\n\t\tdisabled,\r\n\t\tlimit = props.multiple ? Infinity : 1,\r\n\t\tmultiple,\r\n\t\trenderItem = renderFile,\r\n\t\tshouldUpload = () => true,\r\n\t\tuploader,\r\n\t\tonChange,\r\n\t\tonFilesChange,\r\n\t\tonUpload,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tfiles,\r\n\t\tvalue,\r\n\t\tstatus,\r\n\t\tmessage,\r\n\t\tupdate: 0,\r\n\t});\r\n\tconst inputRef = useRef<HTMLInputElement>(null);\r\n\tconst preview = usePreview();\r\n\r\n\tconst trigger = useMemo(() => {\r\n\t\tif (children) return children;\r\n\r\n\t\tswitch (mode) {\r\n\t\t\tcase \"card\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName='i-upload-card-btn color-5'\r\n\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\tflat\r\n\t\t\t\t\t\toutline\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon icon={<PlusSharp />} />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Button className='i-upload-btn' disabled={disabled}>\r\n\t\t\t\t\t\t<Icon icon={<CloudUploadTwotone />} /> Upload\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t);\r\n\t\t}\r\n\t}, [mode, children]);\r\n\r\n\tconst handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst files = Array.from(e.target.files || []) as IFile[];\r\n\t\tconst { files: before } = state;\r\n\t\tconst changed: IFile[] = [];\r\n\r\n\t\tfiles.map((f) => {\r\n\t\t\tconst { name, size, type } = f;\r\n\t\t\tconst same = before.find((pf) => {\r\n\t\t\t\tconst { name: n, size: s, type: t } = pf;\r\n\t\t\t\treturn n === name && s === size && t === type;\r\n\t\t\t});\r\n\r\n\t\t\tconst src = URL.createObjectURL(f);\r\n\t\t\tf.src = src;\r\n\t\t\tstate.update += 1;\r\n\r\n\t\t\tObject.assign(f, {\r\n\t\t\t\tuid: uid(7),\r\n\t\t\t\tsrc: f.src || f.name,\r\n\t\t\t});\r\n\t\t\t!same && changed.push(f);\r\n\t\t});\r\n\r\n\t\tconst after = [...before, ...changed];\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tfiles: multiple ? after.slice(0, limit) : [after.at(-1)],\r\n\t\t\tstatus,\r\n\t\t\tmessage,\r\n\t\t});\r\n\r\n\t\tonFilesChange?.(state.files, changed, e);\r\n\t\tonChange?.(state.files, e);\r\n\r\n\t\thandleUpload(changed);\r\n\t\tinputRef.current && (inputRef.current.value = \"\");\r\n\t};\r\n\r\n\tconst handleRemove = (i: number) => {\r\n\t\tconst [...files] = state.files;\r\n\r\n\t\tconst changed = files.splice(i, 1);\r\n\t\tURL.revokeObjectURL(changed[0]?.src || \"\");\r\n\r\n\t\tstate.files = files;\r\n\t\tonFilesChange?.(files, changed);\r\n\t\tonChange?.(files);\r\n\r\n\t\tinputRef.current && (inputRef.current.value = \"\");\r\n\t};\r\n\r\n\tconst handleUpload = async (files: IFile[]) => {\r\n\t\tif (!uploader) return;\r\n\r\n\t\tfiles.forEach(async (file) => {\r\n\t\t\tif (!shouldUpload(file)) return;\r\n\r\n\t\t\tconst result = await uploader(file);\r\n\t\t\tconst i = state.files.findIndex((f) => f.uid === result.uid);\r\n\t\t\ti > -1 && (state.files[i] = result);\r\n\r\n\t\t\tresult?.status === \"completed\" && onUpload?.(result);\r\n\t\t});\r\n\t};\r\n\r\n\tconst handlePreview = (i: number) => {\r\n\t\tpreview({ items: state.files as TPreviewItem[], initial: i });\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tObject.assign(state, {\r\n\t\t\tstatus,\r\n\t\t\tmessage,\r\n\t\t});\r\n\t}, [status, message]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tuseImperativeHandle(\r\n\t\tref,\r\n\t\t() => ({\r\n\t\t\tgetFileList: () => state.files,\r\n\t\t}),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst { message: msg, files: currentFiles } = state;\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={classNames(\"i-input-label-file\", className)}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\t{...restProps}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\ttype='file'\r\n\t\t\t\tclassName='i-input-file-hidden'\r\n\t\t\t\tmultiple={multiple}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-upload-inner\", {\r\n\t\t\t\t\t[`i-upload-${mode}`]: mode !== \"default\",\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{ [\"--upload-card-size\"]: cardSize } as CSSProperties}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='i-upload-list'\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{currentFiles?.map((file: File, i: number) => (\r\n\t\t\t\t\t\t<Fragment key={i}>\r\n\t\t\t\t\t\t\t{renderFile({\r\n\t\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\t\t\tmode,\r\n\t\t\t\t\t\t\t\tonRemove: handleRemove,\r\n\t\t\t\t\t\t\t\tonPreview: handlePreview,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{msg && <span className='i-upload-message'>{msg}</span>}\r\n\r\n\t\t\t\t{currentFiles.length < limit && trigger}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n});\r\n\r\nexport default Upload;\r\n","import \"./ripple.css\";\r\n\r\nconst state = {\r\n\tenable: false,\r\n\ttimeout: 500,\r\n};\r\n\r\nconst useRipple = () => {\r\n\tif (state.enable) return;\r\n\tstate.enable = true;\r\n\r\n\tdocument.addEventListener(\"mousedown\", listener);\r\n};\r\n\r\nfunction listener(e: MouseEvent) {\r\n\tconst target = e.target as HTMLElement;\r\n\tconst parent = target.closest(\"[data-ripple]\") as HTMLElement;\r\n\r\n\tif (!target || !parent) return;\r\n\r\n\ttriggerRipple(parent, e);\r\n}\r\n\r\nfunction triggerRipple(target: HTMLElement, e: MouseEvent) {\r\n\tconst [$box, $ripple] = createRipple();\r\n\tconst rect = target.getBoundingClientRect();\r\n\tconst size = Math.max(rect.width, rect.height) * 2;\r\n\r\n\t$ripple.style.cssText = `\r\n        left: ${e.pageX - rect.left}px;\r\n        top: ${e.pageY - rect.top}px;\r\n        width: ${size}px;\r\n        height: ${size}px;\r\n        transition: all ${state.timeout / 1000}s;\r\n    `;\r\n\ttarget.insertAdjacentElement(\"afterbegin\", $box);\r\n\ttarget.offsetHeight;\r\n\t$ripple.classList.add(\"i-ripple-active\");\r\n\r\n\tsetTimeout(() => {\r\n\t\t$box.remove();\r\n\t}, state.timeout);\r\n}\r\n\r\nfunction createRipple() {\r\n\tconst $box = document.createElement(\"SPAN\");\r\n\tconst $ripple = document.createElement(\"SPAN\");\r\n\r\n\t$box.className = \"i-ripple-container\";\r\n\t$ripple.className = \"i-ripple\";\r\n\r\n\t$box.append($ripple);\r\n\r\n\treturn [$box, $ripple];\r\n}\r\n\r\nexport default useRipple;\r\n"],"names":["Loading","props","icon","text","size","style","className","rest","_jsxs","classNames","fontSize","children","_jsx","width","height","stroke","viewBox","xmlns","cx","cy","r","fill","strokeWidth","strokeLinecap","strokeDasharray","strokeDashoffset","formatClass","outline","flat","loading","disabled","block","round","square","secondary","classnames","Button","forwardRef","ref","as","As","href","ripple","onClick","restProps","childNodes","createElement","key","attrs","e","stopPropagation","to","Toggle","active","activeClass","after","onToggle","state","useReactive","done","toggle","useCallback","hasAfter","undefined","nextActive","Object","assign","setTimeout","useEffect","Group","vertical","Icon","rotate","isValidElement","elProps","transform","cloneElement","ToTop","SkipPreviousRound","Affix","position","left","top","right","bottom","offset","getContainer","document","body","hidden","setHidden","useState","hijackChildren","useMemo","Children","map","node","type","container","scrollTo","behavior","console","log","listener","debounce","delay","scrollTop","addEventListener","removeEventListener","Area","layout","Item","name","Scrollbars","gridArea","autoHide","renderView","Badge","content","contentClass","dot","dotSize","rounded","Header","Footer","Banner","Tailer","Card","shadow","border","slots","nodes","child","header","banner","footer","tailer","TFileType","getPosition","$source","$popup","options","refWindow","gap","align","arrowX","arrowY","arrowPos","rectT","getBoundingClientRect","rectC","w","window","innerWidth","h","innerHeight","tl","tt","tr","tb","tw","th","ch","cw","rectPa","offsetParent","offsetLeft","offsetTop","y","x","computePosition","containerSize","targetSize","targetOffset","contentSize","xl","xr","yt","yb","getPointPosition","pageX","pageY","wh","ww","centerPoint","result","formatOption","option","includes","label","value","formatNumber","precision","thousand","toFixed","points","split","integer","replace","length","renderNode","div","append","root","createRoot","sto","render","remove","unmount","clearTimeout","getSuffixByUrl","url","match","getFileType","suffix","startsWith","formatBytes","bytes","decimals","dm","i","Math","floor","parseFloat","pow","clamp","min","max","CheckboxItem","status","message","partof","onChange","handleChange","useMemoizedFn","checked","target","Checkbox","optionInline","labelInline","required","formattedOptions","opt","group","findIndex","item","push","splice","Helpericon","CloseRound","uid","Collapse","items","multiple","headerClickable","renderToggle","MinusRound","PlusRound","onCollapse","collapses","nodeProps","title","handleToggle","Array","isArray","k","isActive","handleHeaderClick","Empty","InboxTwotone","getCellStyle","justify","col","row","colSpan","rowSpan","insetInline","Cell","column","data","onCellClick","onCellDoubleClick","id","fixed","onDoubleClick","MouseMoveEvents","Set","MouseUpEvents","useMouseMove","add","delete","useMouseUp","useIntersectionObserver","configs","WM","WeakMap","IO","IntersectionObserver","entries","entry","callback","get","isIntersecting","observe","set","unobserve","disconnect","Resize","index","onWidthChange","resizing","handleMouseDown","offsetWidth","preventDefault","onMouseDown","values","Arrow","d","Sorter","Row","columns","onRowClick","resizable","sortBy","sortType","onHeaderClick","sorter","renderHeader","order","insetBlockStart","Datagrid","striped","cellPadding","empty","renderLoading","onSort","onScroll","onResize","useRef","scrollbar","rows","widths","styles","o","join","fws","isLeft","sum","slice","reduce","pre","cur","handleWidthChange","ws","prevSortBy","prevSortType","types","t","getNextSorter","find","sortFn","a","b","sorted","sort","reverse","current","tds","querySelector","from","scrollBarStyle","ScrollContainer","autoHeight","autoHeightMax","InputContainer","tip","Number","initValue","step","Infinity","prepend","hideControl","onEnter","onInput","onBlur","getRangeNumber","v","getFormatNumber","formatInputValue","replaceAll","handleOperate","param","inputProps","Textarea","autoSize","refTextarea","ta","firstChild","scrollHeight","handleKeydown","code","onKeyDown","Input","clear","hideVisible","visible","HelperIcon","VisibilityRound","VisibilityOffRound","clearable","showHelper","Range","placeholder","range","handleSwitch","SyncAltRound","margin","Content","trigger","arrow","arrowProps","arrowCSS","pos","createPortal","Popup","showDelay","hideDelay","touchable","fitSize","watchResize","clickOutside","referToWindow","onVisibleChange","triggerRef","contentRef","show","toggling","useClickAway","tar","isContain","contains","handleShow","opacity","handleHide","action","eventMaps","useCreation","click","hover","onMouseEnter","onMouseLeave","focus","onFocus","contextmenu","onContextMenu","none","contentTouch","events","ResizeObserver","useResizeObserver","useLayoutEffect","_Fragment","Dates","month","weeks","renderDate","date","disabledDate","onDateClick","today","dayjs","dates","lastDateOfLastMonth","endOf","$W","$D","lastMonthDates","whatever","lastDate","handleDateClick","week","isSame","isSameMonth","isToday","MONTHS","YearMonth","unitMonth","unitYear","renderYear","renderMonth","year","Panel","m","selectedYear","years","selectable","$years","handleOperateMonth","next","getMoreYears","throttle","interval","isUp","deltaY","_","KeyboardArrowLeftRound","KeyboardArrowRightRound","onWheel","handleChangeMonth","extend","customParseFormat","FORMATTYPES","Datepicker","format","popupProps","setActive","dayJsValue","isValid","handleSetDate","CalendarMonthTwotone","Description","colon","labelWidth","labelAlign","equally","gridTemplateColumns","textAlign","Fragment","gridColumn","gridRow","Drawer","backdropClosable","hideCloseButton","onClose","setShow","toggable","handleBackdropClick","Dropdown","List","minWidth","alignItems","renderLabel","Virtual","itemKey","renderItem","VList","ListItem","more","moreProps","Li","Flex","Component","direction","wrap","gridColumns","justifyContent","flexDirection","flexWrap","Context","createContext","IFormInstance","rules","constructor","this","field","PubSub","publish","keys","validate","rule","validator","isAllValid","Form","form","initialValues","Provider","DefaultContent","footerLeft","okButtonProps","onOk","cancelButtonProps","showHeader","renderFooter","propsOk","propsCancel","Modal","closable","hideBackdrop","customized","bounced","setBounced","useForm","formRef","Field","update","useContext","args","subscribe","evt","unsubscribe","useModal","open","unMount","HookModal","useImperativeHandle","config","Text","Tag","weight","decoration","gradient","gradients","background","backgroundClip","fontWeight","textDecoration","Circle","pathLength","Highlight","count","decimal","duration","easing","n","setN","number","z","start","performance","now","diff","raf","requestAnimationFrame","loop","percent","cancelAnimationFrame","pass","animate","Time","seconds","zero","units","time","l","unshift","formatTime","Line","barClass","dragging","renderCursor","Progress","draggable","toFixedValue","rect","handleMouseMove","handleMouseUp","Video","hideControls","autoplay","muted","volume","useOriginControls","timeProgressProps","volumeProgressProps","onFullScreenChange","playing","volumeCache","isFullscreen","$v","timeUpdateListener","paused","currentTime","playChangeListener","fsChangeListener","parentElement","fullscreenElement","volumeChangeListener","handlePlay","play","pause","handleStop","handleFullscreen","fs","el","exitFullscreen","requestFullscreen","stop","fullscreen","getVideo","onCanPlay","controls","PauseRound","PlayArrowRound","StopRound","FullscreenExitRound","FullscreenRound","VolumeOffRound","VolumeDownRound","renderFile","IMAGE","src","VIDEO","FeedOutlined","initial","DefaultRenderFile","onRotate","onZoom","scale","translate","box","files","file","isImage","before","handleRotate","deg","handleMouseWheel","AspectRatioRound","OpenInNewRound","download","FileDownloadOutlined","RotateRightRound","RotateLeftRound","usePreview","modalProps","Image","initSize","lazyload","fallback","HideImageTwotone","fit","previewable","onLoad","onError","preview","setAttribute","dataset","iSize","objectFit","err","img","handleClick","AlignMap","center","GlobalConfig","ItemDefaultConfig","createContainer","handler","callout","close","queue","heights","tops","onShow","offsetHeight","bind","onHide","timer","renderItems","MessageItem","alignSelf","Page","page","setLoading","async","Pagination","defaultPage","total","sibling","prev","simple","jumper","renderEllipsis","MoreHorizRound","renderPage","setPage","totalPage","ceil","end","handlePageChange","p","Promise","resolve","defaultOk","defaultCancel","Popconfirm","InfoOutlined","extra","ok","cancel","popconfirmContent","RadioItem","Radio","Options","val","filter","filterPlaceholder","onSelect","onFilter","SearchRound","CheckRound","displayValue","maxDisplay","flatMap","activeOptions","Select","hideClear","inputValue","filterValue","filterOptions","fv","filterFn","changeValue","handleSelect","handleFilterChange","hasValue","readOnly","UnfoldMoreRound","Divider","STATUS","defaultRenderIcon","renderIcon","line","Step","steps","transition","itemHeight","selfStyle","Swiper","display","scroll","pauseOnHover","dragOffset","indicator","renderIndicator","onBeforeSwipe","onAfterSwipe","listRef","timerRef","swipable","dragStart","initialized","displayItems","listSize","list","head","offsetPercent","trackStyle","indicatorsLoop","clearTimer","swipeTo","reset","lastDisplay","swipeNext","swipePrev","clientY","clientX","dragEnd","part","absOffset","abs","onMouseOver","itemProps","Tabs","tabs","bar","hideMore","renderMore","onTabChange","navRefs","barRef","navsRef","prevActive","barStyle","cachedTabs","overflow","useSize","keepDOM","cloned","pick","String","tab","tkey","scrollBy","deltaX","scrollWidth","nav","intersecting","isLine","passive","navs","flex","dotClass","selected","TreeItem","depth","partofs","checkable","renderExtra","onItemClick","onItemSelect","onItemCheck","expanded","expand","setExpand","handleExpand","fromToggle","handleItemClick","itemChecked","paddingLeft","KeyboardArrowDownRound","TreeList","parent","contents","defaultNodeProps","Tree","disabledRelated","nodeMaps","Map","oNodeProps","isChecked","checkItem","shouldChanged","hasUnchecked","some","changes","parts","hasChecked","recursive","getChecked","getSelected","getPartofs","indeterminate","changedKeys","RenderFile","mode","onRemove","onPreview","CloseBtn","preload","ListAltRound","Upload","cardSize","limit","shouldUpload","uploader","onFilesChange","onUpload","inputRef","PlusSharp","CloudUploadTwotone","handleRemove","changed","URL","revokeObjectURL","handleUpload","forEach","f","handlePreview","getFileList","msg","currentFiles","same","pf","s","createObjectURL","at","enable","timeout","useRipple","closest","$box","$ripple","createRipple","cssText","insertAdjacentElement","classList","triggerRipple"],"mappings":"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"}