{"version":3,"file":"index.js","sources":["../packages/components/loading/loading.tsx","../packages/components/button/button.tsx","../packages/components/button/index.tsx","../packages/components/button/toggle.tsx","../packages/components/button/group.tsx","../packages/components/icon/icon.tsx","../packages/components/affix/totop.tsx","../packages/components/affix/affix.tsx","../packages/components/badge/badge.tsx","../packages/components/card/area.tsx","../packages/components/card/card.tsx","../packages/js/usePreview/type.ts","../packages/js/utils.ts","../packages/components/checkbox/item.tsx","../packages/components/checkbox/checkbox.tsx","../packages/components/utils/helpericon/helpericon.tsx","../packages/components/collapse/collapse.tsx","../packages/components/utils/empty/index.tsx","../packages/components/datagrid/cell.tsx","../packages/components/collapse/item.tsx","../packages/js/hooks.ts","../packages/components/datagrid/resize.tsx","../packages/components/datagrid/sorter.tsx","../packages/components/datagrid/row.tsx","../packages/components/datagrid/datagrid.tsx","../packages/components/input/container.tsx","../packages/components/input/input.tsx","../packages/components/input/number.tsx","../packages/components/input/textarea.tsx","../packages/components/input/index.tsx","../packages/components/input/range.tsx","../packages/components/popup/content.tsx","../packages/components/popup/popup.tsx","../packages/components/datepicker/dates.tsx","../packages/components/datepicker/panel.tsx","../packages/components/datepicker/datepicker.tsx","../packages/components/description/description.tsx","../packages/components/drawer/drawer.tsx","../packages/components/list/item.tsx","../packages/components/list/list.tsx","../packages/components/list/virtual.tsx","../packages/components/dropdown/item.tsx","../packages/components/dropdown/dropdown.tsx","../packages/components/flex/flex.tsx","../packages/components/form/context.tsx","../packages/components/form/useForm.ts","../packages/components/form/form.tsx","../packages/components/modal/modal.tsx","../packages/components/form/field.tsx","../packages/components/modal/hookModal.tsx","../packages/components/text/text.tsx","../packages/components/progress/circle.tsx","../packages/components/text/index.tsx","../packages/components/text/number.tsx","../packages/components/text/time.tsx","../packages/components/progress/line.tsx","../packages/components/progress/progress.tsx","../packages/components/video/video.tsx","../packages/js/usePreview/renderFile.tsx","../packages/js/usePreview/content.tsx","../packages/js/usePreview/index.tsx","../packages/components/image/image.tsx","../packages/components/image/index.tsx","../packages/components/image/list.tsx","../packages/components/message/message.tsx","../packages/components/modal/index.tsx","../packages/components/modal/useModal.tsx","../packages/components/pagination/page.tsx","../packages/components/pagination/pagination.tsx","../packages/components/popconfirm/popconfirm.tsx","../packages/components/radio/item.tsx","../packages/components/radio/radio.tsx","../packages/components/tag/tag.tsx","../packages/components/select/options.tsx","../packages/components/select/select.tsx","../packages/components/step/divider.tsx","../packages/components/step/item.tsx","../packages/components/step/step.tsx","../packages/components/swiper/item.tsx","../packages/components/swiper/swiper.tsx","../packages/components/tabs/item.tsx","../packages/components/tabs/tabs.tsx","../packages/components/tree/item.tsx","../packages/components/tree/tree.tsx","../packages/components/upload/renderFile.tsx","../packages/components/upload/upload.tsx","../packages/js/useRipple/index.ts"],"sourcesContent":["import classNames from \"classnames\";\r\nimport \"./index.css\";\r\nimport { ILoading } from \"./type\";\r\n\r\nconst Loading = (props: ILoading): JSX.Element => {\r\n\tconst { icon, text, size, style = {}, className, ...rest } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-loading-container\", className)}\r\n\t\t\tstyle={{ fontSize: size, ...style }}\r\n\t\t\t{...rest}\r\n\t\t>\r\n\t\t\t{icon || (\r\n\t\t\t\t<svg\r\n\t\t\t\t\twidth='24'\r\n\t\t\t\t\theight='24'\r\n\t\t\t\t\tstroke='#000'\r\n\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tclassName='i-loading-icon'\r\n\t\t\t\t>\r\n\t\t\t\t\t<circle\r\n\t\t\t\t\t\tcx='12'\r\n\t\t\t\t\t\tcy='12'\r\n\t\t\t\t\t\tr='9.5'\r\n\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\tstrokeWidth='3'\r\n\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\tstrokeDasharray={40}\r\n\t\t\t\t\t\tstrokeDashoffset={0}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t)}\r\n\r\n\t\t\t{text}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loading;\r\n","import classnames from \"classnames\";\r\nimport { MouseEvent, createElement, forwardRef } from \"react\";\r\nimport Loading from \"../loading\";\r\nimport \"./index.css\";\r\nimport { CompositionButton, IButton } from \"./type\";\r\n\r\nconst formatClass = ({\r\n\toutline,\r\n\tflat,\r\n\tloading,\r\n\tdisabled,\r\n\tsize = \"normal\",\r\n\tblock,\r\n\tround,\r\n\tsquare,\r\n\tsecondary,\r\n\tclassName,\r\n}: IButton) =>\r\n\tclassnames(\"i-btn\", className, {\r\n\t\t\"i-btn-outline\": outline,\r\n\t\t\"i-btn-flat\": flat,\r\n\t\t\"i-btn-block\": block,\r\n\t\t\"i-btn-loading\": loading,\r\n\t\t\"i-btn-square\": square,\r\n\t\t\"i-btn-secondary\": secondary,\r\n\t\t[`i-btn-${size}`]: size !== \"normal\",\r\n\t\tround,\r\n\t\tdisabled,\r\n\t});\r\n\r\nconst Button = forwardRef<HTMLElement, IButton>((props, ref) => {\r\n\tconst {\r\n\t\tas: As = \"a\",\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\tloading,\r\n\t\tflat,\r\n\t\toutline,\r\n\t\tsquare,\r\n\t\tsecondary,\r\n\t\tsize,\r\n\t\tround,\r\n\t\thref,\r\n\t\tripple = true,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst handleClick = (e: MouseEvent<HTMLElement>) => {\r\n\t\tif (loading || restProps.disabled) {\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonClick?.(e);\r\n\t};\r\n\r\n\tif (!children) return <></>;\r\n\r\n\tconst childNodes = [\r\n\t\tloading && <Loading key='loading' />,\r\n\t\tcreateElement(\r\n\t\t\t\"span\",\r\n\t\t\t{ key: \"content\", className: \"i-btn-content\" },\r\n\t\t\tchildren\r\n\t\t),\r\n\t];\r\n\r\n\tconst attrs = {\r\n\t\tclassName: formatClass(props),\r\n\t\t[\"data-ripple\"]: ripple,\r\n\t\tonClick: handleClick,\r\n\t};\r\n\r\n\tif (typeof As === \"string\") {\r\n\t\treturn createElement(\r\n\t\t\tAs,\r\n\t\t\t{\r\n\t\t\t\tref,\r\n\t\t\t\thref,\r\n\t\t\t\t...attrs,\r\n\t\t\t\t...restProps,\r\n\t\t\t},\r\n\t\t\tchildNodes\r\n\t\t);\r\n\t}\r\n\r\n\treturn createElement(\r\n\t\tAs,\r\n\t\t{\r\n\t\t\tto: href || \"\",\r\n\t\t\t...attrs,\r\n\t\t\t...restProps,\r\n\t\t},\r\n\t\tchildNodes\r\n\t);\r\n}) as CompositionButton;\r\n\r\nexport default Button;\r\n","import Button from \"./button\";\r\nimport Group from \"./group\";\r\nimport Toggle from \"./toggle\";\r\n\r\nButton.Toggle = Toggle;\r\nButton.Group = Group;\r\n\r\nexport default Button;\r\n","import { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { MouseEvent, useCallback, useEffect } from \"react\";\r\nimport Button from \"./button\";\r\nimport { IButtonToggle } from \"./type\";\r\n\r\nexport default function Toggle(props: IButtonToggle) {\r\n\tconst {\r\n\t\tactive,\r\n\t\tactiveClass,\r\n\t\tafter,\r\n\t\tdisabled,\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\tonClick,\r\n\t\tonToggle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tactive,\r\n\t\tdone: true,\r\n\t});\r\n\r\n\tconst toggle = useCallback(() => {\r\n\t\tconst hasAfter = after !== undefined;\r\n\t\tconst nextActive = !state.active;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tactive: nextActive,\r\n\t\t\tdone: !hasAfter,\r\n\t\t});\r\n\t\tonToggle?.(nextActive);\r\n\r\n\t\thasAfter &&\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.done = true;\r\n\t\t\t}, 16);\r\n\t}, [after]);\r\n\r\n\tconst handleClick = (e: MouseEvent<HTMLElement>) => {\r\n\t\tonClick?.(e);\r\n\r\n\t\t!disabled && toggle();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.active !== active && toggle();\r\n\t}, [active]);\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tclassName={classNames(\r\n\t\t\t\tclassName,\r\n\t\t\t\t{ [activeClass || \"\"]: state.active },\r\n\t\t\t\t\"i-btn-toggle\"\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-btn-toggle-content\", {\r\n\t\t\t\t\t\"i-btn-toggle-active\": state.done,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{state.active ? after ?? children : children}\r\n\t\t\t</div>\r\n\t\t</Button>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { IButtonGroup } from \"./type\";\r\n\r\nexport default function Group(props: IButtonGroup) {\r\n\tconst { children, vertical, className, style } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\tclassName,\r\n\t\t\t\tvertical ? \"i-btn-group-vertical\" : \"i-btn-group-horizonal\"\r\n\t\t\t)}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { cloneElement, forwardRef, isValidElement } from \"react\";\r\nimport \"./index.css\";\r\nimport { IIcon } from \"./type\";\r\n\r\nconst Icon = forwardRef<HTMLElement, IIcon>((props, ref) => {\r\n\tconst {\r\n\t\ticon,\r\n\t\tsize = \"1.425em\",\r\n\t\trotate,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tif (!isValidElement(icon)) return icon;\r\n\r\n\tconst elProps = {\r\n\t\tref,\r\n\t\tstyle: {\r\n\t\t\ttransform: rotate ? `rotate(${rotate}deg)` : undefined,\r\n\t\t\t...style,\r\n\t\t\twidth: size,\r\n\t\t\theight: size,\r\n\t\t},\r\n\t\tclassName: classNames(\"i-icon\", className),\r\n\t\t...restProps,\r\n\t};\r\n\r\n\treturn cloneElement(icon, elProps);\r\n});\r\n\r\nexport default Icon;\r\n","import { SkipPreviousRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport { IAffix } from \"./type\";\r\n\r\nfunction ToTop(props: IAffix) {\r\n\tconst { style, className, onClick } = props;\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tsquare\r\n\t\t\tclassName={classNames(\"i-affix-totop\", className)}\r\n\t\t\tstyle={{ ...style }}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t<Icon icon={<SkipPreviousRound />} rotate={90} />\r\n\t\t</Button>\r\n\t);\r\n}\r\n\r\nexport default ToTop;\r\n","import classNames from \"classnames\";\r\nimport { debounce } from \"radash\";\r\nimport {\r\n\tChildren,\r\n\tMouseEvent,\r\n\tcloneElement,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseState,\r\n} from \"react\";\r\nimport \"./index.css\";\r\nimport ToTop from \"./totop\";\r\nimport { IAffix } from \"./type\";\r\n\r\nconst Affix = (props: IAffix): JSX.Element => {\r\n\tconst {\r\n\t\tposition = \"fixed\",\r\n\t\tleft,\r\n\t\ttop,\r\n\t\tright,\r\n\t\tbottom,\r\n\t\toffset,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tgetContainer = () => document.body,\r\n\t} = props;\r\n\r\n\tconst [hidden, setHidden] = useState<boolean>(false);\r\n\r\n\tconst hijackChildren = useMemo(\r\n\t\t() =>\r\n\t\t\tChildren.map(children, (node: any) => {\r\n\t\t\t\tif (node.type === ToTop) {\r\n\t\t\t\t\tconst { onClick } = node.props;\r\n\r\n\t\t\t\t\treturn cloneElement(node, {\r\n\t\t\t\t\t\tkey: node.key,\r\n\t\t\t\t\t\t...node.props,\r\n\t\t\t\t\t\tonClick: (e: MouseEvent) => {\r\n\t\t\t\t\t\t\tconst container = getContainer();\r\n\r\n\t\t\t\t\t\t\tonClick?.(e);\r\n\t\t\t\t\t\t\tcontainer?.scrollTo({\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn node;\r\n\t\t\t}),\r\n\t\t[children, getContainer]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst container = getContainer();\r\n\t\tif (!offset || !container) return;\r\n\r\n\t\tconst listener = debounce({ delay: 160 }, () => {\r\n\t\t\tconst top = container.scrollTop;\r\n\r\n\t\t\tsetHidden(top < offset);\r\n\t\t});\r\n\t\tlistener();\r\n\r\n\t\treturn () => {\r\n\t\t\tcontainer.removeEventListener(\"scroll\", listener);\r\n\t\t};\r\n\t}, [offset, getContainer]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-affix\", className, {\r\n\t\t\t\t\"i-affix-hidden\": hidden,\r\n\t\t\t})}\r\n\t\t\tstyle={{\r\n\t\t\t\t...style,\r\n\t\t\t\tposition,\r\n\t\t\t\tleft,\r\n\t\t\t\ttop,\r\n\t\t\t\tright,\r\n\t\t\t\tbottom,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{hijackChildren}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nAffix.ToTop = ToTop;\r\n\r\nexport default Affix;\r\n","import classNames from \"classnames\";\r\nimport \"./index.css\";\r\nimport type { IBadge } from \"./type\";\r\n\r\nconst Badge = (props: IBadge): JSX.Element => {\r\n\tconst {\r\n\t\tcontent,\r\n\t\tcontentClass,\r\n\t\tdot,\r\n\t\tdotSize,\r\n\t\tround,\r\n\t\tdisabled,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\"i-badge\", { rounded: round }, className)}\r\n\t\t>\r\n\t\t\t{children}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-badge-content\", contentClass, {\r\n\t\t\t\t\t\"i-badge-dot\": dot,\r\n\t\t\t\t\t\"i-badge-hidden\": disabled,\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{ fontSize: dotSize }}\r\n\t\t\t>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Badge;\r\n","import classNames from \"classnames\";\r\n\r\nconst Area = (name: string) => (props) =>\r\n\t(\r\n\t\t<div\r\n\t\t\tstyle={props.style}\r\n\t\t\tclassName={classNames(\"i-card-\" + name, props.className)}\r\n\t\t>\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n\r\nconst Header = Area(\"header\") as any;\r\nconst Footer = Area(\"footer\") as any;\r\nconst Banner = Area(\"banner\") as any;\r\nconst Tailer = Area(\"tail\") as any;\r\n\r\nexport { Banner, Footer, Header, Tailer };\r\n","import classNames from \"classnames\";\r\nimport { Children, useMemo } from \"react\";\r\nimport { Banner, Footer, Header, Tailer } from \"./area\";\r\nimport \"./index.css\";\r\nimport { ICard } from \"./type\";\r\n\r\nconst Card = (props: ICard): JSX.Element => {\r\n\tconst { shadow = true, border, style, className, children } = props;\r\n\r\n\tconst slots: any = useMemo(() => {\r\n\t\tconst nodes = {};\r\n\r\n\t\tChildren.map(children, (child: any) => {\r\n\t\t\tconst type = child.type;\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase Header:\r\n\t\t\t\t\tnodes[\"header\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Footer:\r\n\t\t\t\t\tnodes[\"footer\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Banner:\r\n\t\t\t\t\tnodes[\"banner\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Tailer:\r\n\t\t\t\t\tnodes[\"tailer\"] = child;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnodes[\"content\"] = [...(nodes[\"content\"] || []), child];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn nodes;\r\n\t}, [children]);\r\n\r\n\tconst { header, banner, content, footer, tailer } = slots;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\"i-card\", className, {\r\n\t\t\t\tshadow,\r\n\t\t\t\t\"i-card-bordered\": border,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{banner}\r\n\r\n\t\t\t{header}\r\n\r\n\t\t\t{content && <div className='i-card-content'>{content}</div>}\r\n\r\n\t\t\t{footer}\r\n\r\n\t\t\t{tailer}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCard.Header = Header;\r\nCard.Footer = Footer;\r\nCard.Banner = Banner;\r\nCard.Tailer = Tailer;\r\n\r\nexport default Card;\r\n","import { IModal } from \"@p/components/modal/type\";\r\nimport { CSSProperties, ReactNode } from \"react\";\r\n\r\nexport type TPreviewItem = {\r\n\tsrc: string;\r\n\tname?: ReactNode;\r\n\tthumb?: string;\r\n\trotate?: number;\r\n\tzoom?: number;\r\n\tstyle?: CSSProperties;\r\n\ttype?: TFileType;\r\n\tsuffix?: string;\r\n};\r\n\r\nexport enum TFileType {\r\n\tIMAGE = \"IMAGE\",\r\n\tVIDEO = \"VIDEO\",\r\n\tAUDIO = \"AUDIO\",\r\n\tPDF = \"PDF\",\r\n\tEXCEL = \"EXCEL\",\r\n\tTXT = \"TXT\",\r\n\tUNKNOWN = \"UNKNOWN\",\r\n}\r\n\r\nexport interface IPreview {\r\n\titems: (TPreviewItem | string)[];\r\n\tinitial?: number;\r\n\tcontrols?: boolean;\r\n\tloop?: boolean;\r\n\tclassName?: string;\r\n\tstyle?: CSSProperties;\r\n\tmodalProps?: IModal;\r\n\trenderImage?: (file: TPreviewItem) => ReactNode;\r\n\trenderFile?: (file: TPreviewItem) => ReactNode;\r\n\tonClose?: () => void;\r\n\tonChange?: (after: number, before?: number) => void;\r\n\tonZoom?: (scale: number) => void;\r\n\tonRotate?: (deg: number) => void;\r\n}\r\n","import { TFileType } from \"@p/js/usePreview/type\";\r\nimport { TOption, TOptions, TRelativeOptions } from \"@p/type\";\r\nimport { MouseEvent, ReactNode } from \"react\";\r\nimport { Root, createRoot } from \"react-dom/client\";\r\n\r\ntype TComputePosition = {\r\n\tcontainerSize: number;\r\n\ttargetSize: number;\r\n\ttargetOffset: number;\r\n\tcontentSize: number;\r\n\tgap: number;\r\n\talign?: \"start\" | \"center\" | \"end\";\r\n};\r\n\r\nexport function getPosition(\r\n\t$source?: HTMLElement | null,\r\n\t$popup?: HTMLElement | null,\r\n\toptions: TRelativeOptions = {}\r\n): [\r\n\tx: number,\r\n\ty: number,\r\n\tz: {\r\n\t\tarrowX: number;\r\n\t\tarrowY: number;\r\n\t\tarrowPos: string;\r\n\t}\r\n] {\r\n\tconst { refWindow, gap = 0, offset = 0, position = \"top\", align } = options;\r\n\r\n\tif (!$source || !$popup)\r\n\t\treturn [\r\n\t\t\t0,\r\n\t\t\t0,\r\n\t\t\t{\r\n\t\t\t\tarrowX: 0,\r\n\t\t\t\tarrowY: 0,\r\n\t\t\t\tarrowPos: \"bottom\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\tconst rectT = $source.getBoundingClientRect();\r\n\tconst rectC = $popup.getBoundingClientRect();\r\n\r\n\tlet w = window.innerWidth;\r\n\tlet h = window.innerHeight;\r\n\tlet {\r\n\t\tleft: tl,\r\n\t\ttop: tt,\r\n\t\tright: tr,\r\n\t\tbottom: tb,\r\n\t\twidth: tw,\r\n\t\theight: th,\r\n\t} = rectT;\r\n\tconst { height: ch, width: cw } = rectC;\r\n\r\n\tif (!refWindow) {\r\n\t\tconst rectPa = $source.offsetParent?.getBoundingClientRect();\r\n\r\n\t\tw = rectPa?.width || w;\r\n\t\th = rectPa?.height || h;\r\n\t\ttl = $source.offsetLeft;\r\n\t\ttt = $source.offsetTop;\r\n\t\ttr = tl + rectT.width;\r\n\t\ttb = tt + rectT.height;\r\n\t}\r\n\r\n\tlet y = 0;\r\n\tlet x = 0;\r\n\tlet arrowX = 0;\r\n\tlet arrowY = 0;\r\n\tlet arrowPos = \"bottom\";\r\n\r\n\tswitch (position) {\r\n\t\tcase \"left\":\r\n\t\tcase \"right\":\r\n\t\t\ty =\r\n\t\t\t\tth !== ch\r\n\t\t\t\t\t? computePosition({\r\n\t\t\t\t\t\t\tcontainerSize: h,\r\n\t\t\t\t\t\t\ttargetSize: th,\r\n\t\t\t\t\t\t\ttargetOffset: tt,\r\n\t\t\t\t\t\t\tcontentSize: ch,\r\n\t\t\t\t\t\t\tgap,\r\n\t\t\t\t\t\t\talign,\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: tt;\r\n\t\t\tarrowY = y < tt ? tt - y + th / 2 : th / 2;\r\n\r\n\t\t\tconst xl = tl - offset - cw;\r\n\t\t\tconst xr = tr + offset + cw;\r\n\t\t\tif (position === \"left\") {\r\n\t\t\t\tx = xl < 0 ? tr + offset : xl;\r\n\t\t\t\tarrowX = xl < 0 ? 0 : cw;\r\n\t\t\t\tarrowPos = xl < 0 ? \"left\" : \"right\";\r\n\t\t\t} else {\r\n\t\t\t\tx = w > xr ? tr + offset : xl;\r\n\t\t\t\tarrowX = w > xr ? 0 : cw;\r\n\t\t\t\tarrowPos = w > xr ? \"left\" : \"right\";\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"top\":\r\n\t\tcase \"bottom\":\r\n\t\t\tx =\r\n\t\t\t\ttw !== cw\r\n\t\t\t\t\t? computePosition({\r\n\t\t\t\t\t\t\tcontainerSize: w,\r\n\t\t\t\t\t\t\ttargetOffset: tl,\r\n\t\t\t\t\t\t\ttargetSize: tw,\r\n\t\t\t\t\t\t\tcontentSize: cw,\r\n\t\t\t\t\t\t\tgap,\r\n\t\t\t\t\t\t\talign,\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: tl;\r\n\t\t\tarrowX = x > tl ? cw / 2 : tl - x + tw / 2;\r\n\r\n\t\t\tconst yt = tt - offset - ch;\r\n\t\t\tconst yb = tb + offset + ch;\r\n\t\t\tif (position === \"top\") {\r\n\t\t\t\ty = yt < 0 ? tb + offset : yt;\r\n\t\t\t\tarrowY = yt < 0 ? 0 : ch;\r\n\t\t\t\tarrowPos = yt < 0 ? \"top\" : \"bottom\";\r\n\t\t\t} else {\r\n\t\t\t\ty = h > yb ? tb + offset : yt;\r\n\t\t\t\tarrowY = h > yb ? 0 : ch;\r\n\t\t\t\tarrowPos = h > yb ? \"top\" : \"bottom\";\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn [\r\n\t\tx,\r\n\t\ty,\r\n\t\t{\r\n\t\t\tarrowX,\r\n\t\t\tarrowY,\r\n\t\t\tarrowPos,\r\n\t\t},\r\n\t];\r\n}\r\n\r\nexport function getPointPosition(e: MouseEvent, content: HTMLElement) {\r\n\tconst { pageX: x, pageY: y } = e;\r\n\tconst { width: w, height: h } = content.getBoundingClientRect();\r\n\tconst { innerHeight: wh, innerWidth: ww } = window;\r\n\r\n\tconst left = x + w >= ww ? (x - w > 0 ? x - w : x) : x;\r\n\tconst top = y + h >= wh ? (y - h > 0 ? y - h : y) : y;\r\n\r\n\treturn [left, top];\r\n}\r\n\r\nfunction computePosition({\r\n\tcontainerSize,\r\n\ttargetSize,\r\n\ttargetOffset,\r\n\tcontentSize,\r\n\tgap,\r\n\talign = \"center\",\r\n}: TComputePosition) {\r\n\tconst centerPoint = targetOffset + targetSize / 2;\r\n\r\n\tswitch (align) {\r\n\t\tcase \"start\":\r\n\t\t\treturn targetOffset + contentSize > containerSize\r\n\t\t\t\t? targetOffset + targetSize\r\n\t\t\t\t: targetOffset;\r\n\t\tcase \"center\":\r\n\t\t\tif (targetSize >= contentSize) {\r\n\t\t\t\treturn centerPoint - contentSize / 2;\r\n\t\t\t}\r\n\r\n\t\t\tif (centerPoint + contentSize / 2 + gap > containerSize) {\r\n\t\t\t\treturn targetOffset + targetSize - contentSize;\r\n\t\t\t}\r\n\r\n\t\t\tif (centerPoint - contentSize / 2 - gap < 0) {\r\n\t\t\t\treturn gap;\r\n\t\t\t}\r\n\r\n\t\t\treturn centerPoint - contentSize / 2;\r\n\t\tcase \"end\":\r\n\t\t\tconst result = targetOffset + targetSize - contentSize;\r\n\t\t\treturn result > 0 ? result : gap;\r\n\t\tdefault:\r\n\t\t\treturn centerPoint - contentSize / 2;\r\n\t}\r\n}\r\n\r\nexport function formatOption(options: TOptions): TOption[] {\r\n\treturn options.map((option) =>\r\n\t\t[\"string\", \"number\"].includes(typeof option)\r\n\t\t\t? { label: option, value: option }\r\n\t\t\t: option\r\n\t) as TOption[];\r\n}\r\n\r\nexport function animate(\r\n\tfrom: number,\r\n\tto: number,\r\n\tduration: number = 1000,\r\n\tcallback?: (v: number) => void,\r\n\teasing: (t: number) => number = (t) => 1 - Math.pow(1 - t, 4)\r\n) {\r\n\tconst start = performance.now();\r\n\tconst diff = to - from;\r\n\tlet raf = requestAnimationFrame(loop);\r\n\r\n\tfunction loop() {\r\n\t\traf = requestAnimationFrame(loop);\r\n\r\n\t\tconst past = performance.now() - start;\r\n\t\tlet percent = past / duration;\r\n\r\n\t\tif (percent >= 1) {\r\n\t\t\tpercent = 1;\r\n\t\t\tcancelAnimationFrame(raf);\r\n\t\t}\r\n\r\n\t\tconst pass = diff * easing(percent);\r\n\t\tcallback?.(pass);\r\n\t}\r\n}\r\n\r\nexport function formatNumber(\r\n\tvalue: number,\r\n\toptions: {\r\n\t\tprecision?: number;\r\n\t\tthousand?: string;\r\n\t} = {}\r\n) {\r\n\tconst { precision, thousand } = options;\r\n\r\n\tconst result = value.toFixed(precision);\r\n\r\n\tif (!thousand) return result;\r\n\r\n\tconst points = result.split(\".\");\r\n\tconst integer = points[0].replace(\r\n\t\t/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,\r\n\t\t`$&${thousand}`\r\n\t);\r\n\r\n\tif (points.length === 1) return integer;\r\n\r\n\treturn `${integer}.${points[1]}`;\r\n}\r\n\r\nexport function renderNode(node: ReactNode, container = document.body) {\r\n\tconst div: HTMLDivElement | null = document.createElement(\"div\");\r\n\tcontainer.append(div);\r\n\r\n\tconst root: Root | null = createRoot(div);\r\n\tconst sto = setTimeout(() => {\r\n\t\troot?.render(node);\r\n\t}, 0);\r\n\r\n\treturn () => {\r\n\t\tdiv?.remove();\r\n\t\troot?.unmount();\r\n\t\tsto && clearTimeout(sto);\r\n\t};\r\n}\r\n\r\nexport function getSuffixByUrl(url: string) {\r\n\treturn url.match(/\\.([^\\./\\?]+)($|\\?)/)?.[1];\r\n}\r\n\r\nexport function getFileType(suffix: string, type?: string): TFileType {\r\n\tswitch (true) {\r\n\t\tcase [\"jpg\", \"jpeg\", \"png\", \"webp\", \"svg\"].includes(suffix) ||\r\n\t\t\ttype?.startsWith(\"image/\"):\r\n\t\t\treturn TFileType[\"IMAGE\"];\r\n\t\tcase [\"mp4\", \"avi\"].includes(suffix) || type?.startsWith(\"video/\"):\r\n\t\t\treturn TFileType[\"VIDEO\"];\r\n\t\tdefault:\r\n\t\t\treturn TFileType[\"UNKNOWN\"];\r\n\t}\r\n}\r\n\r\nexport function fullScreen(el: HTMLElement) {\r\n\tel.requestFullscreen?.();\r\n}\r\n\r\nexport function exitFullScreen() {\r\n\tdocument.exitFullscreen?.();\r\n}\r\n\r\nexport function formatTime(\r\n\ttime: number,\r\n\toptions?: {\r\n\t\tzero?: boolean;\r\n\t\tunits?: string[];\r\n\t}\r\n) {\r\n\tconst result: string[] = [];\r\n\tconst { zero = true, units = [\"\", \":\", \":\"] } = options || {};\r\n\r\n\tconst l = units.length;\r\n\tlet i = 0;\r\n\r\n\twhile (i < l) {\r\n\t\tif (time <= 0 && i > 1) break;\r\n\r\n\t\tconst n = Math.round(time % 60);\r\n\r\n\t\ttime = Math.floor(time / 60);\r\n\r\n\t\tresult.unshift((zero && n < 10 ? `0${n}` : n) + units[i++]);\r\n\t}\r\n\r\n\treturn result.join(\"\");\r\n}\r\n\r\nexport function getNextSorter(\r\n\tprevSortBy: string,\r\n\tprevSortType: string,\r\n\tsortBy: string\r\n): [sortBy: string, sortType: string] {\r\n\tconst types = [\"desc\", \"asc\"];\r\n\r\n\tif (prevSortBy === sortBy) {\r\n\t\tconst i = types.findIndex((t) => t === prevSortType) + 1;\r\n\t\tconst type = types[i] || \"\";\r\n\t\tconst by = type === \"\" ? \"\" : sortBy;\r\n\r\n\t\treturn [by, type];\r\n\t}\r\n\r\n\treturn [sortBy, \"desc\"];\r\n}\r\n\r\nexport function formatBytes(bytes: number, decimals = 2) {\r\n\tif (!+bytes) return \"0 Bytes\";\r\n\r\n\tconst k = 1024;\r\n\tconst dm = decimals < 0 ? 0 : decimals;\r\n\tconst sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\r\n\r\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n\treturn `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\r\n}\r\n\r\nexport function clamp(value: number, min: number, max: number) {\r\n\treturn value < min ? min : value > max ? max : value;\r\n}\r\n","import { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { ChangeEvent, useEffect } from \"react\";\r\nimport { ICheckboxItem } from \"./type\";\r\n\r\nexport default function CheckboxItem(props: ICheckboxItem) {\r\n\tconst {\r\n\t\ttype = \"default\",\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = false,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\tdisabled,\r\n\t\tpartof,\r\n\t\tchildren,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t\tstatus,\r\n\t\tmessage,\r\n\t});\r\n\r\n\tconst handleChange = useMemoizedFn((e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst checked = e.target.checked;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tvalue: checked,\r\n\t\t\tstatus,\r\n\t\t\tmessage,\r\n\t\t});\r\n\r\n\t\tonChange?.(checked, e);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<label\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-checkbox-item\",\r\n\t\t\t\t{\r\n\t\t\t\t\t[`i-checkbox-${state.status}`]: state.status !== \"normal\",\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\ttype='checkbox'\r\n\t\t\t\tname={name}\r\n\t\t\t\tclassName={classNames(\"i-checkbox-input\", {\r\n\t\t\t\t\t[`i-checkbox-${type}`]: !partof,\r\n\t\t\t\t\t\"i-checkbox-partof\": partof,\r\n\t\t\t\t})}\r\n\t\t\t\tchecked={state.value}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<span className='i-checkbox-text'>{children || label}</span>\r\n\r\n\t\t\t{state.message && (\r\n\t\t\t\t<span className='i-checkbox-message'>*{state.message}</span>\r\n\t\t\t)}\r\n\t\t</label>\r\n\t);\r\n}\r\n","import { formatOption } from \"@p/js/utils\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport \"./index.css\";\r\nimport CheckboxItem from \"./item\";\r\nimport type { ICheckbox } from \"./type\";\r\n\r\nfunction Checkbox(props: ICheckbox) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\toptions = [],\r\n\t\tvalue = \"\",\r\n\t\ttype = \"default\",\r\n\t\toptionInline = true,\r\n\t\tlabelInline,\r\n\t\tdisabled,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\trequired,\r\n\t\tclassName,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive<{\r\n\t\tvalue: any;\r\n\t}>({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst formattedOptions = useMemo(() => formatOption(options), [options]);\r\n\r\n\tconst handleChange = useMemoizedFn((checked, opt, e) => {\r\n\t\tconst group = [...state.value];\r\n\t\tconst i = group.findIndex((item) => item === opt.value);\r\n\r\n\t\tif (checked && i < 0) {\r\n\t\t\tgroup.push(opt.value);\r\n\t\t} else if (!checked && i > -1) {\r\n\t\t\tgroup.splice(i, 1);\r\n\t\t}\r\n\r\n\t\tstate.value = group;\r\n\t\tonChange?.(group, opt, e);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-checkbox i-input-label\",\r\n\t\t\t\t{\r\n\t\t\t\t\t[`i-checkbox-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t\t},\r\n\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{label && (\r\n\t\t\t\t<span className='i-input-label-text'>\r\n\t\t\t\t\t{required && <span className='error'>*</span>}\r\n\t\t\t\t\t{label}\r\n\r\n\t\t\t\t\t{message && <p className='i-checkbox-message'>{message}</p>}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-checkbox-options\", {\r\n\t\t\t\t\t\"i-options-block\": !optionInline,\r\n\t\t\t\t\t\"i-checkbox-options-button\": type === \"button\",\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{formattedOptions.map((option) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<CheckboxItem\r\n\t\t\t\t\t\t\tkey={option.value as string}\r\n\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\tvalue={state.value.includes(option.value)}\r\n\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\tdisabled={disabled || option.disabled}\r\n\t\t\t\t\t\t\tonChange={(checked, e) =>\r\n\t\t\t\t\t\t\t\thandleChange(checked, option, e)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t</CheckboxItem>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nCheckbox.Item = CheckboxItem;\r\n\r\nexport default Checkbox;\r\n","import { CloseRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport { uid } from \"radash\";\r\nimport { createElement } from \"react\";\r\nimport Icon from \"../../icon\";\r\nimport \"./index.css\";\r\nimport { IHelperIcon } from \"./type\";\r\n\r\nconst Helpericon = (props: IHelperIcon): JSX.Element => {\r\n\tconst {\r\n\t\tas = \"a\",\r\n\t\tactive,\r\n\t\tclassName,\r\n\t\ticon = <CloseRound />,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tif (!active) return <></>;\r\n\r\n\treturn createElement(\r\n\t\tas,\r\n\t\t{\r\n\t\t\tclassName: classNames(\"i-helpericon\", className),\r\n\t\t\t...restProps,\r\n\t\t},\r\n\t\t[\r\n\t\t\tcreateElement(Icon, {\r\n\t\t\t\tkey: uid(3),\r\n\t\t\t\ticon,\r\n\t\t\t}),\r\n\t\t]\r\n\t);\r\n};\r\n\r\nexport default Helpericon;\r\n","import { MinusRound, PlusRound } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { Children, useMemo } from \"react\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { ICollapse, ICollapseItem, TKey } from \"./type\";\r\n\r\nconst Collapse = (props: ICollapse): JSX.Element => {\r\n\tconst {\r\n\t\tactive,\r\n\t\titems,\r\n\t\tmultiple,\r\n\t\tborder,\r\n\t\theaderClickable,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\trenderToggle = (active: boolean) =>\r\n\t\t\tactive ? <MinusRound /> : <PlusRound />,\r\n\t\tonCollapse,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tactive,\r\n\t});\r\n\r\n\tconst collapses = useMemo(() => {\r\n\t\tif (!items) {\r\n\t\t\tif (!children) return [];\r\n\r\n\t\t\treturn (\r\n\t\t\t\tChildren.map(children, (node, i) => {\r\n\t\t\t\t\tconst { key, props: nodeProps } = node as {\r\n\t\t\t\t\t\tkey?: TKey;\r\n\t\t\t\t\t\tprops?: any;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst { title, children, content, disabled, ...restProps } =\r\n\t\t\t\t\t\tnodeProps;\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...restProps,\r\n\t\t\t\t\t\tkey: key || i,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tcontent: children || content,\r\n\t\t\t\t\t\tdisabled,\r\n\t\t\t\t\t};\r\n\t\t\t\t}) || []\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn items;\r\n\t}, [children]);\r\n\r\n\tconst handleHeaderClick = (item: ICollapseItem) => {\r\n\t\tif (!headerClickable) return;\r\n\r\n\t\thandleToggle(item);\r\n\t};\r\n\r\n\tconst handleToggle = (item: ICollapseItem) => {\r\n\t\tconst { key, disabled } = item;\r\n\t\tif (disabled) return;\r\n\r\n\t\tif (!multiple) {\r\n\t\t\tstate.active = state.active === key ? undefined : key;\r\n\t\t\tonCollapse?.(key as TKey, state.active !== undefined);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(state.active)) state.active = [];\r\n\r\n\t\tconst i = state.active.findIndex((k) => k === key);\r\n\r\n\t\tif (i > -1) {\r\n\t\t\tstate.active.splice(i, 1);\r\n\t\t} else {\r\n\t\t\tkey !== undefined && state.active.push(key);\r\n\t\t}\r\n\t\tonCollapse?.(key as TKey, i < 0);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-collapse\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-collapse-bordered\": border,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{collapses.map((item) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tcontent,\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t\tclassName,\r\n\t\t\t\t\t...restProps\r\n\t\t\t\t} = item;\r\n\t\t\t\tconst isActive = multiple\r\n\t\t\t\t\t? ((state.active as TKey[]) || []).includes(key)\r\n\t\t\t\t\t: state.active === key;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\tclassName={classNames(\"i-collapse-item\", className, {\r\n\t\t\t\t\t\t\t\"i-collapse-active\": isActive,\r\n\t\t\t\t\t\t\t\"i-collapse-disabled\": disabled,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='i-collapse-header'\r\n\t\t\t\t\t\t\tonClick={() => handleHeaderClick(item)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{title}\r\n\r\n\t\t\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\tclassName='i-collapse-toggle'\r\n\t\t\t\t\t\t\t\ticon={renderToggle(isActive)}\r\n\t\t\t\t\t\t\t\tonClick={() => handleToggle(item)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='i-collapse-content'>{content}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nCollapse.Item = Item;\r\n\r\nexport default Collapse;\r\n","import { InboxTwotone } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport \"./index.css\";\r\n\r\nexport default function Empty(props) {\r\n\tconst { className, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<InboxTwotone\r\n\t\t\tclassName={classNames(\"i-empty\", className)}\r\n\t\t\t{...restProps}\r\n\t\t/>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { ICell, IColumn } from \"./type\";\r\n\r\nexport function getCellStyle({\r\n\tjustify,\r\n\tcol,\r\n\trow,\r\n\tcolSpan = 1,\r\n\trowSpan = 1,\r\n}: Pick<IColumn, \"justify\" | \"fixed\"> & {\r\n\tcol: number;\r\n\trow: number;\r\n\tcolSpan?: number;\r\n\trowSpan?: number;\r\n\tisHeader?: boolean;\r\n}) {\r\n\tconst style = {\r\n\t\t\"--datagrid-justify\": justify,\r\n\t\tgridArea: `${row + 1} / ${col + 1} / ${row + 1 + rowSpan} / ${\r\n\t\t\tcol + 1 + colSpan\r\n\t\t}`,\r\n\t\tinsetInline: `var(--datagrid-cell-inset-${col})`,\r\n\t};\r\n\r\n\treturn style;\r\n}\r\n\r\nexport function Cell(props: ICell) {\r\n\tconst { column, row, col, data, onCellClick, onCellDoubleClick } = props;\r\n\tconst { id, fixed, justify, rowSpan, render } = column;\r\n\tconst style = getCellStyle({ justify, fixed, col, row, rowSpan });\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-datagrid-cell\", {\r\n\t\t\t\t[`i-datagrid-cell-fixed-${fixed}`]: fixed,\r\n\t\t\t})}\r\n\t\t\tdata-col={id}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={(e) => onCellClick?.(data, column, row, col, e)}\r\n\t\t\tonDoubleClick={(e) =>\r\n\t\t\t\tonCellDoubleClick?.(data, column, row, col, e)\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{render?.(data[id], data, col) ?? (\r\n\t\t\t\t<div className='i-datagrid-cell-content'>{data[id]}</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { ICollapseItem } from \"./type\";\r\n\r\nexport default function Item(props: ICollapseItem) {\r\n\treturn <></>;\r\n}\r\n","import { useEffect } from \"react\";\r\n\r\ntype TMouseEvent = (e: MouseEvent) => void;\r\n\r\nconst MouseMoveEvents = new Set<TMouseEvent>();\r\nconst MouseUpEvents = new Set<TMouseEvent>();\r\n\r\ndocument.addEventListener(\"mousemove\", (e: MouseEvent) => {\r\n\tfor (const listener of MouseMoveEvents.values()) {\r\n\t\tlistener(e);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener(\"mouseup\", (e) => {\r\n\tfor (const listener of MouseUpEvents.values()) {\r\n\t\tlistener(e);\r\n\t}\r\n});\r\n\r\nexport function useMouseMove(listener: TMouseEvent) {\r\n\tuseEffect(() => {\r\n\t\tMouseMoveEvents.add(listener);\r\n\t\treturn () => {\r\n\t\t\tMouseMoveEvents.delete(listener);\r\n\t\t};\r\n\t}, [listener]);\r\n}\r\n\r\nexport function useMouseUp(listener: TMouseEvent) {\r\n\tuseEffect(() => {\r\n\t\tMouseUpEvents.add(listener);\r\n\t\treturn () => {\r\n\t\t\tMouseUpEvents.delete(listener);\r\n\t\t};\r\n\t}, [listener]);\r\n}\r\n\r\nexport function useIntersectionObserver(configs?: IntersectionObserverInit) {\r\n\tconst WM = new WeakMap();\r\n\tconst IO = new IntersectionObserver((entries) => {\r\n\t\tentries.map((entry) => {\r\n\t\t\tconst callback = WM.get(entry.target);\r\n\r\n\t\t\tcallback?.(entry.target, entry.isIntersecting);\r\n\t\t});\r\n\t}, configs);\r\n\r\n\tfunction observe(target: HTMLElement, callback: Function) {\r\n\t\tif (WM.get(target)) return;\r\n\r\n\t\tWM.set(target, callback);\r\n\t\ttarget && IO.observe(target);\r\n\t}\r\n\r\n\tfunction unobserve(target: HTMLElement) {\r\n\t\ttarget && IO.unobserve(target);\r\n\t\tWM.delete(target);\r\n\t}\r\n\r\n\tfunction disconnect() {\r\n\t\tIO.disconnect();\r\n\t}\r\n\r\n\treturn {\r\n\t\tobserve,\r\n\t\tunobserve,\r\n\t\tdisconnect,\r\n\t};\r\n}\r\n\r\nexport function useResizeObserver() {\r\n\tconst WM = new WeakMap();\r\n\tconst IO = new ResizeObserver((entries) => {\r\n\t\tentries.map((entry) => {\r\n\t\t\tconst callback = WM.get(entry.target);\r\n\r\n\t\t\tcallback?.(entry.target);\r\n\t\t});\r\n\t});\r\n\r\n\tfunction observe(target: HTMLElement, callback: Function) {\r\n\t\tif (WM.get(target)) return;\r\n\r\n\t\ttarget && IO.observe(target);\r\n\t\tWM.set(target, callback);\r\n\t}\r\n\r\n\tfunction unobserve(target: HTMLElement) {\r\n\t\ttarget && IO.unobserve(target);\r\n\t\tWM.delete(target);\r\n\t}\r\n\r\n\tfunction disconnect() {\r\n\t\tIO.disconnect();\r\n\t}\r\n\r\n\treturn {\r\n\t\tobserve,\r\n\t\tunobserve,\r\n\t\tdisconnect,\r\n\t};\r\n}\r\n","import { useMouseMove, useMouseUp } from \"@p/js/hooks\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport { MouseEvent } from \"react\";\r\n\r\nexport default function Resize(props) {\r\n\tconst { index, onWidthChange } = props;\r\n\tconst state = useReactive({\r\n\t\tresizing: false,\r\n\t\tx: 0,\r\n\t\twidth: 0,\r\n\t});\r\n\r\n\tconst handleMouseDown = useMemoizedFn((e: MouseEvent) => {\r\n\t\tconst tar = e.target as HTMLElement;\r\n\t\tconst width = (tar.offsetParent as HTMLElement).offsetWidth;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tx: e.pageX,\r\n\t\t\tresizing: true,\r\n\t\t\twidth,\r\n\t\t});\r\n\t});\r\n\r\n\tconst handleMouseMove = useMemoizedFn((e: any) => {\r\n\t\tif (!state.resizing) return;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tconst after = state.width + e.pageX - state.x;\r\n\t\tif (after <= 24) return;\r\n\r\n\t\tonWidthChange(index, after);\r\n\t});\r\n\r\n\tconst handleMouseUp = () => {\r\n\t\tif (!state.resizing) return;\r\n\r\n\t\tstate.resizing = false;\r\n\t};\r\n\r\n\tuseMouseMove(handleMouseMove);\r\n\tuseMouseUp(handleMouseUp);\r\n\r\n\treturn (\r\n\t\t<i\r\n\t\t\tclassName='i-datagrid-resizor'\r\n\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t/>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\n\r\nconst Arrow = (props) => (\r\n\t<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' {...props}>\r\n\t\t<g fill='none'>\r\n\t\t\t<path\r\n\t\t\t\td='M9 17.898c0 1.074 1.265 1.648 2.073.941l6.31-5.522a1.75 1.75 0 0 0 0-2.634l-6.31-5.522C10.265 4.454 9 5.028 9 6.102v11.796z'\r\n\t\t\t\tfill='currentColor'\r\n\t\t\t></path>\r\n\t\t</g>\r\n\t</svg>\r\n);\r\n\r\nexport default function Sorter(props) {\r\n\tconst { type } = props;\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\tclassName={classNames(\"i-datagrid-sorter\", {\r\n\t\t\t\t[`i-datagrid-sorter-${type}`]: type,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t<Arrow className='i-datagrid-sorter-caret' />\r\n\t\t\t<Arrow className='i-datagrid-sorter-caret' />\r\n\t\t</a>\r\n\t);\r\n}\r\n","import classNames from \"classnames\";\r\nimport { Cell, getCellStyle } from \"./cell\";\r\nimport Resize from \"./resize\";\r\nimport Sorter from \"./sorter\";\r\nimport { IHeader, IRow } from \"./type\";\r\n\r\nexport default function Row(props: IRow) {\r\n\tconst { row, data, columns, onRowClick, onCellClick, onCellDoubleClick } =\r\n\t\tprops;\r\n\r\n\treturn (\r\n\t\t<div className='i-datagrid-row' onClick={() => onRowClick?.(data, row)}>\r\n\t\t\t{columns.map((col, i) => (\r\n\t\t\t\t<Cell\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tcolumn={col}\r\n\t\t\t\t\tcol={i}\r\n\t\t\t\t\trow={row}\r\n\t\t\t\t\tdata={data}\r\n\t\t\t\t\tonCellClick={onCellClick}\r\n\t\t\t\t\tonCellDoubleClick={onCellDoubleClick}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function Header(props: IHeader) {\r\n\tconst {\r\n\t\tcolumns,\r\n\t\tresizable,\r\n\t\tsortBy,\r\n\t\tsortType,\r\n\t\tonWidthChange,\r\n\t\tonHeaderClick,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div className='i-datagrid-header i-datagrid-row'>\r\n\t\t\t{columns.map((column, col) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tfixed,\r\n\t\t\t\t\tcolSpan,\r\n\t\t\t\t\tsorter,\r\n\t\t\t\t\tjustify,\r\n\t\t\t\t\trenderHeader,\r\n\t\t\t\t} = column;\r\n\t\t\t\tconst style = getCellStyle({\r\n\t\t\t\t\tjustify,\r\n\t\t\t\t\trow: 0,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t\tcolSpan,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst order = sortBy === id ? sortType : \"\";\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={col}\r\n\t\t\t\t\t\tdata-col={id}\r\n\t\t\t\t\t\tclassName={classNames(\"i-datagrid-cell\", {\r\n\t\t\t\t\t\t\t\"i-datagrid-has-sorter\": sorter,\r\n\t\t\t\t\t\t\t\"i-datagrid-cell-fixed\": fixed,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tstyle={{ ...style, insetBlockStart: 0 }}\r\n\t\t\t\t\t\tonClick={(e) => onHeaderClick?.(column, e)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{renderHeader?.(column, col) ?? (\r\n\t\t\t\t\t\t\t<div className='i-datagrid-cell-content'>\r\n\t\t\t\t\t\t\t\t{title || id}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{sorter && <Sorter type={order} />}\r\n\r\n\t\t\t\t\t\t{resizable && (\r\n\t\t\t\t\t\t\t<Resize index={col} onWidthChange={onWidthChange} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { getNextSorter } from \"@p/js/utils\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tCSSProperties,\r\n\tMouseEvent,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport ScrollContainer, { Scrollbars } from \"react-custom-scrollbars-2\";\r\nimport Loading from \"../loading\";\r\nimport Empty from \"../utils/empty\";\r\nimport \"./index.css\";\r\nimport Row, { Header } from \"./row\";\r\nimport type { IColumn, IData, IDatagrid, TDatagridState } from \"./type\";\r\n\r\nconst Datagrid = (props: IDatagrid): JSX.Element => {\r\n\tconst {\r\n\t\tdata = [],\r\n\t\tcolumns = [],\r\n\t\tborder,\r\n\t\tstriped,\r\n\t\theader = true,\r\n\t\tresizable,\r\n\t\tcellPadding = \".5em\",\r\n\t\tempty = <Empty />,\r\n\t\tloading,\r\n\t\theight = \"unset\",\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\trenderLoading = () => <Loading size='1.5em' className='color-3' />,\r\n\t\tonCellClick,\r\n\t\tonRowClick,\r\n\t\tonHeaderClick,\r\n\t\tonSort,\r\n\t\tonScroll,\r\n\t\tonResize,\r\n\t} = props;\r\n\r\n\tconst container = useRef<HTMLDivElement>(null);\r\n\tconst scrollbar = useRef<Scrollbars>(null);\r\n\tconst state = useReactive<TDatagridState>({\r\n\t\trows: data,\r\n\t\twidths: columns.map((col) => col.width ?? \"auto\"),\r\n\t\tsortBy: \"\",\r\n\t\tsortType: \"\",\r\n\t});\r\n\r\n\tconst styles = useMemo(() => {\r\n\t\tconst { widths } = state;\r\n\r\n\t\tconst o = {\r\n\t\t\t...style,\r\n\t\t\t\"--grid-template-columns\": widths\r\n\t\t\t\t.map((w) => {\r\n\t\t\t\t\treturn typeof w === \"number\" ? `${w}px` : w;\r\n\t\t\t\t})\r\n\t\t\t\t.join(\" \"),\r\n\t\t};\r\n\r\n\t\tif (!resizable) return o;\r\n\r\n\t\tconst fws = columns.map((col, i) => {\r\n\t\t\tconst { fixed } = col;\r\n\t\t\tif (!fixed) return 0;\r\n\t\t\treturn widths[i] as number;\r\n\t\t});\r\n\r\n\t\tcolumns.map((col, i) => {\r\n\t\t\tconst { fixed } = col;\r\n\t\t\tif (!fixed) return;\r\n\t\t\tif (i === 0) {\r\n\t\t\t\to[`--datagrid-cell-inset-0`] = 0;\r\n\t\t\t} else if (i === fws.length - 1) {\r\n\t\t\t\to[`--datagrid-cell-inset-${fws.length - 1}`] = \"auto 0\";\r\n\t\t\t} else {\r\n\t\t\t\tconst isLeft = fixed === \"left\";\r\n\t\t\t\tconst before = isLeft ? fws.slice(0, i) : fws.slice(i + 1);\r\n\t\t\t\tconst sum = before.reduce((pre, cur) => pre + cur) + \"px\";\r\n\t\t\t\tconst result = isLeft ? `${sum} auto` : `auto ${sum}`;\r\n\t\t\t\to[`--datagrid-cell-inset-${i}`] = result;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn o;\r\n\t}, [state.widths, resizable]);\r\n\r\n\tconst handleWidthChange = useCallback(\r\n\t\t(i: number, w: number) => {\r\n\t\t\tif (!resizable) return;\r\n\r\n\t\t\tconst [...ws] = state.widths;\r\n\t\t\tws[i] = w;\r\n\t\t\tstate.widths = ws;\r\n\t\t\tonResize?.(columns[i], w);\r\n\t\t},\r\n\t\t[resizable]\r\n\t);\r\n\r\n\tconst handleHeaderClick = useCallback(\r\n\t\t(column?: IColumn, e?: MouseEvent) => {\r\n\t\t\tif (column?.sorter) {\r\n\t\t\t\tconst [sortBy, sortType] = getNextSorter(\r\n\t\t\t\t\tstate.sortBy,\r\n\t\t\t\t\tstate.sortType,\r\n\t\t\t\t\tcolumn.id\r\n\t\t\t\t);\r\n\r\n\t\t\t\tObject.assign(state, {\r\n\t\t\t\t\tsortBy,\r\n\t\t\t\t\tsortType,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tonSort?.(sortBy, sortType);\r\n\t\t\t}\r\n\r\n\t\t\tonHeaderClick?.(column, e);\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst rows = useMemo(() => {\r\n\t\tconst { sortBy, sortType } = state;\r\n\r\n\t\tif (sortBy && !onSort) {\r\n\t\t\tconst sorter = columns.find((col) => col.id === sortBy)?.sorter;\r\n\t\t\tconst sortFn =\r\n\t\t\t\ttypeof sorter === \"function\"\r\n\t\t\t\t\t? sorter\r\n\t\t\t\t\t: (a: IData, b: IData) => b[sortBy] - a[sortBy];\r\n\t\t\tconst sorted = [...data].sort(sortFn);\r\n\r\n\t\t\treturn sortType === \"desc\" ? sorted : sorted.reverse();\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}, [data, columns, state.sortBy, state.sortType]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!container.current) return;\r\n\t\tconst { current: div } = container;\r\n\t\tconst tds = div.querySelector(\".i-datagrid-row\")?.children;\r\n\t\tif (!tds?.length) return;\r\n\r\n\t\tstate.widths = Array.from(tds).map((node: any) => node.offsetWidth);\r\n\t}, [columns, resizable]);\r\n\r\n\tuseEffect(() => {\r\n\t\tloading && scrollbar.current?.scrollTop(0);\r\n\t}, [loading]);\r\n\r\n\tconst scrollBarStyle = {\r\n\t\t\"--padding\": cellPadding,\r\n\t\t...styles,\r\n\t} as CSSProperties;\r\n\r\n\treturn (\r\n\t\t<ScrollContainer\r\n\t\t\tref={scrollbar}\r\n\t\t\tautoHide\r\n\t\t\tautoHeight\r\n\t\t\tautoHeightMax={height}\r\n\t\t\tstyle={scrollBarStyle}\r\n\t\t\tclassName={classNames(\"i-datagrid-container\", className, {\r\n\t\t\t\t\"i-datagrid-bordered\": border,\r\n\t\t\t\t\"i-datagrid-striped\": striped,\r\n\t\t\t})}\r\n\t\t\trenderView={(props) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tclassName={classNames({ \"i-datagrid-loading\": loading })}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\tonScroll={onScroll}\r\n\t\t>\r\n\t\t\t<div ref={container} className='i-datagrid'>\r\n\t\t\t\t{header && (\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tresizable={resizable}\r\n\t\t\t\t\t\tsortType={state.sortType}\r\n\t\t\t\t\t\tsortBy={state.sortBy}\r\n\t\t\t\t\t\tonWidthChange={handleWidthChange}\r\n\t\t\t\t\t\tonHeaderClick={handleHeaderClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{rows.map((row, i) => (\r\n\t\t\t\t\t<Row\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\trow={i + (header ? 1 : 0)}\r\n\t\t\t\t\t\tdata={row}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tonCellClick={onCellClick}\r\n\t\t\t\t\t\tonRowClick={onRowClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t{rows.length < 1 && empty}\r\n\t\t\t</div>\r\n\r\n\t\t\t{loading && renderLoading()}\r\n\t\t</ScrollContainer>\r\n\t);\r\n};\r\n\r\nexport default Datagrid;\r\n","import classNames from \"classnames\";\r\nimport { IInputContainer } from \"./type\";\r\n\r\nexport default function InputContainer(props: IInputContainer) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tclassName,\r\n\t\tlabelInline,\r\n\t\tstyle,\r\n\t\tchildren,\r\n\t\tstatus,\r\n\t\ttip,\r\n\t\trequired,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<label\r\n\t\t\tclassName={classNames(\"i-input-label\", className, {\r\n\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{label && (\r\n\t\t\t\t<span className='i-input-label-text'>\r\n\t\t\t\t\t{required && <span className='error'>*</span>}\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\r\n\t\t\t{children}\r\n\r\n\t\t\t{tip && (\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName={classNames(\"i-input-message\", {\r\n\t\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t})}\r\n\t\t\t\t>\r\n\t\t\t\t\t{tip}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\t\t</label>\r\n\t);\r\n}\r\n","import \"@p/css/input.css\";\r\nimport { VisibilityOffRound, VisibilityRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tChangeEvent,\r\n\tKeyboardEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n} from \"react\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport InputContainer from \"./container\";\r\nimport type { CompositionInput, IInput } from \"./type\";\r\n\r\nconst Input = forwardRef<HTMLInputElement, IInput>((props, ref) => {\r\n\tconst {\r\n\t\ttype = \"text\",\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue = \"\",\r\n\t\tprepend,\r\n\t\tappend,\r\n\t\tlabelInline,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\tclear,\r\n\t\thideVisible,\r\n\t\tborder,\r\n\t\trequired,\r\n\t\tonChange,\r\n\t\tonEnter,\r\n\t\tstyle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t\ttype,\r\n\t\tvisible: false,\r\n\t});\r\n\r\n\tconst handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst v = e.target.value;\r\n\r\n\t\tstate.value = v;\r\n\t\tonChange?.(v, e);\r\n\t}, []);\r\n\r\n\tconst handleKeydown = useMemoizedFn((e: KeyboardEvent<HTMLElement>) => {\r\n\t\te.code === \"Enter\" && onEnter?.();\r\n\t});\r\n\r\n\tconst handleHelperClick = () => {\r\n\t\tif (type === \"password\" && !hideVisible) {\r\n\t\t\tObject.assign(state, {\r\n\t\t\t\tvisible: !state.visible,\r\n\t\t\t\ttype: !state.visible ? \"text\" : \"password\",\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst v = \"\";\r\n\t\tonChange?.(v);\r\n\t};\r\n\r\n\tconst HelperIcon = useMemo(() => {\r\n\t\tif (type === \"password\") {\r\n\t\t\treturn state.visible ? <VisibilityRound /> : <VisibilityOffRound />;\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}, [state.visible]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tref,\r\n\t\ttype: state.type,\r\n\t\tname,\r\n\t\tvalue: state.value,\r\n\t\tclassName: classNames(\"i-input\", `i-input-${type}`),\r\n\t\tonChange: handleChange,\r\n\t\tonKeyDown: handleKeydown,\r\n\t\t...restProps,\r\n\t};\r\n\r\n\tconst clearable = clear && state.value;\r\n\tconst showHelper = type === \"password\" && !!state.value;\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t\trequired={required}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend && <div className='i-input-prepend'>{prepend}</div>}\r\n\r\n\t\t\t\t<input {...inputProps} />\r\n\r\n\t\t\t\t<Helpericon\r\n\t\t\t\t\tactive={!!clearable || showHelper}\r\n\t\t\t\t\ticon={HelperIcon}\r\n\t\t\t\t\tonClick={handleHelperClick}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{append && <div className='i-input-append'>{append}</div>}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n}) as CompositionInput;\r\n\r\nexport default Input;\r\n","import \"@p/css/input.css\";\r\nimport { clamp, formatNumber } from \"@p/js/utils\";\r\nimport { MinusRound, PlusRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { ChangeEvent, forwardRef, useCallback, useEffect } from \"react\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport InputContainer from \"./container\";\r\nimport type { IInputNumber } from \"./type\";\r\n\r\nconst Number = forwardRef<HTMLInputElement, IInputNumber>((props, ref) => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue,\r\n\t\tlabelInline,\r\n\t\tstep = 1,\r\n\t\tmin = -Infinity,\r\n\t\tmax = Infinity,\r\n\t\tthousand,\r\n\t\tprecision,\r\n\t\ttype,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tappend,\r\n\t\tborder,\r\n\t\tprepend,\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\thideControl,\r\n\t\tstyle,\r\n\t\tonChange,\r\n\t\tonEnter,\r\n\t\tonInput,\r\n\t\tonBlur,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst getRangeNumber = useCallback(\r\n\t\t(v: number) => clamp(v, min, max),\r\n\t\t[min, max]\r\n\t);\r\n\r\n\tconst getFormatNumber = useCallback(\r\n\t\t(v: number) => formatNumber(v, { precision, thousand }),\r\n\t\t[precision, thousand]\r\n\t);\r\n\r\n\tconst formatInputValue = useCallback(\r\n\t\t(v?: string | number) => {\r\n\t\t\tif (!v) return \"\";\r\n\t\t\tif (typeof v === \"number\" || !thousand) return v;\r\n\r\n\t\t\treturn v.replaceAll(thousand, \"\");\r\n\t\t},\r\n\t\t[thousand]\r\n\t);\r\n\r\n\tconst handleChange = useMemoizedFn((e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst { value } = e.target;\r\n\t\tconst v = formatInputValue(value.replace(/[^\\d\\.-]/g, \"\"));\r\n\r\n\t\tstate.value = v;\r\n\t\tonChange?.(+v, e);\r\n\t});\r\n\r\n\tconst handleOperate = useMemoizedFn((param: number) => {\r\n\t\tconst value = formatInputValue(state.value) ?? 0;\r\n\t\tconst result = getRangeNumber(+value + param);\r\n\r\n\t\tstate.value = getFormatNumber(result);\r\n\r\n\t\tonChange?.(result);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tref,\r\n\t\tname,\r\n\t\tvalue: state.value,\r\n\t\tclassName: \"i-input i-input-number\",\r\n\t\tonChange: handleChange,\r\n\t\t...rest,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend && <div className='i-input-prepend'>{prepend}</div>}\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<MinusRound />}\r\n\t\t\t\t\t\tonClick={() => handleOperate(-step)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<input {...inputProps} />\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<PlusRound />}\r\n\t\t\t\t\t\tonClick={() => handleOperate(step)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{append && <div className='i-input-append'>{append}</div>}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n});\r\n\r\nexport default Number;\r\n","import \"@p/css/input.css\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tChangeEvent,\r\n\tKeyboardEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseRef,\r\n} from \"react\";\r\nimport InputContainer from \"./container\";\r\nimport type { ITextarea } from \"./type\";\r\n\r\nconst Textarea = forwardRef<HTMLTextAreaElement, ITextarea>((props, ref) => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue,\r\n\t\tlabelInline,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\tautoSize,\r\n\t\tborder,\r\n\t\tstyle,\r\n\t\tonChange,\r\n\t\tonEnter,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\tconst refTextarea = useRef<HTMLDivElement>(null);\r\n\r\n\tconst handleChange = useCallback(\r\n\t\t(e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n\t\t\tconst v = e.target.value;\r\n\r\n\t\t\tstate.value = v;\r\n\r\n\t\t\tconst ta = refTextarea.current?.firstChild as HTMLElement;\r\n\t\t\tif (autoSize && ta) {\r\n\t\t\t\t// ta.style.height = \"inherit\";\r\n\t\t\t\tta.style.height = `${ta.scrollHeight}px`;\r\n\t\t\t}\r\n\r\n\t\t\tonChange?.(v, e);\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst handleKeydown = useMemoizedFn((e: KeyboardEvent<HTMLElement>) => {\r\n\t\te.code === \"Enter\" && onEnter?.();\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tref,\r\n\t\tname,\r\n\t\tvalue: state.value,\r\n\t\tclassName: \"i-input i-textarea\",\r\n\t\tonChange: handleChange,\r\n\t\tonKeyDown: handleKeydown,\r\n\t\t...restProps,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tref={refTextarea}\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<textarea {...inputProps} />\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n});\r\n\r\nexport default Textarea;\r\n","import Input from \"./input\";\r\nimport Number from \"./number\";\r\nimport Range from \"./range\";\r\nimport Textarea from \"./textarea\";\r\n\r\nInput.Textarea = Textarea;\r\nInput.Number = Number;\r\nInput.Range = Range;\r\n\r\nexport default Input;\r\n","import \"@p/css/input.css\";\r\nimport { clamp, formatNumber } from \"@p/js/utils\";\r\nimport { MinusRound, PlusRound, SyncAltRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { ChangeEvent, MouseEvent, useCallback, useEffect } from \"react\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport InputContainer from \"./container\";\r\nimport type { IInputRange } from \"./type\";\r\n\r\nconst Range = (props: IInputRange) => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\tvalue = props.initValue ?? \"\",\r\n\t\tinitValue,\r\n\t\tlabelInline,\r\n\t\tmin = -Infinity,\r\n\t\tmax = Infinity,\r\n\t\ttype,\r\n\t\tclassName,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\ttip,\r\n\t\tappend,\r\n\t\tprepend,\r\n\t\tstep = 1,\r\n\t\tthousand,\r\n\t\tprecision,\r\n\t\thideControl,\r\n\t\tplaceholder,\r\n\t\tborder,\r\n\t\tonChange,\r\n\t\tonBlur,\r\n\t\tstyle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst getRangeNumber = useCallback(\r\n\t\t(v: number) => clamp(v, min, max),\r\n\t\t[min, max]\r\n\t);\r\n\r\n\tconst getFormatNumber = useCallback(\r\n\t\t(v: number) => formatNumber(v, { precision, thousand }),\r\n\t\t[precision, thousand]\r\n\t);\r\n\r\n\tconst formatInputValue = useCallback(\r\n\t\t(v?: string | number) => {\r\n\t\t\tif (!v) return \"\";\r\n\t\t\tif (typeof v === \"number\" || !thousand) return v;\r\n\r\n\t\t\treturn v.replaceAll(thousand, \"\");\r\n\t\t},\r\n\t\t[thousand]\r\n\t);\r\n\r\n\tconst handleChange = useMemoizedFn(\r\n\t\t(e: ChangeEvent<HTMLInputElement>, i: number) => {\r\n\t\t\tconst { value } = e.target;\r\n\t\t\tconst v = formatInputValue(value.replace(/[^\\d\\.-]/g, \"\"));\r\n\r\n\t\t\tconst range = Array.isArray(state.value) ? state.value : [];\r\n\t\t\trange[i] = +v;\r\n\r\n\t\t\tstate.value = range;\r\n\t\t\tonChange?.(range, e);\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleOperate = useMemoizedFn(\r\n\t\t(e: MouseEvent<Element>, param: number, i: number) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tconst range = Array.isArray(state.value) ? state.value : [];\r\n\t\t\tconst value = formatInputValue(range[i]) ?? 0;\r\n\t\t\tconst result = getRangeNumber(+value + param);\r\n\r\n\t\t\trange[i] = getFormatNumber(result);\r\n\r\n\t\t\tstate.value = range;\r\n\t\t\tonChange?.(range, e);\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleSwitch = useMemoizedFn((e: MouseEvent) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tconst range = state.value ?? [];\r\n\t\tconst v = range[0];\r\n\t\trange[0] = range[1];\r\n\t\trange[1] = v;\r\n\r\n\t\tstate.value = range;\r\n\t\tonChange?.(range);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst inputProps = {\r\n\t\tname,\r\n\t\tclassName: \"i-input i-input-number\",\r\n\t\t...restProps,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={className}\r\n\t\t\tstyle={style}\r\n\t\t\ttip={message ?? tip}\r\n\t\t\tstatus={status}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend && <div className='i-input-prepend'>{prepend}</div>}\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<MinusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, -step, 0)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tvalue={state.value?.[0] || \"\"}\r\n\t\t\t\t\tplaceholder={placeholder?.[0]}\r\n\t\t\t\t\t{...inputProps}\r\n\t\t\t\t\tonChange={(e) => handleChange(e, 0)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<PlusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, step, 0)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t<Helpericon\r\n\t\t\t\t\tactive\r\n\t\t\t\t\ticon={<SyncAltRound />}\r\n\t\t\t\t\tstyle={{ margin: 0 }}\r\n\t\t\t\t\tonClick={handleSwitch}\r\n\t\t\t\t/>\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<MinusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, -step, 1)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\tvalue={state.value?.[1] || \"\"}\r\n\t\t\t\t\tplaceholder={placeholder?.[1]}\r\n\t\t\t\t\t{...inputProps}\r\n\t\t\t\t\tonChange={(e) => handleChange(e, 1)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{!hideControl && (\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={<PlusRound />}\r\n\t\t\t\t\t\tonClick={(e) => handleOperate(e, step, 1)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{append && <div className='i-input-append'>{append}</div>}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n};\r\n\r\nexport default Range;\r\n","import classNames from \"classnames\";\r\nimport { forwardRef, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { IPopupContent } from \"./type\";\r\n\r\nconst Content = forwardRef<HTMLDivElement, IPopupContent>((props, ref) => {\r\n\tconst {\r\n\t\tgetContainer = (trigger) => trigger?.offsetParent ?? document.body,\r\n\t\ttrigger,\r\n\t\tarrow,\r\n\t\tarrowProps = {},\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst arrowCSS = useMemo(() => {\r\n\t\tlet { left, top, pos } = arrowProps;\r\n\t\tlet transform = \"\";\r\n\r\n\t\tswitch (pos) {\r\n\t\t\tcase \"left\":\r\n\t\t\t\tleft += 2;\r\n\t\t\t\ttransform = `translate(-100%, -50%) rotate(180deg)`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"right\":\r\n\t\t\t\tleft -= 2;\r\n\t\t\t\ttransform = `translate(0, -50%)`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"top\":\r\n\t\t\t\ttop -= 2;\r\n\t\t\t\ttransform = `translate(-50%, -50%) rotate(-90deg)`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bottom\":\r\n\t\t\t\ttop += 2;\r\n\t\t\t\ttransform = `translate(-50%, -50%) rotate(90deg)`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\ttransform,\r\n\t\t};\r\n\t}, [arrowProps]);\r\n\r\n\tconst content = (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classNames(\"i-popup\", className)}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{arrow && (\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tclassName='i-popup-arrow'\r\n\t\t\t\t\tstyle={arrowCSS}\r\n\t\t\t\t>\r\n\t\t\t\t\t<path d='M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z'></path>\r\n\t\t\t\t\t{/* <path d='M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z'></path> */}\r\n\t\t\t\t</svg>\r\n\t\t\t)}\r\n\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn createPortal(content, getContainer(trigger));\r\n});\r\n\r\nexport default Content;\r\n","import { useResizeObserver } from \"@p/js/hooks\";\r\nimport { getPointPosition, getPosition } from \"@p/js/utils\";\r\nimport { useClickAway, useCreation, useReactive } from \"ahooks\";\r\nimport {\r\n\tCSSProperties,\r\n\tChildren,\r\n\tMouseEvent,\r\n\tcloneElement,\r\n\tisValidElement,\r\n\tuseEffect,\r\n\tuseLayoutEffect,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Content from \"./content\";\r\nimport \"./index.css\";\r\nimport { IPopup } from \"./type\";\r\n\r\nexport default function Popup(props: IPopup) {\r\n\tconst {\r\n\t\tvisible = false,\r\n\t\tcontent,\r\n\t\ttrigger = \"hover\",\r\n\t\tgap = 12,\r\n\t\toffset = 8,\r\n\t\tfixed,\r\n\t\tposition = \"top\",\r\n\t\tshowDelay = 16,\r\n\t\thideDelay = 12,\r\n\t\ttouchable,\r\n\t\tarrow = true,\r\n\t\talign,\r\n\t\tfitSize,\r\n\t\twatchResize,\r\n\t\tclickOutside = true,\r\n\t\tdisabled,\r\n\t\treferToWindow,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tgetContainer,\r\n\t\tchildren,\r\n\t\tonVisibleChange,\r\n\t} = props;\r\n\r\n\tconst triggerRef = useRef<HTMLElement>(null);\r\n\tconst contentRef = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive<{\r\n\t\tshow: boolean;\r\n\t\ttoggling: any;\r\n\t\tstyle: CSSProperties;\r\n\t\tarrowProps: Record<string, any>;\r\n\t}>({\r\n\t\tshow: false,\r\n\t\ttoggling: false,\r\n\t\tstyle: { position: fixed ? \"fixed\" : \"absolute\" },\r\n\t\tarrowProps: {},\r\n\t});\r\n\r\n\tuseClickAway((e: Event) => {\r\n\t\tif (!clickOutside) return;\r\n\r\n\t\tconst tar = e.target as HTMLElement;\r\n\t\tconst isContain = triggerRef.current?.contains(tar);\r\n\r\n\t\tif (!state.show) return;\r\n\r\n\t\t(!isContain || trigger === \"contextmenu\") && handleToggle(false);\r\n\t}, contentRef);\r\n\r\n\tconst handleShow = () => {\r\n\t\tif (disabled) return;\r\n\t\tif (\r\n\t\t\tstate.show &&\r\n\t\t\t(trigger !== \"hover\" || (trigger === \"hover\" && !touchable))\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.show = true;\r\n\r\n\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\tstate.toggling = setTimeout(() => {\r\n\t\t\tconst [left, top, { arrowX, arrowY, arrowPos }] = getPosition(\r\n\t\t\t\ttriggerRef.current,\r\n\t\t\t\tcontentRef.current,\r\n\t\t\t\t{\r\n\t\t\t\t\tposition,\r\n\t\t\t\t\tgap,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\talign,\r\n\t\t\t\t\trefWindow: referToWindow,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tstate.style = {\r\n\t\t\t\t...state.style,\r\n\t\t\t\topacity: 1,\r\n\t\t\t\ttransform: \"none\",\r\n\t\t\t\tleft,\r\n\t\t\t\ttop,\r\n\t\t\t};\r\n\t\t\tstate.arrowProps = {\r\n\t\t\t\tleft: arrowX,\r\n\t\t\t\ttop: arrowY,\r\n\t\t\t\tpos: arrowPos,\r\n\t\t\t};\r\n\t\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\t\tonVisibleChange?.(true);\r\n\t\t}, showDelay);\r\n\t};\r\n\r\n\tconst handleHide = () => {\r\n\t\tif (!state.show) return;\r\n\t\tstate.toggling = setTimeout(() => {\r\n\t\t\tstate.style = {\r\n\t\t\t\t...state.style,\r\n\t\t\t\topacity: 0,\r\n\t\t\t\ttransform: \"translate(0, 2px)\",\r\n\t\t\t};\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.show = false;\r\n\t\t\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\t\t\tonVisibleChange?.(false);\r\n\t\t\t}, 160);\r\n\t\t}, hideDelay);\r\n\t};\r\n\r\n\tconst handleToggle = (action?: boolean) => {\r\n\t\tif (action !== undefined) {\r\n\t\t\taction ? handleShow() : handleHide();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.show ? handleHide() : handleShow();\r\n\t};\r\n\tconst eventMaps = useCreation(\r\n\t\t() => ({\r\n\t\t\tclick: {\r\n\t\t\t\tonClick: () => handleToggle(true),\r\n\t\t\t},\r\n\t\t\thover: {\r\n\t\t\t\tonMouseEnter: () => handleToggle(true),\r\n\t\t\t\tonMouseLeave: () => handleToggle(false),\r\n\t\t\t},\r\n\t\t\tfocus: {\r\n\t\t\t\tonFocus: () => handleToggle(true),\r\n\t\t\t\tonBlur: () => handleToggle(false),\r\n\t\t\t},\r\n\t\t\tcontextmenu: {\r\n\t\t\t\tonContextMenu: (e: MouseEvent) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\t\tif (state.show) {\r\n\t\t\t\t\t\tconst [left, top] = getPointPosition(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\tcontentRef.current as HTMLElement\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstate.style = {\r\n\t\t\t\t\t\t\t...state.style,\r\n\t\t\t\t\t\t\tleft,\r\n\t\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tstate.show = true;\r\n\r\n\t\t\t\t\tstate.toggling = setTimeout(() => {\r\n\t\t\t\t\t\tconst [left, top] = getPointPosition(\r\n\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\tcontentRef.current as HTMLElement\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tstate.style = {\r\n\t\t\t\t\t\t\t...state.style,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\ttransform: \"none\",\r\n\t\t\t\t\t\t\tleft,\r\n\t\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tstate.toggling && clearTimeout(state.toggling);\r\n\t\t\t\t\t\tonVisibleChange?.(true);\r\n\t\t\t\t\t}, showDelay);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnone: {},\r\n\t\t}),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst contentTouch = useMemo(() => {\r\n\t\tif (!touchable) return {};\r\n\t\tconst events: { [key: string]: () => void } = {};\r\n\r\n\t\tif (trigger === \"hover\") {\r\n\t\t\tevents[\"onMouseEnter\"] = () => handleToggle(true);\r\n\t\t\tevents[\"onMouseLeave\"] = () => handleToggle(false);\r\n\t\t}\r\n\r\n\t\treturn events;\r\n\t}, [touchable, trigger]);\r\n\r\n\tconst computePosition = () => {\r\n\t\tif (!state.show) return;\r\n\r\n\t\tconst [left, top, { arrowX, arrowY, arrowPos }] = getPosition(\r\n\t\t\ttriggerRef.current,\r\n\t\t\tcontentRef.current,\r\n\t\t\t{\r\n\t\t\t\tposition,\r\n\t\t\t\tgap,\r\n\t\t\t\toffset,\r\n\t\t\t\talign,\r\n\t\t\t\trefWindow: referToWindow,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tstyle: { ...state.style, left, top },\r\n\t\t\tarrowProps: { left: arrowX, top: arrowY, pos: arrowPos },\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (trigger === \"contextmenu\") return;\r\n\t\tconst { observe, unobserve, disconnect } = useResizeObserver();\r\n\r\n\t\ttriggerRef.current && observe(triggerRef.current, computePosition);\r\n\r\n\t\tif (!watchResize || !contentRef.current) return;\r\n\r\n\t\tobserve(contentRef.current, computePosition);\r\n\r\n\t\treturn () => {\r\n\t\t\tif (!watchResize || !contentRef.current) return;\r\n\r\n\t\t\tunobserve(contentRef.current);\r\n\t\t\ttriggerRef.current && unobserve(triggerRef.current);\r\n\t\t\tdisconnect();\r\n\t\t};\r\n\t}, [watchResize, contentRef.current, triggerRef.current]);\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\tif (!fitSize || !state.show) return;\r\n\r\n\t\tconst vertical = [\"top\", \"bottom\"].includes(position);\r\n\t\tconst size =\r\n\t\t\ttriggerRef.current?.[vertical ? \"offsetWidth\" : \"offsetHeight\"];\r\n\t\tstate.style = { ...state.style, [vertical ? \"width\" : \"height\"]: size };\r\n\t}, [state.show, fitSize]);\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\thandleToggle(visible);\r\n\t}, [visible]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{Children.map(children, (child) => {\r\n\t\t\t\tif (!isValidElement(child)) return;\r\n\r\n\t\t\t\tconst { type, props } = child;\r\n\r\n\t\t\t\tif (typeof type === \"function\") return child;\r\n\r\n\t\t\t\tconst { className, ...rest } = props;\r\n\r\n\t\t\t\treturn cloneElement(child, {\r\n\t\t\t\t\tref: triggerRef,\r\n\t\t\t\t\tclassName,\r\n\t\t\t\t\t...eventMaps[trigger],\r\n\t\t\t\t\t...rest,\r\n\t\t\t\t});\r\n\t\t\t})}\r\n\r\n\t\t\t{state.show && (\r\n\t\t\t\t<Content\r\n\t\t\t\t\tref={contentRef}\r\n\t\t\t\t\tarrow={arrow && trigger !== \"contextmenu\"}\r\n\t\t\t\t\tstyle={{ ...style, ...state.style }}\r\n\t\t\t\t\tarrowProps={state.arrowProps}\r\n\t\t\t\t\tclassName={className}\r\n\t\t\t\t\t{...contentTouch}\r\n\t\t\t\t\ttrigger={triggerRef.current as HTMLElement}\r\n\t\t\t\t\tgetContainer={getContainer}\r\n\t\t\t\t>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</Content>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n}\r\n","import { useMemoizedFn } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { ReactNode, useMemo } from \"react\";\r\nimport { IBaseDates } from \"./type\";\r\n\r\nconst Dates = (\r\n\tprops: IBaseDates & {\r\n\t\tmonth: any;\r\n\t}\r\n) => {\r\n\tconst {\r\n\t\tvalue,\r\n\t\tmonth,\r\n\t\tweeks = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"日\"],\r\n\t\trenderDate = (date: Dayjs) => date.date(),\r\n\t\tdisabledDate,\r\n\t\tonDateClick,\r\n\t} = props;\r\n\tconst today = dayjs();\r\n\r\n\tconst dates = useMemo(() => {\r\n\t\tconst dates: Dayjs[] = [];\r\n\r\n\t\tconst lastDateOfLastMonth = month.add(-1, \"month\").endOf(\"month\");\r\n\t\tlet { $W, $D } = lastDateOfLastMonth;\r\n\r\n\t\tif ($W !== 0) {\r\n\t\t\tconst lastMonthDates = Array.from({ length: $W }).map(\r\n\t\t\t\t(whatever, i) => lastDateOfLastMonth.add(i + 1 - $W, \"day\")\r\n\t\t\t);\r\n\t\t\tdates.push(...lastMonthDates);\r\n\t\t}\r\n\r\n\t\tconst lastDate = month.endOf(\"month\");\r\n\t\t$D = lastDate.$D;\r\n\t\t$W = lastDate.$W;\r\n\t\tdates.push(\r\n\t\t\t...Array.from({ length: $D }).map((whatever, i) =>\r\n\t\t\t\tlastDate.add(i + 1 - $D, \"day\")\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\tif ($W !== 0) {\r\n\t\t\tdates.push(\r\n\t\t\t\t...Array.from({ length: 7 - $W }).map((whatever, i) =>\r\n\t\t\t\t\tlastDate.add(i + 1, \"day\")\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn dates;\r\n\t}, [month]);\r\n\r\n\tconst handleDateClick = useMemoizedFn((date: Dayjs) => {\r\n\t\tif (disabledDate?.(date)) return;\r\n\r\n\t\tonDateClick?.(date);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className='i-datepicker-weeks'>\r\n\t\t\t\t{weeks.map((week: ReactNode, i: number) => (\r\n\t\t\t\t\t<span key={i} className='i-datepicker-week'>\r\n\t\t\t\t\t\t{week}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='i-datepicker-dates'>\r\n\t\t\t\t{dates.map((date, i: number) => {\r\n\t\t\t\t\tconst active = date.isSame(value, \"day\");\r\n\t\t\t\t\tconst isSameMonth = date.isSame(month, \"month\");\r\n\t\t\t\t\tconst isToday = date.isSame(today, \"day\");\r\n\t\t\t\t\tconst disabled = disabledDate?.(date);\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tclassName={classNames(\"i-datepicker-item\", {\r\n\t\t\t\t\t\t\t\t\"i-datepicker-active\": active,\r\n\t\t\t\t\t\t\t\t\"i-datepicker-same-month\": isSameMonth,\r\n\t\t\t\t\t\t\t\t\"i-datepicker-today\": isToday,\r\n\t\t\t\t\t\t\t\t\"i-datepicker-disabled\": disabled,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tonClick={() => handleDateClick(date)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderDate(date)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Dates;\r\n","import {\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { throttle } from \"radash\";\r\nimport { ReactNode, useCallback, useEffect, useRef } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport Dates from \"./dates\";\r\nimport { IBaseDates } from \"./type\";\r\n\r\nconst MONTHS = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\r\n\r\nconst YearMonth = (\r\n\tprops: IBaseDates & {\r\n\t\tonClick?: () => void;\r\n\t}\r\n) => {\r\n\tconst {\r\n\t\tvalue,\r\n\t\tunitMonth = \"月\",\r\n\t\tunitYear = \"年\",\r\n\t\trenderYear,\r\n\t\trenderMonth,\r\n\t\tonClick,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<a className='i-datepicker-action' data-ripple onClick={onClick}>\r\n\t\t\t<span>{renderYear?.(value.year())}</span>\r\n\t\t\t{unitYear}\r\n\t\t\t<span>{renderMonth?.(value.month() + 1)}</span>\r\n\t\t\t{unitMonth}\r\n\t\t</a>\r\n\t);\r\n};\r\n\r\nconst Panel = (props: IBaseDates) => {\r\n\tconst {\r\n\t\tvalue,\r\n\t\tunitYear,\r\n\t\tunitMonth,\r\n\t\trenderDate,\r\n\t\trenderMonth = (m: ReactNode) => m,\r\n\t\trenderYear = (y: ReactNode) => y,\r\n\t\tdisabledDate,\r\n\t\tonDateClick,\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\ttoday: value,\r\n\t\tmonth: value || dayjs(),\r\n\t\tselectedYear: dayjs(),\r\n\t\tyears: [] as number[],\r\n\t\tselectable: false,\r\n\t});\r\n\r\n\tconst $years = useRef<HTMLDivElement>(null);\r\n\r\n\tconst handleOperateMonth = useCallback((next: boolean) => {\r\n\t\tstate.month = state.month[next ? \"add\" : \"subtract\"](1, \"month\");\r\n\t}, []);\r\n\r\n\tconst handleChangeDate = (date: Dayjs) => {\r\n\t\tif (date.isSame(state.today, \"day\")) return;\r\n\r\n\t\tif (!date.isSame(state.month, \"month\")) {\r\n\t\t\tstate.month = date;\r\n\t\t}\r\n\r\n\t\tstate.today = date;\r\n\t\tonDateClick?.(date);\r\n\t};\r\n\r\n\tconst handleChangeMonth = (month: number) => {\r\n\t\tstate.month = state.month\r\n\t\t\t.year(state.selectedYear.year())\r\n\t\t\t.month(month - 1);\r\n\t\tstate.selectable = false;\r\n\t};\r\n\r\n\tconst getMoreYears = throttle({ interval: 100 }, (e) => {\r\n\t\tconst isUp = e.deltaY < 0;\r\n\r\n\t\tstate.years = state.years.map((y) => (y += isUp ? -1 : 1));\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!state.selectable) return;\r\n\r\n\t\tstate.selectedYear = state.month;\r\n\t\tconst y = state.selectedYear.year();\r\n\t\tconst years = Array.from({ length: 7 }).map((_, i) => y - 3 + i);\r\n\r\n\t\tstate.years = [...years];\r\n\t}, [state.selectable]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.today = value;\r\n\t\tstate.month = value || dayjs();\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div className='i-datepicker'>\r\n\t\t\t<div className='i-datepicker-units'>\r\n\t\t\t\t<YearMonth\r\n\t\t\t\t\tvalue={state.month}\r\n\t\t\t\t\tunitYear={unitYear}\r\n\t\t\t\t\tunitMonth={unitMonth}\r\n\t\t\t\t\trenderMonth={renderMonth}\r\n\t\t\t\t\trenderYear={renderYear}\r\n\t\t\t\t\tonClick={() => (state.selectable = true)}\r\n\t\t\t\t/>\r\n\t\t\t\t<a\r\n\t\t\t\t\tclassName='ml-auto i-datepicker-action'\r\n\t\t\t\t\tdata-ripple\r\n\t\t\t\t\tonClick={() => handleOperateMonth(false)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon icon={<KeyboardArrowLeftRound />} />\r\n\t\t\t\t</a>\r\n\t\t\t\t<a\r\n\t\t\t\t\tclassName='i-datepicker-action'\r\n\t\t\t\t\tdata-ripple\r\n\t\t\t\t\tonClick={() => handleOperateMonth(true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon icon={<KeyboardArrowRightRound />} />\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-datepicker-ym\", {\r\n\t\t\t\t\t\"i-datepicker-active\": state.selectable,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<Helpericon\r\n\t\t\t\t\tactive\r\n\t\t\t\t\tclassName='i-datepicker-close'\r\n\t\t\t\t\tonClick={() => (state.selectable = false)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={$years}\r\n\t\t\t\t\tclassName='i-datepicker-years'\r\n\t\t\t\t\tonWheel={getMoreYears}\r\n\t\t\t\t>\r\n\t\t\t\t\t{state.years.map((y) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={y}\r\n\t\t\t\t\t\t\tclassName={classNames(\"i-datepicker-year\", {\r\n\t\t\t\t\t\t\t\t\"i-datepicker-active\":\r\n\t\t\t\t\t\t\t\t\ty === state.selectedYear.year(),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t(state.selectedYear =\r\n\t\t\t\t\t\t\t\t\tstate.selectedYear.year(y))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderYear(y)}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='i-datepicker-months'>\r\n\t\t\t\t\t{MONTHS.map((m) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={m}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-datepicker-month\", {\r\n\t\t\t\t\t\t\t\t\t\"i-datepicker-active\":\r\n\t\t\t\t\t\t\t\t\t\tm === state.month.month() + 1,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tonClick={() => handleChangeMonth(m)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{renderMonth(m)}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Dates\r\n\t\t\t\tvalue={state.today}\r\n\t\t\t\tmonth={state.month}\r\n\t\t\t\tdisabledDate={disabledDate}\r\n\t\t\t\tonDateClick={handleChangeDate}\r\n\t\t\t\trenderDate={renderDate}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Panel;\r\n","import { CalendarMonthTwotone } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport customParseFormat from \"dayjs/plugin/customParseFormat\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport Input from \"../input\";\r\nimport Popup from \"../popup\";\r\nimport \"./index.css\";\r\nimport Panel from \"./panel\";\r\nimport { IDatePicker } from \"./type\";\r\n\r\ndayjs.extend(customParseFormat);\r\n\r\nconst FORMATTYPES = [\"YYYY-MM-DD\", \"YYYY-M-D\", \"YYYY/MM/DD\", \"YYYY/M/D\"];\r\n\r\nconst Datepicker = (props: IDatePicker): JSX.Element => {\r\n\tconst {\r\n\t\tname,\r\n\t\tvalue,\r\n\t\tweeks,\r\n\t\tformat = \"YYYY-MM-DD\",\r\n\t\trenderDate,\r\n\t\trenderMonth,\r\n\t\trenderYear,\r\n\t\tpopupProps,\r\n\t\tdisabledDate,\r\n\t\tonDateClick,\r\n\t\tonChange,\r\n\t\tonBlur,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst [active, setActive] = useState<boolean>(false);\r\n\r\n\tconst dayJsValue = useMemo(() => {\r\n\t\tif (!state.value) return null;\r\n\r\n\t\tconst date = dayjs(state.value as string, format, true);\r\n\r\n\t\tif (date.isValid()) return date;\r\n\r\n\t\treturn null;\r\n\t}, [state.value]);\r\n\r\n\tconst handleDateClick = (date: Dayjs) => {\r\n\t\thandleChange(date.format(format));\r\n\t};\r\n\r\n\tconst handleChange = (v) => {\r\n\t\tstate.value = v;\r\n\t\tonChange?.(v);\r\n\t};\r\n\r\n\tconst handleSetDate = () => {\r\n\t\tif (!state.value) return;\r\n\r\n\t\tconst date = dayjs(state.value as string, FORMATTYPES, true);\r\n\r\n\t\tif (date.isValid()) {\r\n\t\t\thandleChange(date.format(format));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thandleChange(\"\");\r\n\t};\r\n\r\n\tconst handleBlur = (e) => {\r\n\t\tonBlur?.(e);\r\n\r\n\t\thandleSetDate();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\tvisible={active}\r\n\t\t\ttrigger='click'\r\n\t\t\tposition='bottom'\r\n\t\t\tarrow={false}\r\n\t\t\talign='start'\r\n\t\t\tcontent={\r\n\t\t\t\t<Panel\r\n\t\t\t\t\tvalue={dayJsValue}\r\n\t\t\t\t\tweeks={weeks}\r\n\t\t\t\t\trenderDate={renderDate}\r\n\t\t\t\t\trenderMonth={renderMonth}\r\n\t\t\t\t\trenderYear={renderYear}\r\n\t\t\t\t\tdisabledDate={disabledDate}\r\n\t\t\t\t\tonDateClick={handleDateClick}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\t{...popupProps}\r\n\t\t\twatchResize\r\n\t\t\tonVisibleChange={setActive}\r\n\t\t>\r\n\t\t\t<Input\r\n\t\t\t\tvalue={state.value}\r\n\t\t\t\tprepend={\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<CalendarMonthTwotone />}\r\n\t\t\t\t\t\tclassName='i-datepicker-icon'\r\n\t\t\t\t\t\tsize='1em'\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\tonEnter={handleSetDate}\r\n\t\t\t\t{...restProps}\r\n\t\t\t/>\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nexport default Datepicker;\r\n","import classNames from \"classnames\";\r\nimport { CSSProperties, Fragment } from \"react\";\r\nimport \"./index.css\";\r\nimport { IDescription } from \"./type\";\r\n\r\nconst Description = (props: IDescription): JSX.Element => {\r\n\tconst {\r\n\t\tdata,\r\n\t\tcolon,\r\n\t\tcolumns = 1,\r\n\t\tgap = \".5em\",\r\n\t\talign,\r\n\t\tlabelWidth,\r\n\t\tlabelAlign,\r\n\t\tvertical,\r\n\t\tequally,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-description\", className)}\r\n\t\t\tstyle={\r\n\t\t\t\t{\r\n\t\t\t\t\t[\"--description-label-width\"]: labelWidth,\r\n\t\t\t\t\tgridTemplateColumns: `repeat(${columns}, ${\r\n\t\t\t\t\t\tequally ? \"1fr\" : \"auto\"\r\n\t\t\t\t\t})`,\r\n\t\t\t\t\tgap,\r\n\t\t\t\t\ttextAlign: align,\r\n\t\t\t\t\t...style,\r\n\t\t\t\t} as CSSProperties\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{data.map((item, i) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tlabel,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tstyle,\r\n\t\t\t\t\thidden,\r\n\t\t\t\t\trowSpan = 1,\r\n\t\t\t\t\tcolSpan = 1,\r\n\t\t\t\t} = item;\r\n\r\n\t\t\t\tif (hidden) return <Fragment key={i} />;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tclassName={classNames(\"i-description-item\", {\r\n\t\t\t\t\t\t\t\"i-description-item-vertical\": vertical,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tgridColumn: `span ${colSpan}`,\r\n\t\t\t\t\t\t\tgridRow: `span ${rowSpan}`,\r\n\t\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{label && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='i-description-label'\r\n\t\t\t\t\t\t\t\tstyle={{ textAlign: labelAlign }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t\t{colon}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className='i-description-value'>{value}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Description;\r\n","import classNames from \"classnames\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { IDrawer } from \"./type\";\r\n\r\nfunction Drawer(props: IDrawer) {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tposition = \"left\",\r\n\t\theader,\r\n\t\tfooter,\r\n\t\tbackdropClosable = true,\r\n\t\thideCloseButton,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonVisibleChange,\r\n\t\tonClose,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst [show, setShow] = useState(visible);\r\n\tconst [active, setActive] = useState(visible);\r\n\tconst toggable = useRef(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tvisible ? handleShow() : handleHide();\r\n\t}, [visible]);\r\n\r\n\tconst handleShow = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\r\n\t\tsetShow(true);\r\n\t\tonVisibleChange?.(true);\r\n\t\ttoggable.current = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetActive(true);\r\n\t\t\ttoggable.current = true;\r\n\t\t}, 24);\r\n\t}, []);\r\n\r\n\tconst handleHide = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\t\ttoggable.current = false;\r\n\r\n\t\tsetActive(false);\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShow(false);\r\n\t\t\tonVisibleChange?.(false);\r\n\t\t\ttoggable.current = true;\r\n\t\t\tonClose?.();\r\n\t\t}, 240);\r\n\t}, []);\r\n\r\n\tconst handleBackdropClick = useCallback(function () {\r\n\t\tbackdropClosable && handleHide();\r\n\t}, []);\r\n\r\n\treturn createPortal(\r\n\t\tshow && (\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-backdrop-drawer\", className, {\r\n\t\t\t\t\t\"i-active\": active,\r\n\t\t\t\t})}\r\n\t\t\t\tonClick={handleBackdropClick}\r\n\t\t\t\t{...restProps}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classNames(\"i-drawer\", `i-drawer-${position}`)}\r\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<header className='i-drawer-header'>\r\n\t\t\t\t\t\t{header}\r\n\r\n\t\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\t\tactive={!hideCloseButton}\r\n\t\t\t\t\t\t\tclassName='i-drawer-close'\r\n\t\t\t\t\t\t\tonClick={handleHide}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</header>\r\n\r\n\t\t\t\t\t<div className='i-drawer-content'>{children}</div>\r\n\r\n\t\t\t\t\t<div className='i-drawer-footer'>{footer}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t),\r\n\t\tdocument.body\r\n\t);\r\n}\r\n\r\nexport default Drawer;\r\n","import classNames from \"classnames\";\r\nimport { forwardRef } from \"react\";\r\nimport { IListItem } from \"./type\";\r\n\r\nconst Item = forwardRef<HTMLLIElement, IListItem>((props, ref) => {\r\n\tconst {\r\n\t\tactive,\r\n\t\ttype,\r\n\t\talign,\r\n\t\tdisabled,\r\n\t\tlabel,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<li\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classNames(\"i-list-item\", className, {\r\n\t\t\t\t\"i-list-item-active\": active,\r\n\t\t\t\t\"i-list-option\": type === \"option\",\r\n\t\t\t\tdisabled,\r\n\t\t\t})}\r\n\t\t\tstyle={{ alignItems: align, ...style }}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{label !== undefined && (\r\n\t\t\t\t<span className='i-list-item-label'>{label}</span>\r\n\t\t\t)}\r\n\t\t\t{children}\r\n\t\t</li>\r\n\t);\r\n});\r\n\r\nexport default Item;\r\n","import classNames from \"classnames\";\r\nimport { Children, cloneElement } from \"react\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { IList } from \"./type\";\r\nimport Virtual from \"./virtual\";\r\n\r\nconst List = (props: IList): JSX.Element => {\r\n\tconst { label, type, className, children, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<ul className={classNames(\"i-list\", className)} {...restProps}>\r\n\t\t\t{Children.map(children, (node: any, i) => {\r\n\t\t\t\tconst renderLabel =\r\n\t\t\t\t\ttypeof label === \"function\" ? label(i) : label;\r\n\r\n\t\t\t\treturn cloneElement(node, {\r\n\t\t\t\t\tlabel: renderLabel,\r\n\t\t\t\t\t...node.props,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t});\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nList.Virtual = Virtual;\r\nList.Item = Item;\r\n\r\nexport default List;\r\n","import VList from \"rc-virtual-list\";\r\nimport { IVirtual } from \"./type\";\r\n\r\nconst Virtual = (props: IVirtual) => {\r\n\tconst { data, itemKey, renderItem, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<VList data={data} itemKey={itemKey} {...restProps}>\r\n\t\t\t{(item, i) => {\r\n\t\t\t\treturn renderItem?.(item, i);\r\n\t\t\t}}\r\n\t\t</VList>\r\n\t);\r\n};\r\n\r\nexport default Virtual;\r\n","import List from \"../list\";\r\nimport Popup from \"../popup\";\r\nimport { IDropItem } from \"./type\";\r\n\r\nconst { Item: ListItem } = List;\r\n\r\nconst Item = (props: IDropItem) => {\r\n\tconst { more, moreProps, ...restProps } = props;\r\n\tconst Li = <ListItem {...restProps} />;\r\n\r\n\tif (!more) return Li;\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\tposition='right'\r\n\t\t\ttouchable\r\n\t\t\tarrow={false}\r\n\t\t\talign='start'\r\n\t\t\toffset={10}\r\n\t\t\t{...moreProps}\r\n\t\t\tcontent={\r\n\t\t\t\t<List\r\n\t\t\t\t\tclassName='i-dropdown-content'\r\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t{more}\r\n\t\t\t\t</List>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{Li}\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nexport default Item;\r\n","import List from \"../list\";\r\nimport Popup from \"../popup\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { IDropdown } from \"./type\";\r\n\r\nconst Dropdown = (props: IDropdown): JSX.Element => {\r\n\tconst { width, content, children, ...restProps } = props;\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\ttrigger='click'\r\n\t\t\tposition='bottom'\r\n\t\t\ttouchable\r\n\t\t\tcontent={\r\n\t\t\t\t<List\r\n\t\t\t\t\tclassName='i-dropdown-content'\r\n\t\t\t\t\tstyle={{ minWidth: width }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</List>\r\n\t\t\t}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nDropdown.Item = Item;\r\n\r\nexport default Dropdown;\r\n","import classNames from \"classnames\";\r\nimport { useMemo } from \"react\";\r\nimport \"./index.css\";\r\nimport { IFlex } from \"./type\";\r\n\r\nconst Flex = (props: IFlex): JSX.Element => {\r\n\tconst {\r\n\t\tas: Component = \"div\",\r\n\t\talign,\r\n\t\tjustify,\r\n\t\tdirection,\r\n\t\twrap,\r\n\t\tgap,\r\n\t\tcolumns,\r\n\t\tclassName,\r\n\t\tstyle,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst gridColumns = useMemo(() => {\r\n\t\tif (!columns) return;\r\n\r\n\t\tif (typeof columns === \"number\") return `repeat(${columns}, 1fr)`;\r\n\r\n\t\treturn columns;\r\n\t}, [columns]);\r\n\r\n\treturn (\r\n\t\t<Component\r\n\t\t\t{...restProps}\r\n\t\t\tstyle={{\r\n\t\t\t\talignItems: align,\r\n\t\t\t\tjustifyContent: justify,\r\n\t\t\t\tgap,\r\n\t\t\t\tflexDirection: direction,\r\n\t\t\t\tflexWrap: wrap === true ? \"wrap\" : wrap,\r\n\t\t\t\tgridTemplateColumns: gridColumns as any,\r\n\t\t\t\t...style,\r\n\t\t\t}}\r\n\t\t\tclassName={classNames(className, {\r\n\t\t\t\t[columns ? \"grid\" : \"flex\"]: true,\r\n\t\t\t})}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default Flex;\r\n","import { createContext } from \"react\";\r\nimport { IFormInstance } from \"./useForm\";\r\n\r\nconst Context = createContext({} as IFormInstance);\r\n\r\nexport default Context;\r\n","import PubSub from \"pubsub-js\";\r\nimport { uid } from \"radash\";\r\nimport { useRef } from \"react\";\r\nimport { IForm, TRule } from \"./type\";\r\n\r\nexport class IFormInstance {\r\n\treadonly id?: string;\r\n\tdata: { [key: string]: any } = {};\r\n\trules?: Pick<IForm, \"rules\"> = {};\r\n\r\n\tconstructor() {\r\n\t\tthis.id = uid(8);\r\n\t\tthis.data = {};\r\n\t}\r\n\r\n\tget(field?: string) {\r\n\t\treturn field ? this.data[field] : this.data;\r\n\t}\r\n\r\n\tset(field: any, value?: any) {\r\n\t\tconst id = this.id;\r\n\t\tif (!this.data) return;\r\n\r\n\t\tif (typeof field === \"string\") {\r\n\t\t\tthis.data[field] = value;\r\n\t\t\tPubSub.publish(`${id}:set:${field}`, value);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tObject.keys(field).map((name) => {\r\n\t\t\tthis.data[name] = field[name];\r\n\t\t\tPubSub.publish(`${id}:set:${name}`, field[name]);\r\n\t\t});\r\n\t}\r\n\r\n\tclear() {\r\n\t\tif (!this.data) return;\r\n\r\n\t\tObject.keys(this.data).map((name) => {\r\n\t\t\tPubSub.publish(`${this.id}:set:${name}`, undefined);\r\n\t\t\tthis.data[name] = undefined;\r\n\t\t});\r\n\t}\r\n\r\n\tasync validate(field?: string) {\r\n\t\tconst { id, rules, data } = this;\r\n\t\tif (!rules) return data;\r\n\r\n\t\tif (field) {\r\n\t\t\tconst o = rules[field];\r\n\t\t\tconst rule: TRule = {\r\n\t\t\t\tvalidator: (v) =>\r\n\t\t\t\t\tArray.isArray(v)\r\n\t\t\t\t\t\t? v.length > 0\r\n\t\t\t\t\t\t: ![undefined, null, \"\"].includes(v),\r\n\t\t\t\tmessage: undefined,\r\n\t\t\t};\r\n\r\n\t\t\tif (typeof o === \"function\") {\r\n\t\t\t\trule.validator = o;\r\n\t\t\t} else if (o === true) {\r\n\t\t\t\trule.message = \"required\";\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(rule, o);\r\n\t\t\t}\r\n\r\n\t\t\tconst isValid = rule.validator?.(data[field], this);\r\n\r\n\t\t\tif (!isValid) {\r\n\t\t\t\tPubSub.publish(`${id}:invalid:${field}`, {\r\n\t\t\t\t\tmessage: rule.message,\r\n\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tPubSub.publish(`${id}:invalid:${name}`, {\r\n\t\t\t\tmessage: null,\r\n\t\t\t\tstatus: \"normal\",\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tlet isAllValid = true;\r\n\r\n\t\tObject.keys(data).map((name) => {\r\n\t\t\tconst o = rules[name];\r\n\t\t\tif (o === undefined) return;\r\n\r\n\t\t\tconst rule: TRule = {\r\n\t\t\t\tvalidator: (v) => (Array.isArray(v) ? v.length > 0 : !!v),\r\n\t\t\t\tmessage: undefined,\r\n\t\t\t};\r\n\r\n\t\t\tif (typeof o === \"function\") {\r\n\t\t\t\trule.validator = o;\r\n\t\t\t} else if (o === true) {\r\n\t\t\t\trule.message = \"required\";\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(rule, o);\r\n\t\t\t}\r\n\r\n\t\t\tconst isValid = rule.validator?.(data[name], this);\r\n\r\n\t\t\tif (!isValid) {\r\n\t\t\t\tPubSub.publish(`${id}:invalid:${name}`, {\r\n\t\t\t\t\tmessage: rule.message,\r\n\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t});\r\n\t\t\t\tisAllValid = false;\r\n\t\t\t} else {\r\n\t\t\t\tPubSub.publish(`${id}:invalid:${name}`, {\r\n\t\t\t\t\tmessage: null,\r\n\t\t\t\t\tstatus: \"normal\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn isAllValid ? data : false;\r\n\t}\r\n}\r\n\r\nexport default function useForm(form?: IFormInstance) {\r\n\tconst formRef = useRef<IFormInstance>();\r\n\r\n\tif (!formRef.current) {\r\n\t\tformRef.current = form ?? new IFormInstance();\r\n\t}\r\n\r\n\treturn formRef.current;\r\n}\r\n","import classNames from \"classnames\";\r\nimport { useEffect } from \"react\";\r\nimport Context from \"./context\";\r\nimport Field from \"./field\";\r\nimport \"./index.css\";\r\nimport { IForm } from \"./type\";\r\nimport useForm, { IFormInstance } from \"./useForm\";\r\n\r\nconst Form = (props: IForm): JSX.Element => {\r\n\tconst {\r\n\t\tform = {} as IFormInstance,\r\n\t\trules = {},\r\n\t\tinitialValues = {},\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\twidth,\r\n\t\tchildren,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\tuseEffect(() => {\r\n\t\tObject.assign(form, {\r\n\t\t\tdata: { ...initialValues },\r\n\t\t\trules: { ...rules },\r\n\t\t});\r\n\t}, [form, rules]);\r\n\r\n\treturn (\r\n\t\t<Context.Provider value={form}>\r\n\t\t\t<form\r\n\t\t\t\tstyle={{ ...style, width }}\r\n\t\t\t\tclassName={classNames(\"i-form\", className)}\r\n\t\t\t\t{...rest}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</form>\r\n\t\t</Context.Provider>\r\n\t);\r\n};\r\n\r\nForm.useForm = useForm;\r\nForm.Field = Field;\r\n\r\nexport default Form;\r\n","import classNames from \"classnames\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Button from \"../button\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { CompositionModal, IModal, IModalContent } from \"./type\";\r\n\r\nfunction DefaultContent(props: IModalContent) {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tfooter,\r\n\t\thideCloseButton,\r\n\t\tfooterLeft,\r\n\t\tokButtonProps = {\r\n\t\t\tchildren: \"确定\",\r\n\t\t\tonClick: props.onOk,\r\n\t\t},\r\n\t\tcancelButtonProps = {\r\n\t\t\tsecondary: true,\r\n\t\t\tchildren: \"关闭\",\r\n\t\t\tonClick: props.onClose,\r\n\t\t},\r\n\t\tchildren,\r\n\t\tonClose,\r\n\t} = props;\r\n\tconst showHeader = title || !hideCloseButton;\r\n\r\n\tconst renderFooter = useMemo(() => {\r\n\t\tif (footer || footer === null) return footer;\r\n\r\n\t\tconst propsOk = Object.assign({}, okButtonProps);\r\n\t\tconst propsCancel = Object.assign({}, cancelButtonProps);\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{footerLeft}\r\n\t\t\t\t<Button {...propsOk} />\r\n\t\t\t\t<Button {...propsCancel} />\r\n\t\t\t</>\r\n\t\t);\r\n\t}, [footer, okButtonProps, cancelButtonProps]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showHeader && (\r\n\t\t\t\t<header className='i-modal-header'>\r\n\t\t\t\t\t{title && <b>{title}</b>}\r\n\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive={!hideCloseButton}\r\n\t\t\t\t\t\tclassName='i-modal-close'\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</header>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className='i-modal-content'>{children}</div>\r\n\r\n\t\t\t<footer className='i-modal-footer'>{renderFooter}</footer>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction Modal(props: IModal) {\r\n\tconst {\r\n\t\tvisible,\r\n\t\ttitle,\r\n\t\tfooter,\r\n\t\tokButtonProps,\r\n\t\tcancelButtonProps,\r\n\t\tclosable = true,\r\n\t\thideBackdrop,\r\n\t\tbackdropClosable = true,\r\n\t\thideCloseButton,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tcustomized,\r\n\t\tfixed,\r\n\t\tshadow = true,\r\n\t\tchildren,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tfooterLeft,\r\n\t\tonVisibleChange,\r\n\t\tonClose,\r\n\t\tonOk,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst [show, setShow] = useState(visible);\r\n\tconst [active, setActive] = useState(false);\r\n\tconst [bounced, setBounced] = useState(false);\r\n\tconst toggable = useRef(true);\r\n\r\n\tconst handleShow = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\r\n\t\tsetShow(true);\r\n\t\ttoggable.current = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetActive(true);\r\n\t\t\tonVisibleChange?.(true);\r\n\t\t\ttoggable.current = true;\r\n\t\t}, 24);\r\n\t}, []);\r\n\r\n\tconst handleHide = useCallback(() => {\r\n\t\tif (!toggable.current) return;\r\n\t\ttoggable.current = false;\r\n\r\n\t\tif (!closable) {\r\n\t\t\tsetBounced(true);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetBounced(false);\r\n\t\t\t\ttoggable.current = true;\r\n\t\t\t}, 400);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetActive(false);\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShow(false);\r\n\t\t\ttoggable.current = true;\r\n\t\t\tonVisibleChange?.(false);\r\n\t\t\tonClose?.();\r\n\t\t}, 240);\r\n\t}, [closable]);\r\n\r\n\tconst handleBackdropClick = useCallback(\r\n\t\tfunction () {\r\n\t\t\tbackdropClosable && handleHide();\r\n\t\t},\r\n\t\t[closable, backdropClosable]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tvisible ? handleShow() : handleHide();\r\n\t}, [visible]);\r\n\r\n\tif (!show) return null;\r\n\r\n\treturn createPortal(\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-modal-container\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-modal-backdrop\": !hideBackdrop,\r\n\t\t\t\t\t\"i-modal-customized\": customized,\r\n\t\t\t\t\t\"i-modal-active\": active,\r\n\t\t\t\t\tfixed,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tstyle={style}\r\n\t\t\tonClick={handleBackdropClick}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-modal\", {\r\n\t\t\t\t\tbounced,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t{...restProps}\r\n\t\t\t>\r\n\t\t\t\t{customized && children}\r\n\r\n\t\t\t\t{!customized && (\r\n\t\t\t\t\t<DefaultContent\r\n\t\t\t\t\t\ttitle={title}\r\n\t\t\t\t\t\thideCloseButton={hideCloseButton}\r\n\t\t\t\t\t\tfooter={footer}\r\n\t\t\t\t\t\tokButtonProps={okButtonProps}\r\n\t\t\t\t\t\tcancelButtonProps={cancelButtonProps}\r\n\t\t\t\t\t\tchildren={children}\r\n\t\t\t\t\t\tfooterLeft={footerLeft}\r\n\t\t\t\t\t\tonOk={onOk}\r\n\t\t\t\t\t\tonClose={handleHide}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>,\r\n\t\tdocument.body\r\n\t);\r\n}\r\n\r\nexport default Modal as CompositionModal;\r\n","import { useReactive } from \"ahooks\";\r\nimport PubSub from \"pubsub-js\";\r\nimport {\r\n\tChildren,\r\n\tcloneElement,\r\n\tisValidElement,\r\n\tuseCallback,\r\n\tuseContext,\r\n\tuseEffect,\r\n\tuseMemo,\r\n} from \"react\";\r\nimport Context from \"./context\";\r\nimport { IField } from \"./type\";\r\n\r\nfunction Field(props: IField) {\r\n\tconst { name, required, children } = props;\r\n\tconst state = useReactive({\r\n\t\tvalue: undefined,\r\n\t\tstatus: \"normal\",\r\n\t\tmessage: undefined,\r\n\t\tupdate: 0,\r\n\t});\r\n\tconst form = useContext(Context);\r\n\tconst { id } = form;\r\n\r\n\tconst handleChange = useCallback(\r\n\t\t(v) => {\r\n\t\t\tif (!name) return;\r\n\r\n\t\t\tform.set(name, v);\r\n\t\t},\r\n\t\t[name]\r\n\t);\r\n\r\n\tconst hijackChildren = useMemo(() => {\r\n\t\treturn Children.map(children, (node) => {\r\n\t\t\tif (!isValidElement(node)) return null;\r\n\r\n\t\t\tconst { onChange } = node.props as any;\r\n\t\t\tconst { value, status, message } = state;\r\n\r\n\t\t\treturn cloneElement(node, {\r\n\t\t\t\tvalue,\r\n\t\t\t\tstatus,\r\n\t\t\t\tmessage,\r\n\t\t\t\trequired,\r\n\t\t\t\tonChange: (...args) => {\r\n\t\t\t\t\thandleChange(args[0]);\r\n\t\t\t\t\tonChange?.(...args);\r\n\t\t\t\t\tObject.assign(state, {\r\n\t\t\t\t\t\tstatus: \"normal\",\r\n\t\t\t\t\t\tmessage: undefined,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t} as any);\r\n\t\t});\r\n\t}, [children, state.update]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!name) return;\r\n\r\n\t\tPubSub.subscribe(`${id}:set:${name}`, (evt, v) => {\r\n\t\t\tstate.value = v;\r\n\t\t\tstate.update += 1;\r\n\t\t});\r\n\t\tPubSub.subscribe(`${id}:invalid:${name}`, (evt, v) => {\r\n\t\t\tObject.assign(state, v);\r\n\t\t\tstate.update += 1;\r\n\t\t});\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tform.data[name] = form.data[name] ?? undefined;\r\n\t\t}, 0);\r\n\r\n\t\treturn () => {\r\n\t\t\tPubSub.unsubscribe(`${id}:set:${name}`);\r\n\t\t\tPubSub.unsubscribe(`${id}:invalid:${name}`);\r\n\t\t};\r\n\t}, [name]);\r\n\r\n\tif (!name) return children;\r\n\r\n\treturn hijackChildren;\r\n}\r\n\r\nexport default Field;\r\n","import { useReactive } from \"ahooks\";\r\nimport { forwardRef, useImperativeHandle } from \"react\";\r\nimport Modal from \"./modal\";\r\nimport { IModal, RefHookModal } from \"./type\";\r\n\r\nconst HookModal = forwardRef<RefHookModal, IModal>((props, ref) => {\r\n\tconst state = useReactive<IModal>({});\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\tupdate: (config: IModal = {}) => {\r\n\t\t\tObject.assign(state, config);\r\n\t\t},\r\n\t}));\r\n\r\n\treturn <Modal {...props} {...state} />;\r\n});\r\n\r\nexport default HookModal;\r\n","import classNames from \"classnames\";\r\nimport { useMemo } from \"react\";\r\nimport \"./index.css\";\r\nimport { CompositionText, IText } from \"./type\";\r\n\r\nconst Text = (props: IText) => {\r\n\tconst {\r\n\t\tas: Tag = \"span\",\r\n\t\tsize,\r\n\t\tweight,\r\n\t\tdecoration,\r\n\t\tgradient,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t} = props;\r\n\r\n\tconst gradients = useMemo(() => {\r\n\t\tif (!gradient || !Array.isArray(gradient)) return {};\r\n\r\n\t\treturn {\r\n\t\t\tbackground: `-webkit-linear-gradient(${gradient.join(\",\")})`,\r\n\t\t\tbackgroundClip: \"text\",\r\n\t\t};\r\n\t}, [gradient]);\r\n\r\n\treturn (\r\n\t\t<Tag\r\n\t\t\tstyle={{\r\n\t\t\t\tfontSize: size,\r\n\t\t\t\tfontWeight: weight,\r\n\t\t\t\ttextDecoration: decoration,\r\n\t\t\t\t...gradients,\r\n\t\t\t\t...style,\r\n\t\t\t}}\r\n\t\t\tclassName={classNames(className, {\r\n\t\t\t\t\"i-text-gradient\": gradient,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Tag>\r\n\t);\r\n};\r\n\r\nexport default Text as CompositionText;\r\n","import Text from \"../text\";\r\nimport { IProgress } from \"./type\";\r\n\r\nexport default function Circle(\r\n\tprops: Pick<IProgress, \"value\" | \"height\" | \"size\">\r\n) {\r\n\tconst { value, height = 40, size = 8 } = props;\r\n\r\n\treturn (\r\n\t\t<div className='i-progress-circle'>\r\n\t\t\t<svg width={height} height={height}>\r\n\t\t\t\t<circle\r\n\t\t\t\t\tcx={height / 2}\r\n\t\t\t\t\tcy={height / 2}\r\n\t\t\t\t\tr={height / 2 - size / 2}\r\n\t\t\t\t\tfill='none'\r\n\t\t\t\t\tstroke='var(--background-opacity-2)'\r\n\t\t\t\t\tstrokeWidth={size}\r\n\t\t\t\t/>\r\n\t\t\t\t<circle\r\n\t\t\t\t\tcx={height / 2}\r\n\t\t\t\t\tcy={height / 2}\r\n\t\t\t\t\tr={height / 2 - size / 2}\r\n\t\t\t\t\tfill='none'\r\n\t\t\t\t\tstroke='var(--color-main)'\r\n\t\t\t\t\tstrokeWidth={size}\r\n\t\t\t\t\tstrokeDasharray={100}\r\n\t\t\t\t\tpathLength={100}\r\n\t\t\t\t\tclassName='i-progress-circle-path'\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tstrokeDashoffset: `calc(100 - ${value})`,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\r\n\t\t\t<span className='i-progress-circle-value'>\r\n\t\t\t\t<span>{value}</span>\r\n\t\t\t\t<Text size='.81em' className='color-7'>\r\n\t\t\t\t\t%\r\n\t\t\t\t</Text>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import Number from \"./number\";\r\nimport Text from \"./text\";\r\nimport Time from \"./time\";\r\n\r\nText.Number = Number;\r\nText.Time = Time;\r\n\r\nexport default Text;\r\n","import { animate, formatNumber } from \"@p/js/utils\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Text from \"./text\";\r\nimport { ITextNumber } from \"./type\";\r\n\r\nexport default function Number(props: ITextNumber) {\r\n\tconst {\r\n\t\tcount,\r\n\t\tto,\r\n\t\tdecimal,\r\n\t\tthousand = \",\",\r\n\t\tduration = 2400,\r\n\t\teasing,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst [n, setN] = useState(count);\r\n\r\n\tconst number = useMemo(() => {\r\n\t\tif (n === undefined) return;\r\n\r\n\t\tconst z = n.toFixed(decimal);\r\n\r\n\t\tif (!thousand) return z;\r\n\r\n\t\treturn formatNumber(n, { precision: decimal, thousand });\r\n\t}, [n, thousand]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (count === undefined || to === undefined) return;\r\n\r\n\t\tanimate(count, to, duration, (v) => setN(count + v), easing);\r\n\t}, [to]);\r\n\r\n\tuseEffect(() => setN(count), [count]);\r\n\r\n\treturn <Text {...restProps}>{number}</Text>;\r\n}\r\n","import { formatTime } from \"@p/js/utils\";\r\nimport { useMemo } from \"react\";\r\nimport Text from \"./text\";\r\nimport { ITextTime } from \"./type\";\r\n\r\nexport default function Number(props: ITextTime) {\r\n\tconst { seconds, zero, units, ...restProps } = props;\r\n\r\n\tconst text = useMemo(() => {\r\n\t\tif (seconds === undefined) return \"\";\r\n\r\n\t\treturn formatTime(seconds, {\r\n\t\t\tzero,\r\n\t\t\tunits,\r\n\t\t});\r\n\t}, [seconds]);\r\n\r\n\treturn <Text {...restProps}>{text}</Text>;\r\n}\r\n","import classNames from \"classnames\";\r\nimport { MouseEvent, forwardRef } from \"react\";\r\nimport { IProgress } from \"./type\";\r\n\r\nconst Line = forwardRef<\r\n\tHTMLDivElement,\r\n\tPick<IProgress, \"value\" | \"size\" | \"barClass\" | \"renderCursor\"> & {\r\n\t\tdragging: boolean;\r\n\t\tonMouseDown: (e: MouseEvent) => void;\r\n\t}\r\n>((props, ref) => {\r\n\tconst { value, size, barClass, dragging, renderCursor, onMouseDown } =\r\n\t\tprops;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName='i-progress'\r\n\t\t\tstyle={{ height: size }}\r\n\t\t\tonMouseDown={onMouseDown}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-progress-bar\", barClass, {\r\n\t\t\t\t\t\"no-transition\": dragging,\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{ width: `${value}%` }}\r\n\t\t\t>\r\n\t\t\t\t{renderCursor && (\r\n\t\t\t\t\t<a className='i-progress-cursor'>\r\n\t\t\t\t\t\t{renderCursor(value ?? 0)}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Line;\r\n","import { useMouseMove, useMouseUp } from \"@p/js/hooks\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { MouseEvent, useEffect, useMemo, useRef } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport Circle from \"./circle\";\r\nimport \"./index.css\";\r\nimport Line from \"./line\";\r\nimport { IProgress } from \"./type\";\r\n\r\nconst Progress = (props: IProgress): JSX.Element => {\r\n\tconst {\r\n\t\tvalue = 0,\r\n\t\tsize = 8,\r\n\t\theight = 40,\r\n\t\tprecision = 0,\r\n\t\tstyle,\r\n\t\tdraggable = true,\r\n\t\ttype = \"line\",\r\n\t\tbarClass,\r\n\t\tlabel,\r\n\t\tlabelInline,\r\n\t\tclassName,\r\n\t\trenderCursor,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\tconst ref = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t\tdragging: false,\r\n\t\twidth: 0,\r\n\t\tstart: 0,\r\n\t});\r\n\r\n\tconst toFixedValue = useMemo(() => {\r\n\t\tlet value = +state.value.toFixed(precision);\r\n\t\tvalue = Math.min(100, value);\r\n\t\tvalue = Math.max(0, value);\r\n\r\n\t\treturn value;\r\n\t}, [state.value, precision]);\r\n\r\n\tconst handleMouseDown = useMemoizedFn((e: MouseEvent) => {\r\n\t\tif (!ref.current || !draggable) return;\r\n\r\n\t\tconst rect = ref.current.getBoundingClientRect();\r\n\t\tconst value = ((e.pageX - rect.left) * 100) / rect.width;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tvalue,\r\n\t\t\twidth: rect.width,\r\n\t\t\tstart: rect.left,\r\n\t\t\tdragging: true,\r\n\t\t});\r\n\t});\r\n\r\n\tconst handleMouseMove = useMemoizedFn((e: any) => {\r\n\t\tif (!state.dragging || !draggable) return;\r\n\t\te.preventDefault();\r\n\t\tconst { start, width } = state;\r\n\t\tconst offset = e.pageX - start;\r\n\r\n\t\tif (offset < 0 || offset > width) return;\r\n\r\n\t\tstate.value = ((e.pageX - start) * 100) / width;\r\n\t});\r\n\r\n\tconst handleMouseUp = useMemoizedFn(() => {\r\n\t\tif (!state.dragging || !draggable) return;\r\n\r\n\t\tonChange?.(toFixedValue);\r\n\t\tstate.dragging = false;\r\n\t});\r\n\r\n\tuseMouseMove(handleMouseMove);\r\n\tuseMouseUp(handleMouseUp);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (value > 100) {\r\n\t\t\tstate.value = 100;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (value < 0) {\r\n\t\t\tstate.value = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-input-label\", className, {\r\n\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{label && <span className='i-input-label-text'>{label}</span>}\r\n\r\n\t\t\t{type === \"line\" && (\r\n\t\t\t\t<Line\r\n\t\t\t\t\tref={ref}\r\n\t\t\t\t\tsize={size}\r\n\t\t\t\t\tbarClass={barClass}\r\n\t\t\t\t\tdragging={state.dragging}\r\n\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\trenderCursor={renderCursor}\r\n\t\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{type === \"circle\" && (\r\n\t\t\t\t<Circle value={state.value} height={height} size={size} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Progress;\r\n","import { exitFullScreen, fullScreen } from \"@p/js/utils\";\r\nimport {\r\n\tFullscreenExitRound,\r\n\tFullscreenRound,\r\n\tPauseRound,\r\n\tPlayArrowRound,\r\n\tStopRound,\r\n\tVolumeDownRound,\r\n\tVolumeOffRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { forwardRef, useEffect, useImperativeHandle, useRef } from \"react\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport Progress from \"../progress\";\r\nimport Text from \"../text\";\r\nimport \"./index.css\";\r\nimport { IVideo, RefVideo } from \"./type\";\r\n\r\nconst Video = forwardRef<RefVideo, IVideo>((props, ref): JSX.Element => {\r\n\tconst {\r\n\t\tstyle,\r\n\t\thideControls,\r\n\t\tautoplay,\r\n\t\tmuted,\r\n\t\tvolume = 50,\r\n\t\theight,\r\n\t\twidth,\r\n\t\tuseOriginControls,\r\n\t\ttimeProgressProps = {\r\n\t\t\tbarClass: \"bg-2\",\r\n\t\t},\r\n\t\tvolumeProgressProps = {\r\n\t\t\tbarClass: \"bg-1\",\r\n\t\t},\r\n\t\tclassName,\r\n\t\tonFullScreenChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst state = useReactive({\r\n\t\tplaying: autoplay,\r\n\t\tvolume: muted ? 0 : volume,\r\n\t\tvolumeCache: 0,\r\n\t\tmuted,\r\n\t\tcurrent: 0,\r\n\t\tduration: 0,\r\n\t\tisFullscreen: false,\r\n\t});\r\n\tconst $v = useRef<HTMLVideoElement>(null);\r\n\r\n\tconst timeUpdateListener = (e) => {\r\n\t\tconst tar = e.target;\r\n\t\tif (tar.paused) return;\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tcurrent: tar.currentTime,\r\n\t\t});\r\n\t};\r\n\r\n\tconst playChangeListener = (e) => {\r\n\t\tstate.playing = !e.target.paused;\r\n\t};\r\n\r\n\tconst fsChangeListener = () => {\r\n\t\tconst tar = $v.current?.parentElement;\r\n\t\tif (!tar) return;\r\n\r\n\t\tstate.isFullscreen = document.fullscreenElement === tar;\r\n\t};\r\n\r\n\tconst volumeChangeListener = (e) => {\r\n\t\tconst tar = e.target;\r\n\t\tObject.assign(state, {\r\n\t\t\tvolume: tar.volume * 100,\r\n\t\t\tmuted: tar.volume === 0,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handlePlay = () => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.paused ? v.play() : v.pause();\r\n\t};\r\n\r\n\tconst handleReady = (e) => {\r\n\t\tconst tar = e.target;\r\n\t\tObject.assign(state, {\r\n\t\t\tduration: tar.duration,\r\n\t\t\tcurrent: tar.currentTime,\r\n\t\t});\r\n\t\ttar.volume = state.volume / 100;\r\n\t};\r\n\r\n\tconst handleMuted = () => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tif (v.volume > 0) {\r\n\t\t\tstate.volumeCache = v.volume;\r\n\t\t\tv.volume = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tv.volume = state.volumeCache === 0 ? 0.5 : state.volumeCache;\r\n\t};\r\n\r\n\tconst handleStop = () => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.currentTime = 0;\r\n\t\tv.pause();\r\n\t};\r\n\r\n\tconst handleFullscreen = () => {\r\n\t\tconst tar = $v.current?.parentElement;\r\n\t\tif (!tar) return;\r\n\r\n\t\tstate.isFullscreen ? exitFullScreen() : fullScreen(tar);\r\n\t\tonFullScreenChange?.(!state.isFullscreen);\r\n\t};\r\n\r\n\tconst handleUpdateTime = (t) => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.currentTime = (state.duration * t) / 100;\r\n\t};\r\n\r\n\tconst handleUpdateVolume = (t) => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.volume = t / 100;\r\n\t};\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\tplay: () => {\r\n\t\t\tconst v = $v.current;\r\n\t\t\tif (!v) return;\r\n\r\n\t\t\tv.play();\r\n\t\t},\r\n\t\tpause: () => {\r\n\t\t\tconst v = $v.current;\r\n\t\t\tif (!v) return;\r\n\r\n\t\t\tv.pause();\r\n\t\t},\r\n\t\tstop: handleStop,\r\n\t\tfullscreen: handleFullscreen,\r\n\t\tgetVideo: () => $v.current,\r\n\t}));\r\n\r\n\tuseEffect(() => {\r\n\t\tconst v = $v.current;\r\n\t\tif (!v) return;\r\n\r\n\t\tv.addEventListener(\"timeupdate\", timeUpdateListener);\r\n\t\tv.addEventListener(\"play\", playChangeListener);\r\n\t\tv.addEventListener(\"pause\", playChangeListener);\r\n\t\tv.addEventListener(\"volumechange\", volumeChangeListener);\r\n\t\tdocument.addEventListener(\"fullscreenchange\", fsChangeListener);\r\n\r\n\t\treturn () => {\r\n\t\t\tv.removeEventListener(\"timeupdate\", timeUpdateListener);\r\n\t\t\tv.removeEventListener(\"play\", playChangeListener);\r\n\t\t\tv.removeEventListener(\"pause\", playChangeListener);\r\n\t\t\tv.removeEventListener(\"volumechange\", volumeChangeListener);\r\n\t\t\tdocument.removeEventListener(\"fullscreenchange\", fsChangeListener);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-video\", className)}\r\n\t\t\tstyle={{ height, width, ...style }}\r\n\t\t\tonClick={handlePlay}\r\n\t\t\tonDoubleClick={() => handleFullscreen()}\r\n\t\t>\r\n\t\t\t<video\r\n\t\t\t\tref={$v}\r\n\t\t\t\tonCanPlay={handleReady}\r\n\t\t\t\t{...restProps}\r\n\t\t\t\tcontrols={useOriginControls}\r\n\t\t\t/>\r\n\r\n\t\t\t{!hideControls && !useOriginControls && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='i-video-controls'\r\n\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className='i-video-control flex-1'>\r\n\t\t\t\t\t\t<Button.Toggle\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tafter={<Icon icon={<PauseRound />} />}\r\n\t\t\t\t\t\t\tactive={state.playing}\r\n\t\t\t\t\t\t\tonClick={handlePlay}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<PlayArrowRound />} />\r\n\t\t\t\t\t\t</Button.Toggle>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tonClick={handleStop}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<StopRound />} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<span className='i-video-times'>\r\n\t\t\t\t\t\t\t<Text.Time seconds={state.current} /> /\r\n\t\t\t\t\t\t\t<Text.Time seconds={state.duration} />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<Progress\r\n\t\t\t\t\t\t\tclassName='mr-8'\r\n\t\t\t\t\t\t\t{...timeProgressProps}\r\n\t\t\t\t\t\t\tvalue={(state.current / state.duration) * 100}\r\n\t\t\t\t\t\t\tonChange={handleUpdateTime}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='i-video-control'>\r\n\t\t\t\t\t\t<Button.Toggle\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tafter={<Icon icon={<FullscreenExitRound />} />}\r\n\t\t\t\t\t\t\tactive={state.isFullscreen}\r\n\t\t\t\t\t\t\tonClick={() => handleFullscreen()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<FullscreenRound />} />\r\n\t\t\t\t\t\t</Button.Toggle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='i-video-control'>\r\n\t\t\t\t\t\t<Button.Toggle\r\n\t\t\t\t\t\t\tclassName='i-video-btn'\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tactive={state.volume <= 0}\r\n\t\t\t\t\t\t\tafter={\r\n\t\t\t\t\t\t\t\t<Icon icon={<VolumeOffRound />} size='1.2em' />\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={handleMuted}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<VolumeDownRound />} />\r\n\t\t\t\t\t\t</Button.Toggle>\r\n\t\t\t\t\t\t<Progress\r\n\t\t\t\t\t\t\tstyle={{ width: 100 }}\r\n\t\t\t\t\t\t\tclassName='mr-8'\r\n\t\t\t\t\t\t\t{...volumeProgressProps}\r\n\t\t\t\t\t\t\tvalue={state.volume}\r\n\t\t\t\t\t\t\tonChange={handleUpdateVolume}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Video;\r\n","import Icon from \"@p/components/icon\";\r\nimport Video from \"@p/components/video\";\r\nimport { FeedOutlined } from \"@ricons/material\";\r\nimport { TFileType, TPreviewItem } from \"./type\";\r\n\r\nexport default function renderFile(props: TPreviewItem) {\r\n\tconst { name, suffix, type } = props;\r\n\r\n\tswitch (type) {\r\n\t\tcase TFileType.IMAGE:\r\n\t\t\treturn <img src={props.src} />;\r\n\t\tcase TFileType.VIDEO:\r\n\t\t\treturn <Video {...props} />;\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<div className='i-preview-unknown'>\r\n\t\t\t\t\t<Icon icon={<FeedOutlined />} size='3em' />\r\n\t\t\t\t\t<h5 className='mt-4'>{name || suffix || \"?\"}</h5>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n","import Button from \"@p/components/button\";\r\nimport Icon from \"@p/components/icon\";\r\nimport {\r\n\tAspectRatioRound,\r\n\tCloseRound,\r\n\tFileDownloadOutlined,\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n\tOpenInNewRound,\r\n\tRotateLeftRound,\r\n\tRotateRightRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport { throttle } from \"radash\";\r\nimport { useMemo, useRef } from \"react\";\r\nimport { getFileType, getSuffixByUrl } from \"../utils\";\r\nimport DefaultRenderFile from \"./renderFile\";\r\nimport { IPreview, TFileType, TPreviewItem } from \"./type\";\r\n\r\nexport default function Content(props: IPreview) {\r\n\tconst {\r\n\t\titems = [],\r\n\t\tinitial = 0,\r\n\t\trenderFile = DefaultRenderFile,\r\n\t\tonRotate,\r\n\t\tonChange,\r\n\t\tonClose,\r\n\t\tonZoom,\r\n\t} = props;\r\n\tconst state = useReactive({\r\n\t\tcurrent: initial,\r\n\t\trotate: 0,\r\n\t\tscale: 1,\r\n\t\ttranslate: `0, 0`,\r\n\t});\r\n\tconst box = useRef<HTMLDivElement>(null);\r\n\r\n\tconst files = useMemo(() => {\r\n\t\treturn items.map((item) => {\r\n\t\t\tconst o: TPreviewItem = {\r\n\t\t\t\tsrc: \"\",\r\n\t\t\t};\r\n\t\t\tif (typeof item === \"string\") {\r\n\t\t\t\to.src = item;\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(o, item);\r\n\t\t\t}\r\n\r\n\t\t\to.suffix = getSuffixByUrl(o.src) || \"\";\r\n\t\t\to.type = getFileType(o.suffix, item[\"type\"]);\r\n\r\n\t\t\treturn o;\r\n\t\t});\r\n\t}, [items]);\r\n\r\n\tconst { file, content } = useMemo(() => {\r\n\t\tconst file = files[state.current];\r\n\t\tconst content = renderFile(file);\r\n\r\n\t\treturn {\r\n\t\t\tfile,\r\n\t\t\tcontent,\r\n\t\t};\r\n\t}, [state.current, items]);\r\n\r\n\tconst isImage = file.type === TFileType.IMAGE;\r\n\r\n\tconst handleSwitch = (next: number) => {\r\n\t\tconst l = files.length;\r\n\t\tconst { current: before } = state;\r\n\t\tif (next >= l) {\r\n\t\t\tstate.current = 0;\r\n\t\t} else if (next < 0) {\r\n\t\t\tstate.current = l - 1;\r\n\t\t} else {\r\n\t\t\tstate.current = next;\r\n\t\t}\r\n\t\tonChange?.(state.current, before);\r\n\r\n\t\tstate.rotate = files[state.current].rotate || 0;\r\n\r\n\t\tif (state.scale !== 1) {\r\n\t\t\tstate.scale = 1;\r\n\t\t\tonZoom?.(1);\r\n\t\t}\r\n\t\tonRotate?.(state.rotate);\r\n\t};\r\n\r\n\tconst handleRotate = (deg: number) => {\r\n\t\tstate.rotate += deg;\r\n\r\n\t\tonRotate?.(state.rotate);\r\n\t};\r\n\r\n\tconst handleMouseWheel = throttle({ interval: 60 }, (e) => {\r\n\t\tif (!isImage) return;\r\n\t\tlet after = state.scale + (e.deltaY < 0 ? 0.05 : -0.05);\r\n\t\tif (after > 2) after = 2;\r\n\t\tif (after < 0.25) after = 0.25;\r\n\r\n\t\tonZoom?.(after);\r\n\t\tstate.scale = after;\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tref={box}\r\n\t\t\t\tclassName='i-preview-content'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\ttransform: `rotate(${state.rotate}deg) scale(${state.scale})`,\r\n\t\t\t\t}}\r\n\t\t\t\tonWheel={handleMouseWheel}\r\n\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='i-preview-controls'>\r\n\t\t\t\t<Button square flat onClick={onClose}>\r\n\t\t\t\t\t<Icon icon={<CloseRound />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t{files.length > 1 && (\r\n\t\t\t\t\t<span className='px-8'>\r\n\t\t\t\t\t\t{state.current + 1} / {files.length}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{state.scale !== 1 && (\r\n\t\t\t\t\t<Button flat onClick={() => (state.scale = 1)}>\r\n\t\t\t\t\t\t<Icon icon={<AspectRatioRound />} />\r\n\t\t\t\t\t\t<span className='mt-4'>\r\n\t\t\t\t\t\t\t{(state.scale * 100).toFixed(0)}%\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t<Button square flat href={file.src} target='_blank'>\r\n\t\t\t\t\t<Icon icon={<OpenInNewRound />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button square flat href={file.src} download target='_blank'>\r\n\t\t\t\t\t<Icon icon={<FileDownloadOutlined />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button square flat onClick={() => handleRotate(90)}>\r\n\t\t\t\t\t<Icon icon={<RotateRightRound />} />\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button square flat onClick={() => handleRotate(-90)}>\r\n\t\t\t\t\t<Icon icon={<RotateLeftRound />} />\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t\t{files.length > 1 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tonClick={() => handleSwitch(state.current - 1)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<KeyboardArrowLeftRound />} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\tflat\r\n\t\t\t\t\t\t\tonClick={() => handleSwitch(state.current + 1)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon icon={<KeyboardArrowRightRound />} />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n","import HookModal from \"@p/components/modal/hookModal\";\r\nimport { RefHookModal } from \"@p/components/modal/type\";\r\nimport { useRef } from \"react\";\r\nimport { renderNode } from \"../utils\";\r\nimport Content from \"./content\";\r\nimport \"./index.css\";\r\nimport { IPreview } from \"./type\";\r\n\r\nexport default function usePreview() {\r\n\tconst ref = useRef<RefHookModal>(null);\r\n\r\n\tconst preview = (config: IPreview) => {\r\n\t\tconst { items, modalProps, onClose, ...restProps } = config;\r\n\r\n\t\tconst handleClose = () => {\r\n\t\t\tonClose?.();\r\n\t\t\tunMount?.();\r\n\t\t};\r\n\r\n\t\tconst unMount = renderNode(\r\n\t\t\t<HookModal\r\n\t\t\t\tref={ref}\r\n\t\t\t\tvisible\r\n\t\t\t\tclassName='i-preview'\r\n\t\t\t\tcustomized\r\n\t\t\t\tshadow={false}\r\n\t\t\t\t{...modalProps}\r\n\t\t\t\tchildren={\r\n\t\t\t\t\t<Content\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t\titems={items}\r\n\t\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\t\tref.current?.update({ visible: false });\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tfixed\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\treturn preview;\r\n}\r\n","import { useIntersectionObserver } from \"@p/js/hooks\";\r\nimport usePreview from \"@p/js/usePreview\";\r\nimport { TFileType } from \"@p/js/usePreview/type\";\r\nimport { HideImageTwotone } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport Loading from \"../loading\";\r\nimport \"./index.css\";\r\nimport { CompositionImage, IImage } from \"./type\";\r\n\r\nconst Image = (props: IImage) => {\r\n\tconst {\r\n\t\tsrc,\r\n\t\tround,\r\n\t\tsize,\r\n\t\tinitSize,\r\n\t\tlazyload,\r\n\t\tfallback = (\r\n\t\t\t<Icon icon={<HideImageTwotone />} size='2em' className='color-5' />\r\n\t\t),\r\n\t\tfit,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tusePreview: previewable,\r\n\t\tonLoad,\r\n\t\tonError,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive<{ status?: string }>({\r\n\t\tstatus: \"loading\",\r\n\t});\r\n\tconst ref = useRef<HTMLImageElement>(null);\r\n\tconst wh = fit ? \"100%\" : undefined;\r\n\r\n\tconst { observe, unobserve } = useIntersectionObserver();\r\n\tconst preview = usePreview();\r\n\r\n\tconst handleError = (err) => {\r\n\t\tonError?.(err);\r\n\t\tstate.status = \"error\";\r\n\t};\r\n\r\n\tconst handleLoad = (e) => {\r\n\t\tonLoad?.(e);\r\n\t\tstate.status = undefined;\r\n\t};\r\n\r\n\tconst handleClick = (e) => {\r\n\t\tonClick?.(e);\r\n\r\n\t\tpreviewable &&\r\n\t\t\tsrc &&\r\n\t\t\tpreview({\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsrc,\r\n\t\t\t\t\t\ttype: TFileType.IMAGE,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!src) return;\r\n\r\n\t\tstate.status = \"loading\";\r\n\r\n\t\tif (!lazyload || !ref.current) return;\r\n\r\n\t\tobserve(ref.current, (tar: HTMLElement, visible: boolean) => {\r\n\t\t\tif (!visible) return;\r\n\r\n\t\t\ttar.setAttribute(\"src\", tar.dataset.src || \"\");\r\n\t\t\tunobserve(tar);\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tref.current && unobserve(ref.current);\r\n\t\t};\r\n\t}, [src]);\r\n\r\n\trestProps[lazyload ? \"data-src\" : \"src\"] = src;\r\n\tconst iSize = state.status === \"loading\" ? initSize : undefined;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\twidth: size ?? iSize,\r\n\t\t\t\theight: size ?? iSize,\r\n\t\t\t\t...style,\r\n\t\t\t}}\r\n\t\t\tclassName={classNames(\"i-image\", className, {\r\n\t\t\t\trounded: round,\r\n\t\t\t\t[`i-image-${state.status}`]: state.status,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{state.status === \"error\" ? (\r\n\t\t\t\tfallback\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{src && (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\t\tstyle={{ objectFit: fit, width: wh, height: wh }}\r\n\t\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t\t\tonLoad={handleLoad}\r\n\t\t\t\t\t\t\tonError={handleError}\r\n\t\t\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{src && state.status === \"loading\" && <Loading />}\r\n\r\n\t\t\t\t\t{children && <div className='i-image-text'>{children}</div>}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Image as CompositionImage;\r\n","import Image from \"./image\";\r\nimport List from \"./list\";\r\n\r\nImage.List = List;\r\n\r\nexport default Image;\r\n","import usePreview from \"@p/js/usePreview\";\r\nimport { TPreviewItem } from \"@p/js/usePreview/type\";\r\nimport { getFileType, getSuffixByUrl } from \"@p/js/utils\";\r\nimport { useMemo } from \"react\";\r\nimport Flex from \"../flex\";\r\nimport Image from \"./image\";\r\nimport { IImageList } from \"./type\";\r\n\r\nexport default function List(props: IImageList) {\r\n\tconst {\r\n\t\titems = [],\r\n\t\tgap = 8,\r\n\t\tcolumns,\r\n\t\twrap,\r\n\t\tdirection,\r\n\t\tusePreview: previewable,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst preview = usePreview();\r\n\r\n\tconst files = useMemo(() => {\r\n\t\treturn items.map((item) => {\r\n\t\t\tconst o: TPreviewItem = {\r\n\t\t\t\tsrc: \"\",\r\n\t\t\t};\r\n\t\t\tif (typeof item === \"string\") {\r\n\t\t\t\to.src = item;\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(o, item);\r\n\t\t\t}\r\n\r\n\t\t\to.suffix = getSuffixByUrl(o.src) || \"\";\r\n\t\t\to.type = getFileType(o.suffix, item[\"type\"]);\r\n\r\n\t\t\treturn o;\r\n\t\t});\r\n\t}, [items]);\r\n\r\n\tconst handleClick = (e, i) => {\r\n\t\tonClick?.(e);\r\n\r\n\t\tpreviewable &&\r\n\t\t\tpreview({\r\n\t\t\t\titems: files,\r\n\t\t\t\tinitial: i,\r\n\t\t\t});\r\n\t};\r\n\r\n\tif (!files.length) return \"\";\r\n\r\n\treturn (\r\n\t\t<Flex\r\n\t\t\tclassName='i-image-list'\r\n\t\t\tgap={gap}\r\n\t\t\tcolumns={columns}\r\n\t\t\twrap={wrap}\r\n\t\t\tdirection={direction}\r\n\t\t>\r\n\t\t\t{files.map((img, i) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tsrc={img.src}\r\n\t\t\t\t\t\tsize={60}\r\n\t\t\t\t\t\tusePreview={false}\r\n\t\t\t\t\t\tonClick={(e) => handleClick(e, i)}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Flex>\r\n\t);\r\n}\r\n","import { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { uid } from \"radash\";\r\nimport {\r\n\tReactNode,\r\n\tforwardRef,\r\n\tisValidElement,\r\n\tuseEffect,\r\n\tuseRef,\r\n} from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport \"./index.css\";\r\nimport type { IMessage, IMessageItem, THeights, TMessageQueue } from \"./type\";\r\n\r\nconst AlignMap = {\r\n\tleft: \"flex-start\",\r\n\tcenter: \"center\",\r\n\tright: \"flex-end\",\r\n};\r\n\r\nconst GlobalConfig = {\r\n\talign: \"center\",\r\n\toffset: \"12px\",\r\n\tgap: 12,\r\n\tmax: 0,\r\n};\r\n\r\nconst ItemDefaultConfig = {\r\n\tduration: 3000,\r\n\tclosable: true,\r\n\tactive: false,\r\n};\r\n\r\nconst container = createContainer();\r\nconst handler = {\r\n\tcallout(item: IMessage) {},\r\n\tclose() {},\r\n};\r\n\r\nconst queue: TMessageQueue = {\r\n\tleft: [],\r\n\tcenter: [],\r\n\tright: [],\r\n};\r\nconst heights: THeights = {\r\n\tleft: [],\r\n\tcenter: [],\r\n\tright: [],\r\n};\r\n\r\ncreateRoot(container).render(<Messages />);\r\n\r\nconst MessageItem = forwardRef<HTMLDivElement, IMessageItem>(function (\r\n\t{ active, content, top, className, style, onClick },\r\n\tref\r\n) {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classNames(\"i-message\", className, {\r\n\t\t\t\t\"i-message-active\": active,\r\n\t\t\t})}\r\n\t\t\tstyle={{\r\n\t\t\t\t...style,\r\n\t\t\t\ttop,\r\n\t\t\t}}\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t{content}\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nfunction Messages() {\r\n\tconst ref = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive<{\r\n\t\ttops: THeights;\r\n\t\titems: TMessageQueue;\r\n\t}>({\r\n\t\titems: {\r\n\t\t\tleft: [],\r\n\t\t\tcenter: [],\r\n\t\t\tright: [],\r\n\t\t},\r\n\t\ttops: {\r\n\t\t\tleft: [],\r\n\t\t\tcenter: [],\r\n\t\t\tright: [],\r\n\t\t},\r\n\t});\r\n\tconst offsetTop = {\r\n\t\tleft: 0,\r\n\t\tcenter: 0,\r\n\t\tright: 0,\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tObject.assign(handler, {\r\n\t\t\tcallout: function (item: IMessage) {\r\n\t\t\t\tconst { align = \"center\", unshift, onShow } = item;\r\n\t\t\t\tconst size = queue[align][unshift ? \"unshift\" : \"push\"](item);\r\n\t\t\t\tstate.items[align] = [...queue[align]];\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst h = ref.current?.offsetHeight || 0;\r\n\r\n\t\t\t\t\tqueue[align][unshift ? 0 : size - 1].active = true;\r\n\t\t\t\t\tstate.items[align] = [...queue[align]];\r\n\t\t\t\t\theights[align][unshift ? \"unshift\" : \"push\"](h);\r\n\t\t\t\t\tstate.tops[align] = [...heights[align]];\r\n\t\t\t\t\tonShow?.();\r\n\t\t\t\t}, 0);\r\n\r\n\t\t\t\titem.duration !== 0 &&\r\n\t\t\t\t\tsetTimeout(this.close.bind(item), item.duration);\r\n\t\t\t},\r\n\t\t\tclose: function () {\r\n\t\t\t\tconst item = this as IMessage;\r\n\t\t\t\tconst { align = \"center\", onHide } = item;\r\n\t\t\t\tconst index = queue[align].findIndex((i) => i.id === item.id);\r\n\t\t\t\tif (index < 0) return;\r\n\r\n\t\t\t\tqueue[align][index].active = false;\r\n\t\t\t\tstate.items[align] = [...queue[align]];\r\n\r\n\t\t\t\titem.timer = setTimeout(() => {\r\n\t\t\t\t\tconst index = queue[align].findIndex(\r\n\t\t\t\t\t\t(i) => i.id === item.id\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tqueue[align].splice(index, 1);\r\n\t\t\t\t\theights[align].splice(index, 1);\r\n\t\t\t\t\tstate.tops[align] = [...heights[align]];\r\n\t\t\t\t\tstate.items[align] = [...queue[align]];\r\n\t\t\t\t\titem.timer && clearTimeout(item.timer);\r\n\t\t\t\t\tonHide?.();\r\n\t\t\t\t}, 240);\r\n\t\t\t},\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst renderItems = (item, i) => {\r\n\t\tif (!item) return <></>;\r\n\r\n\t\tconst { id, active, content, align = \"center\", className } = item;\r\n\t\toffsetTop[align] += state.tops[align][i - 1] || 0;\r\n\t\tconst top = GlobalConfig.gap * i + offsetTop[align];\r\n\r\n\t\treturn (\r\n\t\t\t<MessageItem\r\n\t\t\t\tkey={id}\r\n\t\t\t\tref={ref}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tcontent={content}\r\n\t\t\t\ttop={top}\r\n\t\t\t\tclassName={className}\r\n\t\t\t\tstyle={{ alignSelf: AlignMap[align] }}\r\n\t\t\t\tonClick={handler.close.bind(item)}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='i-messages'>\r\n\t\t\t{state.items.left.map(renderItems)}\r\n\t\t\t{state.items.center.map(renderItems)}\r\n\t\t\t{state.items.right.map(renderItems)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function setMessageConfig(config: IMessage) {\r\n\tObject.assign(GlobalConfig, config);\r\n}\r\n\r\nexport default function message(config: IMessage | ReactNode) {\r\n\tif (\r\n\t\t[\"string\", \"number\"].includes(typeof config) ||\r\n\t\tisValidElement(config)\r\n\t) {\r\n\t\tconfig = { content: config as ReactNode };\r\n\t}\r\n\r\n\tconfig = Object.assign(\r\n\t\t{ id: uid(7) },\r\n\t\tItemDefaultConfig,\r\n\t\tconfig as IMessage\r\n\t);\r\n\r\n\thandler.callout(config as IMessage);\r\n\r\n\treturn handler.close.bind(config);\r\n}\r\n\r\nfunction createContainer(direction?: string) {\r\n\tconst container = document.createElement(\"div\");\r\n\tcontainer.dataset.id = \"messages\";\r\n\tdocument.body.append(container);\r\n\r\n\treturn container;\r\n}\r\n","import Modal from \"./modal\";\r\nimport useModal from \"./useModal\";\r\n\r\nModal.useModal = useModal;\r\n\r\nexport default Modal;\r\n","import { renderNode } from \"@p/js/utils\";\r\nimport { useRef } from \"react\";\r\nimport HookModal from \"./hookModal\";\r\nimport { IModal, RefHookModal } from \"./type\";\r\n\r\nexport default function useModal() {\r\n\tconst ref = useRef<RefHookModal>(null);\r\n\r\n\tconst handleOpen = (props: IModal) => {\r\n\t\tconst unMount = renderNode(\r\n\t\t\t<HookModal\r\n\t\t\t\tref={ref}\r\n\t\t\t\tvisible\r\n\t\t\t\t{...props}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tprops.onClose?.();\r\n\t\t\t\t\tunMount?.();\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleUpdate = (props: IModal) => {\r\n\t\tif (!ref.current) return;\r\n\r\n\t\tconst { update } = ref.current;\r\n\t\tupdate(props);\r\n\t};\r\n\r\n\treturn {\r\n\t\topen: handleOpen,\r\n\t\tupdate: handleUpdate,\r\n\t};\r\n}\r\n","import classNames from \"classnames\";\r\nimport { useState } from \"react\";\r\nimport Loading from \"../loading\";\r\nimport { IPageItem } from \"./type\";\r\n\r\nconst Page = (props: IPageItem) => {\r\n\tconst { page, active, children, onChange } = props;\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst handleClick = async () => {\r\n\t\tif (active || loading) return;\r\n\r\n\t\tsetLoading(true);\r\n\t\tawait onChange?.(page);\r\n\t\tsetLoading(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\tclassName={classNames(\"i-page\", {\r\n\t\t\t\t\"i-page-active\": active,\r\n\t\t\t\t\"i-page-loading\": loading,\r\n\t\t\t\t\"i-page-disabled\": false,\r\n\t\t\t})}\r\n\t\t\tdata-page={page}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t{loading && <Loading />}\r\n\t\t\t{children}\r\n\t\t</a>\r\n\t);\r\n};\r\n\r\nexport default Page;\r\n","import {\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n\tMoreHorizRound,\r\n} from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Icon from \"../icon\";\r\nimport \"./index.css\";\r\nimport Page from \"./page\";\r\nimport { IPagination } from \"./type\";\r\n\r\nconst Pagination = (props: IPagination): JSX.Element => {\r\n\tconst {\r\n\t\tpage: defaultPage = 1,\r\n\t\tsize = 10,\r\n\t\ttotal = 0,\r\n\t\tsibling = 2,\r\n\t\tprev = <Icon icon={<KeyboardArrowLeftRound />} />,\r\n\t\tnext = <Icon icon={<KeyboardArrowRightRound />} />,\r\n\t\tsimple,\r\n\t\tjumper,\r\n\t\tclassName,\r\n\t\trenderEllipsis = () => (\r\n\t\t\t<Icon icon={<MoreHorizRound />} className='color-7' />\r\n\t\t),\r\n\t\trenderPage = (i) => i,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst [page, setPage] = useState(defaultPage);\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst totalPage = useMemo(() => Math.ceil(total / size), [size, total]);\r\n\r\n\tconst [start, end, loop] = useMemo(() => {\r\n\t\tconst start = Math.max(1, page - sibling);\r\n\t\tconst end = Math.min(totalPage, page + sibling);\r\n\r\n\t\treturn [\r\n\t\t\tstart,\r\n\t\t\tend,\r\n\t\t\tArray.from({ length: end - start + 1 }).map((n, i) => start + i),\r\n\t\t];\r\n\t}, [page, totalPage, sibling]);\r\n\r\n\tif (totalPage <= page && page === 1) return <></>;\r\n\r\n\tconst handlePageChange = async (p?: number) => {\r\n\t\tif (!onChange || loading) return;\r\n\t\tsetLoading(true);\r\n\r\n\t\treturn new Promise<void>(async (resolve) => {\r\n\t\t\tif (p === undefined) return;\r\n\t\t\tawait onChange(p);\r\n\t\t\tsetPage(p);\r\n\t\t\tsetLoading(false);\r\n\t\t\tresolve();\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => setPage(defaultPage), [defaultPage]);\r\n\r\n\treturn (\r\n\t\t<div className={classNames(\"i-pagination\", className)} {...restProps}>\r\n\t\t\t{prev && (\r\n\t\t\t\t<Page page={page - 1 || 1} onChange={handlePageChange}>\r\n\t\t\t\t\t{prev}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\r\n\t\t\t{start > 1 && (\r\n\t\t\t\t<Page page={1} onChange={handlePageChange}>\r\n\t\t\t\t\t{renderPage(1)}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\r\n\t\t\t{start > 2 && renderEllipsis()}\r\n\r\n\t\t\t{loop.map((p) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Page\r\n\t\t\t\t\t\tkey={p}\r\n\t\t\t\t\t\tpage={p}\r\n\t\t\t\t\t\tactive={p === page}\r\n\t\t\t\t\t\tonChange={handlePageChange}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{renderPage(p)}\r\n\t\t\t\t\t</Page>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\r\n\t\t\t{end < totalPage - 1 && renderEllipsis()}\r\n\r\n\t\t\t{end < totalPage && (\r\n\t\t\t\t<Page page={totalPage} onChange={handlePageChange}>\r\n\t\t\t\t\t{renderPage(totalPage)}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\r\n\t\t\t{next && (\r\n\t\t\t\t<Page page={page + 1} onChange={handlePageChange}>\r\n\t\t\t\t\t{next}\r\n\t\t\t\t</Page>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Pagination;\r\n","import { InfoOutlined } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport { MouseEvent } from \"react\";\r\nimport Button from \"../button\";\r\nimport { IButton } from \"../button/type\";\r\nimport Flex from \"../flex\";\r\nimport Icon from \"../icon\";\r\nimport Popup from \"../popup\";\r\nimport \"./index.css\";\r\nimport { IPopconfirm } from \"./type\";\r\n\r\nconst defaultOk = {\r\n\tchildren: \"确定\",\r\n};\r\n\r\nconst defaultCancel = {\r\n\tchildren: \"取消\",\r\n\tsecondary: true,\r\n};\r\n\r\nconst Popconfirm = (props: IPopconfirm): JSX.Element => {\r\n\tconst {\r\n\t\ttrigger = \"click\",\r\n\t\tvisible,\r\n\t\ticon = <Icon icon={<InfoOutlined />} className='error' />,\r\n\t\tcontent,\r\n\t\tokButtonProps,\r\n\t\tcancelButtonProps,\r\n\t\tchildren,\r\n\t\talign = \"end\",\r\n\t\tposition = \"top\",\r\n\t\toffset = 12,\r\n\t\textra,\r\n\t\tonOk,\r\n\t\tonClose,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tloading: false,\r\n\t\tvisible,\r\n\t});\r\n\r\n\tconst ok: IButton = okButtonProps\r\n\t\t? Object.assign({}, defaultOk, okButtonProps)\r\n\t\t: defaultOk;\r\n\tconst cancel: IButton = cancelButtonProps\r\n\t\t? Object.assign({}, defaultCancel, cancelButtonProps)\r\n\t\t: defaultCancel;\r\n\r\n\tconst handleVisibleChange = (v: boolean) => {\r\n\t\tstate.visible = v;\r\n\t\trestProps.onVisibleChange?.(v);\r\n\t};\r\n\r\n\tconst handleOk = async (e: MouseEvent<HTMLElement>) => {\r\n\t\tstate.loading = true;\r\n\t\tok.onClick?.(e);\r\n\t\tawait onOk?.();\r\n\t\tstate.loading = false;\r\n\t\tstate.visible = false;\r\n\t};\r\n\r\n\tconst handleCancel = async (e: MouseEvent<HTMLElement>) => {\r\n\t\tcancel.onClick?.(e);\r\n\t\tawait onClose?.();\r\n\t\tstate.visible = false;\r\n\t};\r\n\r\n\tconst popconfirmContent = (\r\n\t\t<div className='i-popconfirm'>\r\n\t\t\t<Flex gap={12}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<div className='i-popconfirm-content'>{content}</div>\r\n\t\t\t</Flex>\r\n\r\n\t\t\t<Flex\r\n\t\t\t\tgap={12}\r\n\t\t\t\tjustify='flex-end'\r\n\t\t\t\tclassName='mt-8 i-popconfirm-footer'\r\n\t\t\t>\r\n\t\t\t\t{cancelButtonProps !== null && (\r\n\t\t\t\t\t<Button {...cancel} onClick={handleCancel} />\r\n\t\t\t\t)}\r\n\t\t\t\t{extra}\r\n\t\t\t\t{okButtonProps !== null && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tloading={state.loading}\r\n\t\t\t\t\t\t{...ok}\r\n\t\t\t\t\t\tonClick={handleOk}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Flex>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\tcontent={popconfirmContent}\r\n\t\t\t{...restProps}\r\n\t\t\ttrigger={trigger}\r\n\t\t\tvisible={state.visible}\r\n\t\t\talign={align}\r\n\t\t\toffset={offset}\r\n\t\t\tposition={position}\r\n\t\t\tonVisibleChange={handleVisibleChange}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Popup>\r\n\t);\r\n};\r\n\r\nexport default Popconfirm;\r\n","import classNames from \"classnames\";\r\nimport { ChangeEvent } from \"react\";\r\nimport { IRadioItem } from \"./type\";\r\n\r\nexport default function RadioItem(props: IRadioItem) {\r\n\tconst {\r\n\t\ttype = \"default\",\r\n\t\tname,\r\n\t\tvalue,\r\n\t\tchecked,\r\n\t\tdisabled,\r\n\t\tchildren,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\tconst handleChange = (e: ChangeEvent) => {\r\n\t\tonChange?.(value, e);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<label className={classNames(\"i-radio-item\", { disabled })}>\r\n\t\t\t<input\r\n\t\t\t\ttype='radio'\r\n\t\t\t\tname={name}\r\n\t\t\t\tchecked={checked}\r\n\t\t\t\tclassName={classNames(\"i-radio-input\", `i-radio-${type}`)}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<span className='i-radio-text'>{children}</span>\r\n\t\t</label>\r\n\t);\r\n}\r\n","import { formatOption } from \"@p/js/utils\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport \"../../css/input.css\";\r\nimport \"./index.css\";\r\nimport RadioItem from \"./item\";\r\nimport { IRadio } from \"./type\";\r\n\r\nfunction Radio(props: IRadio) {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tname,\r\n\t\toptions,\r\n\t\tvalue,\r\n\t\ttype = \"default\",\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\toptionInline = true,\r\n\t\tlabelInline,\r\n\t\tdisabled,\r\n\t\trequired,\r\n\t\tclassName,\r\n\t\tonChange,\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tvalue,\r\n\t});\r\n\r\n\tconst formattedOptions = useMemo(() => formatOption(options), [options]);\r\n\r\n\tconst handleChange = useMemoizedFn((value, e) => {\r\n\t\tstate.value = value;\r\n\t\tonChange?.(value, e);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-radio i-input-label\",\r\n\t\t\t\t{\r\n\t\t\t\t\t[`i-radio-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t{label && (\r\n\t\t\t\t<span className='i-input-label-text'>\r\n\t\t\t\t\t{required && <span className='error'>*</span>}\r\n\t\t\t\t\t{label}\r\n\r\n\t\t\t\t\t{message && <p className='i-radio-message'>{message}</p>}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-radio-options\", {\r\n\t\t\t\t\t\"i-options-block\": !optionInline,\r\n\t\t\t\t\t\"i-radio-options-button\": type === \"button\",\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{formattedOptions.map((option) => (\r\n\t\t\t\t\t<RadioItem\r\n\t\t\t\t\t\tkey={option.value as string}\r\n\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\tvalue={option.value}\r\n\t\t\t\t\t\tchecked={state.value === option.value}\r\n\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\tdisabled={disabled || option.disabled}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t</RadioItem>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nRadio.Item = RadioItem;\r\n\r\nexport default Radio;\r\n","import classNames from \"classnames\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { ITag } from \"./type\";\r\n\r\nconst Tag = (props: ITag): JSX.Element => {\r\n\tconst {\r\n\t\tdot,\r\n\t\tdotClass,\r\n\t\toutline,\r\n\t\tround,\r\n\t\tsize = \"normal\",\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonClose,\r\n\t\tonClick,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<span\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-tag\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-tag-outline\": outline,\r\n\t\t\t\t\t\"i-tag-clickable\": onClick,\r\n\t\t\t\t\t[`i-tag-${size}`]: size !== \"normal\",\r\n\t\t\t\t\tround,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tonClick={onClick}\r\n\t\t\t{...restProps}\r\n\t\t>\r\n\t\t\t{dot && <span className={classNames(\"i-tag-dot\", dotClass)}></span>}\r\n\r\n\t\t\t{children}\r\n\r\n\t\t\t{onClose && (\r\n\t\t\t\t<Helpericon active className='i-tag-close' onClick={onClose} />\r\n\t\t\t)}\r\n\t\t</span>\r\n\t);\r\n};\r\n\r\nexport default Tag;\r\n","import { TOption } from \"@p/type\";\r\nimport { CheckRound, SearchRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport Icon from \"../icon\";\r\nimport List from \"../list\";\r\nimport Tag from \"../tag\";\r\nimport Empty from \"../utils/empty\";\r\nimport { ISelectOptions } from \"./type\";\r\n\r\nexport const Options = (props: ISelectOptions) => {\r\n\tconst {\r\n\t\tvalue: val,\r\n\t\toptions,\r\n\t\tfilter,\r\n\t\tfilterPlaceholder,\r\n\t\tmultiple,\r\n\t\tempty = <Empty />,\r\n\t\tonSelect,\r\n\t\tonFilter,\r\n\t} = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-select-options\", {\r\n\t\t\t\t\"i-select-options-multiple\": multiple,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{filter && multiple && (\r\n\t\t\t\t<div className='i-select-filter'>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<SearchRound />}\r\n\t\t\t\t\t\tclassName='color-8 ml-8 my-auto'\r\n\t\t\t\t\t\tsize='1.2em'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tclassName='i-input'\r\n\t\t\t\t\t\tplaceholder={filterPlaceholder}\r\n\t\t\t\t\t\tonChange={onFilter}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{options.length === 0 && empty}\r\n\r\n\t\t\t{options.map((option, i) => {\r\n\t\t\t\tconst { label, value, disabled } = option;\r\n\t\t\t\tconst isActive = multiple\r\n\t\t\t\t\t? val?.includes(value)\r\n\t\t\t\t\t: val === value;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\tkey={(value as string) || i}\r\n\t\t\t\t\t\tactive={isActive}\r\n\t\t\t\t\t\ttype='option'\r\n\t\t\t\t\t\tonClick={() => onSelect?.(value, option)}\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{multiple && (\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon={<CheckRound />}\r\n\t\t\t\t\t\t\t\tclassName='i-select-option-check'\r\n\t\t\t\t\t\t\t\tsize='1em'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{label}\r\n\t\t\t\t\t</List.Item>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport const activeOptions = (\r\n\toptions: TOption[] = [],\r\n\tvalue: any[] = [],\r\n\tmax = 3\r\n) => {\r\n\tconst total = options.flatMap((opt) =>\r\n\t\tvalue.includes(opt.value) ? [opt] : []\r\n\t);\r\n\r\n\tif (max >= total.length) return total;\r\n\r\n\tconst rest = total.length - max;\r\n\tconst after = total.slice(0, max);\r\n\tafter.push(rest as any);\r\n\r\n\treturn after;\r\n};\r\n\r\nexport const displayValue = (config) => {\r\n\tconst { options, value, maxDisplay, multiple, onSelect } = config;\r\n\r\n\tif (multiple) {\r\n\t\treturn activeOptions(options, value, maxDisplay).map((opt, i) => {\r\n\t\t\tif (typeof opt === \"number\") return <Tag key={i}>+{opt}</Tag>;\r\n\r\n\t\t\tconst { label, value } = opt;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Tag\r\n\t\t\t\t\tkey={value as string}\r\n\t\t\t\t\tonClose={(e) => {\r\n\t\t\t\t\t\te?.stopPropagation();\r\n\t\t\t\t\t\tonSelect?.(value, opt);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label}\r\n\t\t\t\t</Tag>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\treturn options.find((opt: TOption) => opt.value === value)?.label;\r\n};\r\n","import { formatOption } from \"@p/js/utils\";\r\nimport { TOption } from \"@p/type\";\r\nimport { UnfoldMoreRound } from \"@ricons/material\";\r\nimport { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { debounce } from \"radash\";\r\nimport {\r\n\tChangeEvent,\r\n\tMouseEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseMemo,\r\n\tuseState,\r\n} from \"react\";\r\nimport \"../../css/input.css\";\r\nimport Popup from \"../popup\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport { Options, displayValue } from \"./options\";\r\nimport { ISelect } from \"./type\";\r\n\r\nconst Select = forwardRef<HTMLInputElement, ISelect>((props, ref) => {\r\n\tconst {\r\n\t\ttype = \"text\",\r\n\t\tname,\r\n\t\tlabel,\r\n\t\tvalue = \"\",\r\n\t\tplaceholder,\r\n\t\toptions = [],\r\n\t\tmultiple,\r\n\t\tprepend,\r\n\t\tappend,\r\n\t\tlabelInline,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tmessage,\r\n\t\tstatus = \"normal\",\r\n\t\thideClear,\r\n\t\tmaxDisplay,\r\n\t\tborder,\r\n\t\tfilter,\r\n\t\ttip,\r\n\t\tfilterPlaceholder = \"...\",\r\n\t\tpopupProps,\r\n\t\tonSelect,\r\n\t\tonChange,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tinputValue: \"\",\r\n\t\tfilterValue: \"\",\r\n\t\tvalue,\r\n\t\tloading: false,\r\n\t});\r\n\r\n\tconst [active, setActive] = useState<boolean>(false);\r\n\r\n\tconst formattedOptions = useMemo(() => formatOption(options), [options]);\r\n\r\n\tconst filterOptions = useMemo(() => {\r\n\t\tconst { filterValue: fv } = state;\r\n\t\tif (!fv || !filter) return formattedOptions;\r\n\r\n\t\tconst filterFn =\r\n\t\t\ttypeof filter === \"function\"\r\n\t\t\t\t? filter\r\n\t\t\t\t: (opt) => opt.value.includes(fv) || opt.label.includes(fv);\r\n\r\n\t\treturn formattedOptions.filter(filterFn);\r\n\t}, [formattedOptions, filter, state.filterValue]);\r\n\r\n\tconst changeValue = (v: any) => {\r\n\t\tstate.value = v;\r\n\t\tonChange?.(v);\r\n\t};\r\n\r\n\tconst handleSelect = useCallback((value: any, option?: TOption) => {\r\n\t\tonSelect?.(value, option);\r\n\r\n\t\tif (multiple) {\r\n\t\t\tconst values = [...(state.value as any[])];\r\n\t\t\tconst i = values.findIndex((v) => v === value);\r\n\r\n\t\t\ti > -1 ? values.splice(i, 1) : values.push(value);\r\n\t\t\tchangeValue(values as any);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetActive(false);\r\n\t\tchangeValue(value);\r\n\t}, []);\r\n\r\n\tconst handleVisibleChange = (visible: boolean) => {\r\n\t\tsetActive(visible);\r\n\r\n\t\tif (!filter) return;\r\n\r\n\t\tstate.filterValue = \"\";\r\n\t};\r\n\r\n\tconst handleHelperClick = (e: MouseEvent) => {\r\n\t\tif (!active) return;\r\n\r\n\t\tchangeValue(multiple ? [] : \"\");\r\n\t};\r\n\r\n\tconst handleFilterChange = useMemoizedFn(\r\n\t\tdebounce({ delay: 400 }, (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\t\tconst v = e.target.value;\r\n\t\t\tstate.filterValue = v;\r\n\t\t})\r\n\t);\r\n\r\n\tconst handleInputChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tstate.filterValue = e.target.value;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tconst hasValue = multiple\r\n\t\t? (state.value as any[]).length > 0\r\n\t\t: !!state.value;\r\n\tconst clearable = !hideClear && active && hasValue;\r\n\tconst text = message ?? tip;\r\n\r\n\treturn (\r\n\t\t<label\r\n\t\t\tclassName={classNames(\"i-input-label\", className, {\r\n\t\t\t\t\"i-input-inline\": labelInline,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{label && <span className='i-input-label-text'>{label}</span>}\r\n\r\n\t\t\t<Popup\r\n\t\t\t\tposition='bottom'\r\n\t\t\t\tarrow={false}\r\n\t\t\t\tfitSize\r\n\t\t\t\t{...popupProps}\r\n\t\t\t\tvisible={active}\r\n\t\t\t\ttrigger='none'\r\n\t\t\t\tonVisibleChange={handleVisibleChange}\r\n\t\t\t\tcontent={\r\n\t\t\t\t\t<Options\r\n\t\t\t\t\t\toptions={filterOptions}\r\n\t\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\t\tmultiple={multiple}\r\n\t\t\t\t\t\tfilter={!!filter}\r\n\t\t\t\t\t\tfilterPlaceholder={filterPlaceholder}\r\n\t\t\t\t\t\tonSelect={handleSelect}\r\n\t\t\t\t\t\tonFilter={handleFilterChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classNames(\"i-input-item\", {\r\n\t\t\t\t\t\t[`i-input-${status}`]: status !== \"normal\",\r\n\t\t\t\t\t\t\"i-input-borderless\": !border,\r\n\t\t\t\t\t\t\"i-input-focus\": active,\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tonClick={() => setActive(true)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{prepend}\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\ttype='hidden'\r\n\t\t\t\t\t\tvalue={state.value}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{multiple ? (\r\n\t\t\t\t\t\thasValue ? (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-input i-select\", {\r\n\t\t\t\t\t\t\t\t\t\"i-select-multiple\": multiple,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{displayValue({\r\n\t\t\t\t\t\t\t\t\toptions: formattedOptions,\r\n\t\t\t\t\t\t\t\t\tvalue: state.value,\r\n\t\t\t\t\t\t\t\t\tmultiple,\r\n\t\t\t\t\t\t\t\t\tmaxDisplay,\r\n\t\t\t\t\t\t\t\t\tonSelect: handleSelect,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName='i-input i-select'\r\n\t\t\t\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\t\t\t\treadOnly\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t{!multiple && (\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tvalue={active ? state.filterValue : state.value}\r\n\t\t\t\t\t\t\tclassName='i-input i-select'\r\n\t\t\t\t\t\t\tplaceholder={state.value || placeholder}\r\n\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\treadOnly={!filter}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\tactive\r\n\t\t\t\t\t\ticon={clearable ? undefined : <UnfoldMoreRound />}\r\n\t\t\t\t\t\tonClick={handleHelperClick}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{append}\r\n\t\t\t\t</div>\r\n\t\t\t</Popup>\r\n\r\n\t\t\t{text && <span className='i-input-message'>{text}</span>}\r\n\t\t</label>\r\n\t);\r\n});\r\n\r\nexport default Select;\r\n","import \"./index.css\";\r\n\r\nexport default function Divider() {\r\n\treturn <i className='i-step-divider' />;\r\n}\r\n","import { CheckRound } from \"@ricons/material\";\r\nimport classNames from \"classnames\";\r\nimport Divider from \"./divider\";\r\nimport { IStepItem } from \"./type\";\r\n\r\nconst STATUS = [\"finished\", \"active\", \"pending\"];\r\n\r\nfunction defaultRenderIcon(i: number, status: string) {\r\n\treturn (\r\n\t\t<span className='i-step-item-index'>\r\n\t\t\t{status === \"finished\" ? (\r\n\t\t\t\t<CheckRound style={{ width: \"1em\", height: \"1.5em\" }} />\r\n\t\t\t) : (\r\n\t\t\t\ti + 1\r\n\t\t\t)}\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\nfunction Item(props: IStepItem) {\r\n\tconst {\r\n\t\tindex = 0,\r\n\t\tactive = 0,\r\n\t\trenderIcon = defaultRenderIcon,\r\n\t\ttitle,\r\n\t\tvertical,\r\n\t\tline = <Divider />,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t} = props;\r\n\tconst status = STATUS[index === active ? 1 : index < active ? 0 : 2];\r\n\r\n\tconst handleClick = () => {\r\n\t\tonClick?.(index);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-step-item\",\r\n\t\t\t\t`i-step-item-${status}`,\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tonClick={handleClick}\r\n\t\t>\r\n\t\t\t{vertical ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='i-step-item-left'>\r\n\t\t\t\t\t\t{renderIcon?.(index, status)}\r\n\t\t\t\t\t\t{line}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='i-step-item-right'>\r\n\t\t\t\t\t\t<div className='i-step-item-title'>{title}</div>\r\n\t\t\t\t\t\t{children && (\r\n\t\t\t\t\t\t\t<div className='i-step-item-content'>\r\n\t\t\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='i-step-item-title'>\r\n\t\t\t\t\t\t{renderIcon?.(index, status)}\r\n\r\n\t\t\t\t\t\t<span>{title}</span>\r\n\r\n\t\t\t\t\t\t{line}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{children && (\r\n\t\t\t\t\t\t<div className='i-step-item-content'>{children}</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Item;\r\n","import classNames from \"classnames\";\r\nimport { Children, ReactNode, useMemo } from \"react\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { IStep } from \"./type\";\r\n\r\nconst Step = (props: IStep): JSX.Element => {\r\n\tconst {\r\n\t\tactive = 0,\r\n\t\tvertical,\r\n\t\trenderIcon,\r\n\t\tline,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t} = props;\r\n\r\n\tconst steps = useMemo(() => {\r\n\t\tconst nodes: ReactNode[] = [];\r\n\t\tlet index = 0;\r\n\r\n\t\tChildren.map(children, (el: any) => {\r\n\t\t\tif (!el || el.type !== Item) return;\r\n\r\n\t\t\tconst { props: elProps } = el;\r\n\r\n\t\t\tnodes.push({\r\n\t\t\t\t...el,\r\n\t\t\t\tprops: {\r\n\t\t\t\t\trenderIcon,\r\n\t\t\t\t\tline,\r\n\t\t\t\t\tonClick,\r\n\t\t\t\t\t...elProps,\r\n\t\t\t\t\tvertical,\r\n\t\t\t\t\tactive,\r\n\t\t\t\t\tindex: index++,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn nodes;\r\n\t}, [active, children]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-step\",\r\n\t\t\t\t{ \"i-step-vertical\": vertical },\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{steps}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nStep.Item = Item;\r\n\r\nexport default Step;\r\n","import classNames from \"classnames\";\r\nimport { useMemo } from \"react\";\r\nimport { ISwiperItem } from \"./type\";\r\n\r\nfunction Item(props: ISwiperItem) {\r\n\tconst {\r\n\t\tindex = 0,\r\n\t\tactive,\r\n\t\ttype,\r\n\t\ttransition,\r\n\t\tgap = 0,\r\n\t\titemHeight,\r\n\t\tvertical,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t} = props;\r\n\r\n\tconst selfStyle = useMemo(() => {\r\n\t\tif (type === \"normal\") {\r\n\t\t\treturn {\r\n\t\t\t\t[vertical ? \"paddingBlock\" : \"paddingInline\"]: gap / 2,\r\n\t\t\t\theight: itemHeight,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttransform: `translate(-${index * 100}%, 0)`,\r\n\t\t\ttransition,\r\n\t\t};\r\n\t}, [index, gap, itemHeight, vertical, type]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{ ...style, ...selfStyle }}\r\n\t\t\tclassName={classNames(\"i-swiper-item\", className, {\r\n\t\t\t\t\"i-swiper-active\": active,\r\n\t\t\t})}\r\n\t\t\tdata-index={index}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Item;\r\n","import { useMouseMove, useMouseUp } from \"@p/js/hooks\";\r\nimport { clamp } from \"@p/js/utils\";\r\nimport {\r\n\tKeyboardArrowLeftRound,\r\n\tKeyboardArrowRightRound,\r\n} from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tChildren,\r\n\tMouseEvent,\r\n\tforwardRef,\r\n\tuseCallback,\r\n\tuseEffect,\r\n\tuseImperativeHandle,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Icon from \"../icon\";\r\nimport \"./index.css\";\r\nimport Item from \"./item\";\r\nimport { CompositionSwiper, ISwiper, RefSwiper } from \"./type\";\r\n\r\nconst Swiper = forwardRef<RefSwiper, ISwiper>((props, ref): JSX.Element => {\r\n\tconst {\r\n\t\ttype = \"normal\",\r\n\t\tinitial = 0,\r\n\t\tdisplay = 1,\r\n\t\tscroll = 1,\r\n\t\tloop = true,\r\n\t\tvertical,\r\n\t\tprev = <Icon icon={<KeyboardArrowLeftRound />} size='2em' />,\r\n\t\tnext = <Icon icon={<KeyboardArrowRightRound />} size='2em' />,\r\n\t\tduration = 600,\r\n\t\tinterval = 3000,\r\n\t\tautoplay,\r\n\t\tpauseOnHover,\r\n\t\tarrow = true,\r\n\t\treverse,\r\n\t\tdraggable,\r\n\t\tdragOffset = 40,\r\n\t\tgap = 0,\r\n\t\titemHeight,\r\n\t\tindicator,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\trenderIndicator,\r\n\t\tonBeforeSwipe,\r\n\t\tonAfterSwipe,\r\n\t} = props;\r\n\r\n\tconst listRef = useRef<HTMLDivElement>(null);\r\n\tconst timerRef = useRef<any>(null);\r\n\tconst transition = `all ${duration / 1000}s`;\r\n\tconst state = useReactive({\r\n\t\tcurrent: initial,\r\n\t\tswipable: true,\r\n\t\ttransition: type === \"fade\" ? \"none\" : transition,\r\n\t\tdragStart: 0,\r\n\t\tdragging: false,\r\n\t\tinitialized: false,\r\n\t});\r\n\r\n\tconst items = useMemo(() => {\r\n\t\treturn Children.map(children, (node: any) => {\r\n\t\t\tif (node.type !== Item) return;\r\n\r\n\t\t\treturn node;\r\n\t\t});\r\n\t}, [children]);\r\n\r\n\tconst [displayItems, extra, size, total, listSize] = useMemo(() => {\r\n\t\tconst extra =\r\n\t\t\ttype === \"normal\" && loop && items.length > display\r\n\t\t\t\t? display + 1\r\n\t\t\t\t: 0;\r\n\t\tlet list: any = [];\r\n\r\n\t\tif (extra <= 0) {\r\n\t\t\tlist = [...items];\r\n\t\t} else {\r\n\t\t\tconst head = items.slice(0, extra);\r\n\t\t\tconst tail = items.slice(-extra);\r\n\t\t\tlist = [...tail, ...items, ...head];\r\n\t\t}\r\n\r\n\t\tconst listSize = `${(list.length / display) * 100}%`;\r\n\r\n\t\treturn [list, extra, items.length, list.length, listSize];\r\n\t}, [display, loop, type, items]);\r\n\r\n\tconst offsetPercent = useMemo(\r\n\t\t() => (-100 * (state.current + extra)) / total,\r\n\t\t[state.current, total]\r\n\t);\r\n\r\n\tconst position = useMemo(() => {\r\n\t\tif (size <= display || type === \"fade\") return;\r\n\r\n\t\tconst offset = vertical\r\n\t\t\t? `0, ${offsetPercent}%`\r\n\t\t\t: `${offsetPercent}%, 0`;\r\n\t\treturn `translate3d(${offset}, 0)`;\r\n\t}, [offsetPercent, vertical, display, size, type]);\r\n\r\n\tconst trackStyle = useMemo(() => {\r\n\t\tif (!vertical || !itemHeight) return;\r\n\r\n\t\treturn {\r\n\t\t\theight: itemHeight * display,\r\n\t\t};\r\n\t}, [vertical, itemHeight, display]);\r\n\r\n\tconst indicatorsLoop = useMemo(() => {\r\n\t\treturn Array.from({\r\n\t\t\tlength: Math.ceil((size - display) / scroll) + 1,\r\n\t\t});\r\n\t}, [loop, indicator]);\r\n\r\n\tconst clearTimer = () => {\r\n\t\tclearTimeout(timerRef.current);\r\n\t\ttimerRef.current = null;\r\n\t};\r\n\r\n\tconst swipeTo = useCallback(\r\n\t\t(i: number) => {\r\n\t\t\tif (!state.swipable || i === state.current) return;\r\n\t\t\tstate.swipable = false;\r\n\t\t\tonBeforeSwipe?.(state.current);\r\n\r\n\t\t\tlet reset = false;\r\n\t\t\tlet next = i;\r\n\t\t\tconst lastDisplay = size - display;\r\n\r\n\t\t\tif (loop) {\r\n\t\t\t\tif (i > lastDisplay) {\r\n\t\t\t\t\treset = true;\r\n\t\t\t\t\ti = size;\r\n\t\t\t\t\tnext = 0;\r\n\t\t\t\t} else if (i < 0) {\r\n\t\t\t\t\treset = true;\r\n\t\t\t\t\ti = -display;\r\n\t\t\t\t\tnext = lastDisplay;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnext = clamp(next, 0, lastDisplay);\r\n\t\t\t\ti = next;\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.swipable = true;\r\n\t\t\t}, duration + 32);\r\n\r\n\t\t\tif (type === \"fade\") {\r\n\t\t\t\tstate.current = next;\r\n\t\t\t\tonAfterSwipe?.(next);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tstate.current = i;\r\n\r\n\t\t\tif (!reset) {\r\n\t\t\t\tif (autoplay) {\r\n\t\t\t\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tonAfterSwipe?.(next);\r\n\t\t\t\t}, duration + 12);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tstate.transition = \"none\";\r\n\t\t\t\tstate.current = next;\r\n\t\t\t\tonAfterSwipe?.(next);\r\n\t\t\t\tif (autoplay) {\r\n\t\t\t\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tstate.transition = transition;\r\n\t\t\t\t}, 60);\r\n\t\t\t}, duration + 20);\r\n\t\t},\r\n\t\t[duration, autoplay]\r\n\t);\r\n\r\n\tconst swipeNext = () => {\r\n\t\tswipeTo(reverse ? state.current - scroll : state.current + scroll);\r\n\t};\r\n\r\n\tconst swipePrev = () => {\r\n\t\tswipeTo(reverse ? state.current + scroll : state.current - scroll);\r\n\t};\r\n\r\n\tconst handleMouseDown = useCallback(\r\n\t\t(e: MouseEvent) => {\r\n\t\t\tif (!draggable || !state.swipable || type === \"fade\") return;\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tObject.assign(state, {\r\n\t\t\t\tdragStart: vertical ? e.clientY : e.clientX,\r\n\t\t\t\tdragging: true,\r\n\t\t\t\ttransition: \"none\",\r\n\t\t\t});\r\n\t\t},\r\n\t\t[draggable, vertical]\r\n\t);\r\n\r\n\tconst handleMouseMove = useCallback(\r\n\t\t(e: any) => {\r\n\t\t\tif (!state.dragging || !listRef.current) return;\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst dragEnd = vertical ? e.clientY : e.clientX;\r\n\t\t\tconst offset =\r\n\t\t\t\t((dragEnd - state.dragStart) * 61.8) /\r\n\t\t\t\t\tlistRef.current[vertical ? \"offsetHeight\" : \"offsetWidth\"] +\r\n\t\t\t\toffsetPercent;\r\n\r\n\t\t\tlistRef.current.style.transform = `translate3d(${\r\n\t\t\t\tvertical ? `0, ${offset}%` : `${offset}%, 0`\r\n\t\t\t}, 0)`;\r\n\t\t},\r\n\t\t[vertical, listRef.current, offsetPercent]\r\n\t);\r\n\r\n\tconst handleMouseUp = useCallback(\r\n\t\t(e: any) => {\r\n\t\t\tif (!state.dragging || !listRef.current) return;\r\n\r\n\t\t\tconst dragEnd = vertical ? e.clientY : e.clientX;\r\n\t\t\tconst part =\r\n\t\t\t\tlistRef.current[vertical ? \"offsetHeight\" : \"offsetWidth\"] /\r\n\t\t\t\ttotal;\r\n\t\t\tconst offset = (dragEnd - state.dragStart) * 0.618;\r\n\t\t\tconst absOffset = Math.abs(offset);\r\n\r\n\t\t\tif (absOffset > dragOffset) {\r\n\t\t\t\tconst base = Math.floor(absOffset / part);\r\n\t\t\t\tconst mod = (absOffset % part) - dragOffset > 0 ? 1 : 0;\r\n\t\t\t\tconst p = base + mod;\r\n\r\n\t\t\t\tlet to = state.current + (offset > 0 ? -p : p);\r\n\r\n\t\t\t\tswipeTo(to);\r\n\t\t\t}\r\n\r\n\t\t\tlistRef.current.style.transform = position || \"\";\r\n\r\n\t\t\tObject.assign(state, {\r\n\t\t\t\tdragging: false,\r\n\t\t\t\ttransition,\r\n\t\t\t});\r\n\t\t},\r\n\t\t[vertical, listRef.current, offsetPercent]\r\n\t);\r\n\r\n\tconst handleMouseOver = () => {\r\n\t\tif (!pauseOnHover) return;\r\n\t\tclearTimer();\r\n\t};\r\n\r\n\tconst handleMouseLeave = () => {\r\n\t\tif (!pauseOnHover) return;\r\n\t\tclearTimer();\r\n\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\t};\r\n\r\n\tuseMouseMove(handleMouseMove);\r\n\tuseMouseUp(handleMouseUp);\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\tswipeTo,\r\n\t\tswipeNext,\r\n\t\tswipePrev,\r\n\t}));\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!autoplay) return;\r\n\t\ttimerRef.current = setTimeout(swipeNext, interval);\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(timerRef.current);\r\n\t\t\ttimerRef.current = null;\r\n\t\t};\r\n\t}, [autoplay, interval]);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-swiper\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"i-swiper-vertical\": vertical,\r\n\t\t\t\t\t\"i-swiper-initialized\": state.initialized,\r\n\t\t\t\t},\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName='i-swiper-track'\r\n\t\t\t\tstyle={trackStyle}\r\n\t\t\t\tonMouseOver={handleMouseOver}\r\n\t\t\t\tonMouseLeave={handleMouseLeave}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={listRef}\r\n\t\t\t\t\tclassName={classNames(\"i-swiper-list\", {\r\n\t\t\t\t\t\t\"i-swiper-fade\": type === \"fade\",\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t[vertical ? \"height\" : \"width\"]: listSize,\r\n\t\t\t\t\t\ttransform: position,\r\n\t\t\t\t\t\ttransition: state.transition,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\t>\r\n\t\t\t\t\t{displayItems.map((item, i) => {\r\n\t\t\t\t\t\tconst { props: itemProps } = item;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Item\r\n\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\tindex={i}\r\n\t\t\t\t\t\t\t\tactive={i - extra === state.current}\r\n\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\tgap={gap}\r\n\t\t\t\t\t\t\t\ttransition={transition}\r\n\t\t\t\t\t\t\t\titemHeight={itemHeight}\r\n\t\t\t\t\t\t\t\tvertical={vertical}\r\n\t\t\t\t\t\t\t\t{...itemProps}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{arrow && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclassName='i-swiper-arrow i-swiper-prev'\r\n\t\t\t\t\t\t\tonClick={swipePrev}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{prev}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclassName='i-swiper-arrow i-swiper-next'\r\n\t\t\t\t\t\t\tonClick={swipeNext}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{next}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{indicator && (\r\n\t\t\t\t<div className='i-swiper-indicators'>\r\n\t\t\t\t\t{indicatorsLoop.map((whatever, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-swiper-indicator\", {\r\n\t\t\t\t\t\t\t\t\t\"i-indicator-active\":\r\n\t\t\t\t\t\t\t\t\t\ti ===\r\n\t\t\t\t\t\t\t\t\t\tMath[loop ? \"floor\" : \"ceil\"](\r\n\t\t\t\t\t\t\t\t\t\t\t((state.current + size) % size) /\r\n\t\t\t\t\t\t\t\t\t\t\t\tscroll\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tonClick={() => swipeTo(i * scroll)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{renderIndicator?.(i)}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}) as CompositionSwiper;\r\n\r\nSwiper.Item = Item;\r\n\r\nexport default Swiper;\r\n","import { ITabItem } from \"./type\";\r\n\r\nconst Item = (props: ITabItem) => {\r\n\treturn <></>;\r\n};\r\n\r\nexport default Item;\r\n","import { useIntersectionObserver } from \"@p/js/hooks\";\r\nimport { MoreHorizRound } from \"@ricons/material\";\r\nimport { useReactive, useSize } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { pick } from \"radash\";\r\nimport {\r\n\tCSSProperties,\r\n\tChildren,\r\n\tforwardRef,\r\n\tuseEffect,\r\n\tuseImperativeHandle,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport Popup from \"../popup\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport \"./index.css\";\r\nimport TabItem from \"./item\";\r\nimport { CompositionTabs, ITabItem, ITabs, RefTabs, TTabKey } from \"./type\";\r\n\r\ntype TState = {\r\n\tactive?: TTabKey;\r\n\tprevActive?: TTabKey;\r\n\tbarStyle: CSSProperties;\r\n\tcachedTabs: TTabKey[];\r\n\toverflow: boolean;\r\n\tmore: ITabItem[];\r\n\ttabs: ITabItem[];\r\n};\r\n\r\nconst Tabs = forwardRef<RefTabs, ITabs>((props, ref) => {\r\n\tconst {\r\n\t\tactive,\r\n\t\ttabs: items,\r\n\t\ttype = \"default\",\r\n\t\tprepend,\r\n\t\tappend,\r\n\t\tchildren,\r\n\t\tclassName,\r\n\t\tvertical,\r\n\t\ttoggable,\r\n\t\tbar = true,\r\n\t\thideMore,\r\n\t\tbarClass,\r\n\t\trenderMore = () => (\r\n\t\t\t<Button flat square size='small'>\r\n\t\t\t\t<Icon icon={<MoreHorizRound />} />\r\n\t\t\t</Button>\r\n\t\t),\r\n\t\tonTabChange,\r\n\t\t...rest\r\n\t} = props;\r\n\r\n\tconst navRefs = useRef<HTMLElement[]>([]);\r\n\tconst barRef = useRef<HTMLSpanElement>(null);\r\n\tconst navsRef = useRef<HTMLDivElement>(null);\r\n\tconst state = useReactive<TState>({\r\n\t\tactive,\r\n\t\tprevActive: undefined,\r\n\t\tbarStyle: {},\r\n\t\tcachedTabs: [],\r\n\t\toverflow: false,\r\n\t\tmore: [],\r\n\t\ttabs: [],\r\n\t});\r\n\tconst { observe, unobserve } = useIntersectionObserver();\r\n\tconst size = useSize(navsRef);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!items) {\r\n\t\t\tif (!children) {\r\n\t\t\t\tstate.tabs = [];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tstate.tabs = Children.map(children, (node, i) => {\r\n\t\t\t\tconst { key, props: nodeProps } = node as {\r\n\t\t\t\t\tkey?: TTabKey;\r\n\t\t\t\t\tprops?: any;\r\n\t\t\t\t};\r\n\t\t\t\tconst { title, children, content, keepDOM } = nodeProps;\r\n\t\t\t\tconst cloned = children\r\n\t\t\t\t\t? pick(children, [\"props\", \"type\", \"$$typeof\", \"ref\"])\r\n\t\t\t\t\t: content;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tkey: key || String(i),\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tcontent: cloned,\r\n\t\t\t\t\tkeepDOM,\r\n\t\t\t\t};\r\n\t\t\t}) as ITabItem[];\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.tabs = items.map((item, i) => {\r\n\t\t\tif ([\"string\", \"number\"].includes(typeof item)) {\r\n\t\t\t\treturn { key: item, title: item };\r\n\t\t\t}\r\n\t\t\tif (item.key === undefined) {\r\n\t\t\t\titem.key = i;\r\n\t\t\t}\r\n\t\t\treturn item;\r\n\t\t});\r\n\t}, [children, items]);\r\n\r\n\tconst add = (tab: ITabItem) => {\r\n\t\tconst { key } = tab;\r\n\t\tconst i = state.tabs.findIndex((t) => t.key === key);\r\n\r\n\t\tif (i > -1) {\r\n\t\t\topen(state.tabs[i].key ?? i);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst l = state.tabs.length;\r\n\t\tconst tkey = tab.key ?? l;\r\n\t\tstate.tabs.push({ ...tab, key: tkey });\r\n\t\topen(tkey);\r\n\t};\r\n\r\n\tconst close = (key: TTabKey) => {\r\n\t\tconst i = state.tabs.findIndex((t) => t.key === key);\r\n\r\n\t\tif (i < 0) return;\r\n\r\n\t\tstate.tabs.splice(i, 1);\r\n\r\n\t\tif (state.active !== key) return;\r\n\r\n\t\tconst next = state.tabs[i] || state.tabs[i - 1];\r\n\t\topen(state.prevActive ?? next?.key ?? \"\");\r\n\t};\r\n\r\n\tconst open = (key: TTabKey) => {\r\n\t\tif (key === state.active) {\r\n\t\t\tif (!toggable) return;\r\n\r\n\t\t\tonTabChange?.(undefined, key);\r\n\t\t\tstate.active = undefined;\r\n\r\n\t\t\tstate.barStyle = {\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: 0,\r\n\t\t\t};\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.prevActive = state.active;\r\n\t\tonTabChange?.(key, state.active);\r\n\t\tstate.active = key;\r\n\t};\r\n\r\n\tconst handleMouseWheel = (e) => {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tif (vertical) return;\r\n\r\n\t\tnavsRef.current?.scrollBy({\r\n\t\t\tleft: e.deltaY + e.deltaX,\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!size || hideMore) return;\r\n\t\tconst { scrollHeight, scrollWidth } = navsRef.current as HTMLElement;\r\n\t\tconst { width, height } = size;\r\n\r\n\t\tstate.overflow = scrollHeight > height || scrollWidth > width;\r\n\r\n\t\tif (!state.overflow) return;\r\n\r\n\t\tnavRefs.current.map((nav, i) => {\r\n\t\t\tif (!nav) return;\r\n\t\t\tobserve(nav, (tar: HTMLElement, visible: boolean) => {\r\n\t\t\t\tif (!state.tabs[i]) return;\r\n\t\t\t\tstate.tabs[i].intersecting = visible;\r\n\t\t\t\tstate.more = state.tabs.filter((tab) => !tab.intersecting);\r\n\t\t\t});\r\n\t\t});\r\n\t}, [size, hideMore, state.tabs.length]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!bar || type === \"pane\" || state.active === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst index = state.tabs.findIndex((tab) => tab.key === state.active);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst nav = navRefs.current[index];\r\n\r\n\t\t\tif (!nav) return;\r\n\r\n\t\t\tif (state.tabs[index].keepDOM && state.active) {\r\n\t\t\t\tconst i = state.cachedTabs.findIndex((k) => k === state.active);\r\n\t\t\t\ti < 0 && state.cachedTabs.unshift(state.active);\r\n\t\t\t}\r\n\r\n\t\t\tconst { offsetHeight, offsetLeft, offsetTop, offsetWidth } = nav;\r\n\t\t\tconst isLine = type === \"line\";\r\n\r\n\t\t\tstate.barStyle = {\r\n\t\t\t\theight: !vertical && isLine ? \".25em\" : offsetHeight,\r\n\t\t\t\twidth: vertical && isLine ? \".25em\" : offsetWidth,\r\n\t\t\t\ttransform: `translate(${offsetLeft}px, ${offsetTop}px)`,\r\n\t\t\t};\r\n\t\t}, 16);\r\n\t}, [state.active, bar]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (active === undefined || state.active === active) return;\r\n\r\n\t\topen(active);\r\n\t}, [active]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (hideMore) return;\r\n\t\treturn () => {\r\n\t\t\tnavRefs.current?.map(unobserve);\r\n\t\t};\r\n\t}, [state.tabs.length]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!navsRef.current || vertical) return;\r\n\t\tnavsRef.current.addEventListener(\"wheel\", handleMouseWheel, {\r\n\t\t\tpassive: false,\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tif (!navsRef.current) return;\r\n\t\t\tnavsRef.current.removeEventListener(\"wheel\", handleMouseWheel);\r\n\t\t};\r\n\t}, [navsRef.current]);\r\n\r\n\tuseImperativeHandle(ref, () => ({\r\n\t\topen,\r\n\t\tclose,\r\n\t\tadd,\r\n\t\tnavs: navsRef,\r\n\t}));\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\r\n\t\t\t\t\"i-tabs\",\r\n\t\t\t\t{ flex: vertical, [`i-tabs-${type}`]: type !== \"default\" },\r\n\t\t\t\tclassName\r\n\t\t\t)}\r\n\t\t\t{...rest}\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-tab-navs-container\", {\r\n\t\t\t\t\t\"i-tab-navs-vertical\": vertical,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t{prepend}\r\n\r\n\t\t\t\t<div ref={navsRef} className='i-tab-navs'>\r\n\t\t\t\t\t{state.tabs.map((tab, i) => {\r\n\t\t\t\t\t\tconst { title, key = i, closable } = tab;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\tref={(ref) =>\r\n\t\t\t\t\t\t\t\t\t(navRefs.current[i] =\r\n\t\t\t\t\t\t\t\t\t\tref as HTMLAnchorElement)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-tab-nav\", {\r\n\t\t\t\t\t\t\t\t\t\"i-tab-active\": state.active === key,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\tonClick={() => open(key)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{title}\r\n\r\n\t\t\t\t\t\t\t\t{closable && (\r\n\t\t\t\t\t\t\t\t\t<Helpericon\r\n\t\t\t\t\t\t\t\t\t\tas='i'\r\n\t\t\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\t\t\tclassName='i-tab-nav-close'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\tclose(key);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t{bar && (\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tref={barRef}\r\n\t\t\t\t\t\t\tclassName={classNames(\"i-tab-navs-bar\", barClass)}\r\n\t\t\t\t\t\t\tstyle={state.barStyle}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!hideMore && state.overflow && state.more.length > 0 && (\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tarrow={false}\r\n\t\t\t\t\t\tposition={vertical ? \"right\" : \"bottom\"}\r\n\t\t\t\t\t\talign='end'\r\n\t\t\t\t\t\ttouchable\r\n\t\t\t\t\t\thideDelay={500}\r\n\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t<div className='i-tabs-morelist pd-4'>\r\n\t\t\t\t\t\t\t\t{state.more.map((tab, i) => {\r\n\t\t\t\t\t\t\t\t\tconst { key = i, title } = tab;\r\n\t\t\t\t\t\t\t\t\tconst isActive = state.active === key;\r\n\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classNames(\"i-tab-nav\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"i-tab-active\": isActive,\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => open(key)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{renderMore(state.more)}\r\n\t\t\t\t\t</Popup>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{append}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='i-tab-contents'>\r\n\t\t\t\t{state.tabs.map((tab, i) => {\r\n\t\t\t\t\tconst { key = i, content } = tab;\r\n\t\t\t\t\tconst isActive = state.active === key;\r\n\t\t\t\t\tconst show =\r\n\t\t\t\t\t\tisActive ||\r\n\t\t\t\t\t\t(key !== undefined && state.cachedTabs.includes(key));\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tshow && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\"i-tab-content\", {\r\n\t\t\t\t\t\t\t\t\t\"i-tab-active\": isActive,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{content}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}) as CompositionTabs;\r\n\r\nTabs.Item = TabItem;\r\n\r\nexport default Tabs;\r\n","import { KeyboardArrowDownRound } from \"@ricons/material\";\r\nimport { useMemoizedFn } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { MouseEvent, useState } from \"react\";\r\nimport Checkbox from \"../checkbox\";\r\nimport Icon from \"../icon\";\r\nimport { ITree, ITreeHeader, PropsTreeItem } from \"./type\";\r\n\r\ninterface ITreeList extends Omit<ITree, \"nodeProps\"> {\r\n\tnodeProps: {\r\n\t\tkey: string;\r\n\t\ttitle: string;\r\n\t\tchildren: string;\r\n\t};\r\n}\r\n\r\nexport function TreeList(props: ITreeList) {\r\n\tconst {\r\n\t\tdata = [],\r\n\t\tdepth = 0,\r\n\t\tround,\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tparent,\r\n\t\tnodeProps,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst contents = data.map((item, i) => {\r\n\t\tconst { type } = item;\r\n\t\tconst title = item[nodeProps.title];\r\n\t\tconst itemKey =\r\n\t\t\titem[nodeProps.key] ||\r\n\t\t\t(parent?.key !== undefined ? `${parent.key}-${i}` : `${i}`);\r\n\r\n\t\titem.key = itemKey;\r\n\t\titem.parent = parent;\r\n\r\n\t\tif (type === \"title\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div key={i} className='i-tree-group-title'>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (type && type !== \"item\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div key={i} className={`i-tree-type-${type}`}>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<TreeItem\r\n\t\t\t\tkey={itemKey}\r\n\t\t\t\tindex={i}\r\n\t\t\t\titem={item}\r\n\t\t\t\tdepth={depth}\r\n\t\t\t\tnodeProps={nodeProps}\r\n\t\t\t\t{...restProps}\r\n\t\t\t/>\r\n\t\t);\r\n\t});\r\n\r\n\tif (depth > 0) return <>{contents}</>;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-tree\", className, {\r\n\t\t\t\t\"i-tree-round\": round,\r\n\t\t\t})}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t{contents}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Header = (props: ITreeHeader) => {\r\n\tconst { as: Tag = \"a\", href, selected, children, ...restProps } = props;\r\n\r\n\tconst className = classNames(\"i-tree-item-header\", {\r\n\t\t\"i-tree-item-selected\": selected,\r\n\t});\r\n\r\n\tif (typeof Tag === \"string\") {\r\n\t\treturn (\r\n\t\t\t<Tag href={href} className={className} {...restProps}>\r\n\t\t\t\t{children}\r\n\t\t\t</Tag>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Tag to={href || \"\"} className={className} {...restProps}>\r\n\t\t\t{children}\r\n\t\t</Tag>\r\n\t);\r\n};\r\n\r\nexport const TreeItem = (props: PropsTreeItem) => {\r\n\tconst {\r\n\t\titem,\r\n\t\tdepth = 0,\r\n\t\tindex,\r\n\t\tselected,\r\n\t\tchecked = [],\r\n\t\tpartofs = {},\r\n\t\tcheckable,\r\n\t\tnodeProps,\r\n\t\trenderExtra,\r\n\t\tonItemClick,\r\n\t\tonItemSelect,\r\n\t\tonItemCheck,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst { as, key = \"\", href, icon, title, expanded, disabled } = item;\r\n\tconst children = item[nodeProps.children];\r\n\r\n\tconst [expand, setExpand] = useState(expanded);\r\n\r\n\tconst handleExpand = useMemoizedFn(\r\n\t\t(e: MouseEvent<HTMLElement>, fromToggle?: boolean) => {\r\n\t\t\tif (fromToggle) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tif (disabled || !children?.length) return;\r\n\r\n\t\t\tsetExpand((v) => !v);\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleItemClick = useMemoizedFn((e: MouseEvent<HTMLElement>) => {\r\n\t\tif (disabled) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thandleExpand(e);\r\n\t\tonItemClick?.(item, e);\r\n\t\tonItemSelect?.(key, item);\r\n\t});\r\n\r\n\tconst handleItemCheck = (checked) => onItemCheck?.(item, checked, []);\r\n\tconst itemChecked = checked.includes(key);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classNames(\"i-tree-item\", {\r\n\t\t\t\t\"i-tree-expand\": expand,\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t<Header\r\n\t\t\t\tas={as}\r\n\t\t\t\thref={href}\r\n\t\t\t\tstyle={{ paddingLeft: `${depth * 1.5 + 0.5}em` }}\r\n\t\t\t\tselected={selected === key}\r\n\t\t\t\tonClick={handleItemClick}\r\n\t\t\t>\r\n\t\t\t\t{checkable && (\r\n\t\t\t\t\t<Checkbox.Item\r\n\t\t\t\t\t\tvalue={itemChecked}\r\n\t\t\t\t\t\tpartof={!itemChecked && partofs[key]}\r\n\t\t\t\t\t\tclassName='i-tree-checkbox'\r\n\t\t\t\t\t\tonChange={handleItemCheck}\r\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{icon && <span className='i-tree-item-icon'>{icon}</span>}\r\n\r\n\t\t\t\t<span className='i-tree-item-title'>{title}</span>\r\n\r\n\t\t\t\t{renderExtra?.(item)}\r\n\r\n\t\t\t\t{children && (\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={<KeyboardArrowDownRound />}\r\n\t\t\t\t\t\tclassName='i-tree-toggle'\r\n\t\t\t\t\t\tonClick={(e) => handleExpand(e, true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Header>\r\n\r\n\t\t\t{children?.length && (\r\n\t\t\t\t<div className='i-tree-item-content'>\r\n\t\t\t\t\t<TreeList\r\n\t\t\t\t\t\tdata={children}\r\n\t\t\t\t\t\tdepth={depth + 1}\r\n\t\t\t\t\t\tselected={selected}\r\n\t\t\t\t\t\tcheckable={checkable}\r\n\t\t\t\t\t\tparent={item}\r\n\t\t\t\t\t\tpartofs={partofs}\r\n\t\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\t\tnodeProps={nodeProps}\r\n\t\t\t\t\t\trenderExtra={renderExtra}\r\n\t\t\t\t\t\tonItemClick={onItemClick}\r\n\t\t\t\t\t\tonItemSelect={onItemSelect}\r\n\t\t\t\t\t\tonItemCheck={onItemCheck}\r\n\t\t\t\t\t\t{...restProps}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { useMemoizedFn, useReactive } from \"ahooks\";\r\nimport { forwardRef, useEffect, useImperativeHandle } from \"react\";\r\nimport \"./index.css\";\r\nimport { TreeList } from \"./item\";\r\nimport { ITree, ITreeItem, RefTree } from \"./type\";\r\n\r\nconst defaultNodeProps = {\r\n\tkey: \"key\",\r\n\ttitle: \"title\",\r\n\tchildren: \"children\",\r\n};\r\n\r\nconst Tree = forwardRef<RefTree, ITree>((props, ref) => {\r\n\tconst {\r\n\t\tdata = [],\r\n\t\tselected,\r\n\t\tchecked = [],\r\n\t\tdisabledRelated,\r\n\t\tnodeProps,\r\n\t\tonItemSelect,\r\n\t\tonItemCheck,\r\n\t\t...restProps\r\n\t} = props;\r\n\tconst state = useReactive({\r\n\t\tselected,\r\n\t\tchecked,\r\n\t\tpartofs: {} as Record<string, boolean>,\r\n\t\tnodeMaps: new Map(),\r\n\t});\r\n\tconst oNodeProps = Object.assign({}, defaultNodeProps, nodeProps);\r\n\r\n\tconst isChecked = (key?: string) => state.checked.includes(key || \"\");\r\n\r\n\tconst checkItem = useMemoizedFn(\r\n\t\t(item: ITreeItem, checked: boolean, direction?: \"root\" | \"leaf\") => {\r\n\t\t\tconst { key = \"\", parent, children } = item;\r\n\t\t\tconst shouldChanged = { [key]: checked };\r\n\t\t\tconst partofs = { [key]: false };\r\n\r\n\t\t\tif (disabledRelated) return [shouldChanged];\r\n\r\n\t\t\tif (checked) {\r\n\t\t\t\tif (parent && direction !== \"leaf\") {\r\n\t\t\t\t\tconst hasUnchecked = parent.children?.some(\r\n\t\t\t\t\t\t(o) => o.key !== key && !isChecked(o.key)\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst [changes, parts] = checkItem(parent, true, \"root\");\r\n\r\n\t\t\t\t\tif (!hasUnchecked) {\r\n\t\t\t\t\t\tObject.assign(shouldChanged, changes);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tObject.assign(partofs, hasUnchecked ? parts : {}, {\r\n\t\t\t\t\t\t[parent.key as string]: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (children?.length && direction !== \"root\") {\r\n\t\t\t\t\tchildren.map((o) => {\r\n\t\t\t\t\t\tif (isChecked(o.key)) return;\r\n\r\n\t\t\t\t\t\tconst [changes] = checkItem(o, true, \"leaf\");\r\n\r\n\t\t\t\t\t\tObject.assign(shouldChanged, changes);\r\n\t\t\t\t\t\tpartofs[o.key as string] = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn [shouldChanged, partofs];\r\n\t\t\t}\r\n\r\n\t\t\tif (parent && direction !== \"leaf\") {\r\n\t\t\t\tconst [changes, parts] = checkItem(parent, false, \"root\");\r\n\r\n\t\t\t\tObject.assign(shouldChanged, changes);\r\n\r\n\t\t\t\tconst hasChecked = parent.children?.some(\r\n\t\t\t\t\t(o) => isChecked(o.key) && o.key !== key\r\n\t\t\t\t);\r\n\r\n\t\t\t\tObject.assign(partofs, hasChecked ? {} : parts, {\r\n\t\t\t\t\t[parent.key as string]: hasChecked,\r\n\t\t\t\t\t[key]: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (children?.length && direction !== \"root\") {\r\n\t\t\t\tchildren.map((o) => {\r\n\t\t\t\t\tconst [changes] = checkItem(o, false, \"leaf\");\r\n\r\n\t\t\t\t\tif (!isChecked(o.key)) return;\r\n\r\n\t\t\t\t\tObject.assign(shouldChanged, changes);\r\n\t\t\t\t\tpartofs[o.key as string] = false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn [shouldChanged, partofs];\r\n\t\t}\r\n\t);\r\n\r\n\tconst handleCheck = (item: ITreeItem, checked: boolean) => {\r\n\t\tconst [shouldChanged, partofs] = checkItem(item, checked);\r\n\t\tconst changedKeys = Object.keys(shouldChanged);\r\n\r\n\t\tstate.checked = checked\r\n\t\t\t? Array.from(new Set([...state.checked, ...changedKeys]))\r\n\t\t\t: state.checked.filter((k) => !changedKeys.includes(k));\r\n\r\n\t\tObject.assign(state.partofs, partofs);\r\n\r\n\t\tonItemCheck?.(item, checked, state.checked);\r\n\t};\r\n\r\n\tconst handleSelect = (key: string, item: ITreeItem) => {\r\n\t\tif (!props.selectable) return;\r\n\r\n\t\tstate.selected = key;\r\n\t\tonItemSelect?.(key, item);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (selected === undefined) return;\r\n\r\n\t\tstate.selected = selected;\r\n\t}, [selected]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.nodeMaps.clear();\r\n\r\n\t\tconst { key, children } = oNodeProps;\r\n\t\tconst recursive = (nodes) => {\r\n\t\t\tnodes.map((o) => {\r\n\t\t\t\tstate.nodeMaps.set(o[key], o);\r\n\r\n\t\t\t\to[children]?.length > 0 && recursive(o[children]);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\trecursive(data);\r\n\t}, [data]);\r\n\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {\r\n\t\t\tgetChecked: () => {\r\n\t\t\t\tconst items: ITreeItem[] = [];\r\n\t\t\t\tstate.checked.map((k) => {\r\n\t\t\t\t\tconst item = state.nodeMaps.get(k);\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t});\r\n\t\t\t\treturn [state.checked, items];\r\n\t\t\t},\r\n\t\t\tgetSelected: () => {\r\n\t\t\t\tconst item = state.nodeMaps.get(state.selected);\r\n\t\t\t\treturn [state.selected, item];\r\n\t\t\t},\r\n\t\t\tgetPartofs: () => {\r\n\t\t\t\tconst items: ITreeItem[] = [];\r\n\t\t\t\tconst keys = Object.keys(state.partofs).filter((k) => {\r\n\t\t\t\t\tconst indeterminate = state.partofs[k];\r\n\r\n\t\t\t\t\tif (indeterminate) {\r\n\t\t\t\t\t\tconst item = state.nodeMaps.get(k);\r\n\t\t\t\t\t\titems.push(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn indeterminate;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn [keys, items];\r\n\t\t\t},\r\n\t\t};\r\n\t});\r\n\r\n\treturn (\r\n\t\t<TreeList\r\n\t\t\tdata={data}\r\n\t\t\tselected={state.selected}\r\n\t\t\tchecked={state.checked}\r\n\t\t\tpartofs={state.partofs}\r\n\t\t\tnodeProps={oNodeProps}\r\n\t\t\tonItemCheck={handleCheck}\r\n\t\t\tonItemSelect={handleSelect}\r\n\t\t\t{...restProps}\r\n\t\t/>\r\n\t);\r\n});\r\n\r\nexport default Tree;\r\n","import { TFileType } from \"@p/js/usePreview/type\";\r\nimport { formatBytes, getFileType } from \"@p/js/utils\";\r\nimport { ListAltRound } from \"@ricons/material\";\r\nimport { title } from \"radash\";\r\nimport Icon from \"../icon\";\r\nimport Image from \"../image\";\r\nimport Helpericon from \"../utils/helpericon\";\r\nimport { IUploadItem } from \"./type\";\r\n\r\nexport default function RenderFile(props: IUploadItem) {\r\n\tconst { mode, index, file, onRemove, onPreview } = props;\r\n\r\n\tif (!file) return \"\";\r\n\tconst { name, size, url, src } = file;\r\n\tconst type = getFileType(name, file.type);\r\n\r\n\tconst CloseBtn = (\r\n\t\t<Helpericon\r\n\t\t\tactive\r\n\t\t\tclassName='i-upload-delete'\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tonRemove(index);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n\r\n\tswitch (mode) {\r\n\t\tcase \"card\":\r\n\t\t\tlet node = <></>;\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase TFileType.IMAGE:\r\n\t\t\t\t\tnode = (\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tlazyload\r\n\t\t\t\t\t\t\tsrc={url || src}\r\n\t\t\t\t\t\t\tfit='cover'\r\n\t\t\t\t\t\t\tusePreview={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase TFileType.VIDEO:\r\n\t\t\t\t\tnode = <video src={url || src} preload='none' />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnode = (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Icon icon={<ListAltRound />} />\r\n\t\t\t\t\t\t\t<span className='i-upload-file-name'>\r\n\t\t\t\t\t\t\t\t{title(name)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\ttitle={name}\r\n\t\t\t\t\tclassName='i-upload-item-card'\r\n\t\t\t\t\tonClick={() => onPreview?.(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{node}\r\n\r\n\t\t\t\t\t{CloseBtn}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='i-upload-item'\r\n\t\t\t\t\tonClick={() => onPreview?.(index)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{name}</span>\r\n\r\n\t\t\t\t\t<i className='i-upload-size'>{formatBytes(size ?? 0)}</i>\r\n\r\n\t\t\t\t\t{CloseBtn}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n","import usePreview from \"@p/js/usePreview\";\r\nimport { TPreviewItem } from \"@p/js/usePreview/type\";\r\nimport { CloudUploadTwotone, PlusSharp } from \"@ricons/material\";\r\nimport { useReactive } from \"ahooks\";\r\nimport classNames from \"classnames\";\r\nimport { uid } from \"radash\";\r\nimport {\r\n\tCSSProperties,\r\n\tChangeEvent,\r\n\tFragment,\r\n\tforwardRef,\r\n\tuseEffect,\r\n\tuseImperativeHandle,\r\n\tuseMemo,\r\n\tuseRef,\r\n} from \"react\";\r\nimport Button from \"../button\";\r\nimport Icon from \"../icon\";\r\nimport InputContainer from \"../input/container\";\r\nimport \"./index.css\";\r\nimport renderFile from \"./renderFile\";\r\nimport { IFile, IUpload, RefUpload } from \"./type\";\r\n\r\nconst Upload = forwardRef<RefUpload, IUpload>((props, ref): JSX.Element => {\r\n\tconst {\r\n\t\tlabel,\r\n\t\tlabelInline,\r\n\t\tvalue,\r\n\t\tfiles = [],\r\n\t\tplaceholder,\r\n\t\tstatus = \"normal\",\r\n\t\tmessage,\r\n\t\tclassName,\r\n\t\tstyle,\r\n\t\tchildren,\r\n\t\tmode = \"default\",\r\n\t\tcardSize = \"4em\",\r\n\t\tdisabled,\r\n\t\tlimit = props.multiple ? Infinity : 1,\r\n\t\tmultiple,\r\n\t\trenderItem = renderFile,\r\n\t\tshouldUpload = () => true,\r\n\t\tuploader,\r\n\t\tonChange,\r\n\t\tonFilesChange,\r\n\t\tonUpload,\r\n\t\t...restProps\r\n\t} = props;\r\n\r\n\tconst state = useReactive({\r\n\t\tfiles,\r\n\t\tvalue,\r\n\t\tstatus,\r\n\t\tmessage,\r\n\t\tupdate: 0,\r\n\t});\r\n\tconst inputRef = useRef<HTMLInputElement>(null);\r\n\tconst preview = usePreview();\r\n\r\n\tconst trigger = useMemo(() => {\r\n\t\tif (children) return children;\r\n\r\n\t\tswitch (mode) {\r\n\t\t\tcase \"card\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName='i-upload-card-btn color-5'\r\n\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\tflat\r\n\t\t\t\t\t\toutline\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon icon={<PlusSharp />} />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Button className='i-upload-btn' disabled={disabled}>\r\n\t\t\t\t\t\t<Icon icon={<CloudUploadTwotone />} /> Upload\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t);\r\n\t\t}\r\n\t}, [mode, children]);\r\n\r\n\tconst handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst files = Array.from(e.target.files || []) as IFile[];\r\n\t\tconst { files: before } = state;\r\n\t\tconst changed: IFile[] = [];\r\n\r\n\t\tfiles.map((f) => {\r\n\t\t\tconst { name, size, type } = f;\r\n\t\t\tconst same = before.find((pf) => {\r\n\t\t\t\tconst { name: n, size: s, type: t } = pf;\r\n\t\t\t\treturn n === name && s === size && t === type;\r\n\t\t\t});\r\n\r\n\t\t\tconst src = URL.createObjectURL(f);\r\n\t\t\tf.src = src;\r\n\t\t\tstate.update += 1;\r\n\r\n\t\t\tObject.assign(f, {\r\n\t\t\t\tuid: uid(7),\r\n\t\t\t\tsrc: f.src || f.name,\r\n\t\t\t});\r\n\t\t\t!same && changed.push(f);\r\n\t\t});\r\n\r\n\t\tconst after = [...before, ...changed];\r\n\r\n\t\tObject.assign(state, {\r\n\t\t\tfiles: multiple ? after.slice(0, limit) : [after.at(-1)],\r\n\t\t\tstatus,\r\n\t\t\tmessage,\r\n\t\t});\r\n\r\n\t\tonFilesChange?.(state.files, changed, e);\r\n\t\tonChange?.(state.files, e);\r\n\r\n\t\thandleUpload(changed);\r\n\t\tinputRef.current && (inputRef.current.value = \"\");\r\n\t};\r\n\r\n\tconst handleRemove = (i: number) => {\r\n\t\tconst [...files] = state.files;\r\n\r\n\t\tconst changed = files.splice(i, 1);\r\n\t\tURL.revokeObjectURL(changed[0]?.src || \"\");\r\n\r\n\t\tstate.files = files;\r\n\t\tonFilesChange?.(files, changed);\r\n\t\tonChange?.(files);\r\n\r\n\t\tinputRef.current && (inputRef.current.value = \"\");\r\n\t};\r\n\r\n\tconst handleUpload = async (files: IFile[]) => {\r\n\t\tif (!uploader) return;\r\n\r\n\t\tfiles.forEach(async (file) => {\r\n\t\t\tif (!shouldUpload(file)) return;\r\n\r\n\t\t\tconst result = await uploader(file);\r\n\t\t\tconst i = state.files.findIndex((f) => f.uid === result.uid);\r\n\t\t\ti > -1 && (state.files[i] = result);\r\n\r\n\t\t\tresult?.status === \"completed\" && onUpload?.(result);\r\n\t\t});\r\n\t};\r\n\r\n\tconst handlePreview = (i: number) => {\r\n\t\tpreview({ items: state.files as TPreviewItem[], initial: i });\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tObject.assign(state, {\r\n\t\t\tstatus,\r\n\t\t\tmessage,\r\n\t\t});\r\n\t}, [status, message]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstate.value = value;\r\n\t}, [value]);\r\n\r\n\tuseImperativeHandle(\r\n\t\tref,\r\n\t\t() => ({\r\n\t\t\tgetFileList: () => state.files,\r\n\t\t}),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst { message: msg, files: currentFiles } = state;\r\n\r\n\treturn (\r\n\t\t<InputContainer\r\n\t\t\tlabel={label}\r\n\t\t\tlabelInline={labelInline}\r\n\t\t\tclassName={classNames(\"i-input-label-file\", className)}\r\n\t\t\tstyle={style}\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\t{...restProps}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\ttype='file'\r\n\t\t\t\tclassName='i-input-file-hidden'\r\n\t\t\t\tmultiple={multiple}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classNames(\"i-upload-inner\", {\r\n\t\t\t\t\t[`i-upload-${mode}`]: mode !== \"default\",\r\n\t\t\t\t})}\r\n\t\t\t\tstyle={{ [\"--upload-card-size\"]: cardSize } as CSSProperties}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='i-upload-list'\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{currentFiles?.map((file: File, i: number) => (\r\n\t\t\t\t\t\t<Fragment key={i}>\r\n\t\t\t\t\t\t\t{renderFile({\r\n\t\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\t\t\tmode,\r\n\t\t\t\t\t\t\t\tonRemove: handleRemove,\r\n\t\t\t\t\t\t\t\tonPreview: handlePreview,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{msg && <span className='i-upload-message'>{msg}</span>}\r\n\r\n\t\t\t\t{currentFiles.length < limit && trigger}\r\n\t\t\t</div>\r\n\t\t</InputContainer>\r\n\t);\r\n});\r\n\r\nexport default Upload;\r\n","import \"./ripple.css\";\r\n\r\nconst state = {\r\n\tenable: false,\r\n\ttimeout: 500,\r\n};\r\n\r\nconst useRipple = () => {\r\n\tif (state.enable) return;\r\n\tstate.enable = true;\r\n\r\n\tdocument.addEventListener(\"mousedown\", listener);\r\n};\r\n\r\nfunction listener(e: MouseEvent) {\r\n\tconst target = e.target as HTMLElement;\r\n\tconst parent = target.closest(\"[data-ripple]\") as HTMLElement;\r\n\r\n\tif (!target || !parent) return;\r\n\r\n\ttriggerRipple(parent, e);\r\n}\r\n\r\nfunction triggerRipple(target: HTMLElement, e: MouseEvent) {\r\n\tconst [$box, $ripple] = createRipple();\r\n\tconst rect = target.getBoundingClientRect();\r\n\tconst size = Math.max(rect.width, rect.height) * 2;\r\n\r\n\t$ripple.style.cssText = `\r\n        left: ${e.pageX - rect.left}px;\r\n        top: ${e.pageY - rect.top}px;\r\n        width: ${size}px;\r\n        height: ${size}px;\r\n        transition: all ${state.timeout / 1000}s;\r\n    `;\r\n\ttarget.insertAdjacentElement(\"afterbegin\", $box);\r\n\ttarget.offsetHeight;\r\n\t$ripple.classList.add(\"i-ripple-active\");\r\n\r\n\tsetTimeout(() => {\r\n\t\t$box.remove();\r\n\t}, state.timeout);\r\n}\r\n\r\nfunction createRipple() {\r\n\tconst $box = document.createElement(\"SPAN\");\r\n\tconst $ripple = document.createElement(\"SPAN\");\r\n\r\n\t$box.className = \"i-ripple-container\";\r\n\t$ripple.className = \"i-ripple\";\r\n\r\n\t$box.append($ripple);\r\n\r\n\treturn [$box, $ripple];\r\n}\r\n\r\nexport default useRipple;\r\n"],"names":["Loading","props","icon","text","size","style","className","rest","_jsxs","classNames","fontSize","children","_jsx","width","height","stroke","viewBox","xmlns","cx","cy","r","fill","strokeWidth","strokeLinecap","strokeDasharray","strokeDashoffset","formatClass","outline","flat","loading","disabled","block","round","square","secondary","classnames","Button","forwardRef","ref","as","As","href","ripple","onClick","restProps","childNodes","createElement","key","attrs","e","stopPropagation","to","Toggle","active","activeClass","after","onToggle","state","useReactive","done","toggle","useCallback","hasAfter","undefined","nextActive","Object","assign","setTimeout","useEffect","Group","vertical","Icon","rotate","isValidElement","elProps","transform","cloneElement","ToTop","SkipPreviousRound","Affix","position","left","top","right","bottom","offset","getContainer","document","body","hidden","setHidden","useState","hijackChildren","useMemo","Children","map","node","type","container","scrollTo","behavior","listener","debounce","delay","scrollTop","removeEventListener","Badge","content","contentClass","dot","dotSize","rounded","Area","name","Header","Footer","Banner","Tailer","Card","shadow","border","slots","nodes","child","header","banner","footer","tailer","TFileType","getPosition","$source","$popup","options","refWindow","gap","align","arrowX","arrowY","arrowPos","rectT","getBoundingClientRect","rectC","w","window","innerWidth","h","innerHeight","tl","tt","tr","tb","tw","th","ch","cw","rectPa","offsetParent","offsetLeft","offsetTop","y","x","computePosition","containerSize","targetSize","targetOffset","contentSize","xl","xr","yt","yb","getPointPosition","pageX","pageY","wh","ww","centerPoint","result","formatOption","option","includes","label","value","formatNumber","precision","thousand","toFixed","points","split","integer","replace","length","renderNode","div","append","root","createRoot","sto","render","remove","unmount","clearTimeout","getSuffixByUrl","url","match","getFileType","suffix","startsWith","formatBytes","bytes","decimals","dm","i","Math","floor","log","parseFloat","pow","clamp","min","max","CheckboxItem","status","message","partof","onChange","handleChange","useMemoizedFn","checked","target","Checkbox","optionInline","labelInline","required","formattedOptions","opt","group","findIndex","item","push","splice","Item","Helpericon","CloseRound","uid","Collapse","items","multiple","headerClickable","renderToggle","MinusRound","PlusRound","onCollapse","collapses","nodeProps","title","handleToggle","Array","isArray","k","isActive","handleHeaderClick","Empty","InboxTwotone","getCellStyle","justify","col","row","colSpan","rowSpan","gridArea","insetInline","Cell","column","data","onCellClick","onCellDoubleClick","id","fixed","onDoubleClick","MouseMoveEvents","Set","MouseUpEvents","useMouseMove","add","delete","useMouseUp","useIntersectionObserver","configs","WM","WeakMap","IO","IntersectionObserver","entries","entry","callback","get","isIntersecting","observe","set","unobserve","disconnect","Resize","index","onWidthChange","resizing","handleMouseDown","offsetWidth","preventDefault","onMouseDown","addEventListener","values","Arrow","d","Sorter","Row","columns","onRowClick","resizable","sortBy","sortType","onHeaderClick","sorter","renderHeader","order","insetBlockStart","Datagrid","striped","cellPadding","empty","renderLoading","onSort","onScroll","onResize","useRef","scrollbar","rows","widths","styles","o","join","fws","isLeft","sum","slice","reduce","pre","cur","handleWidthChange","ws","prevSortBy","prevSortType","types","t","getNextSorter","find","sortFn","a","b","sorted","sort","reverse","current","tds","querySelector","from","scrollBarStyle","ScrollContainer","autoHide","autoHeight","autoHeightMax","renderView","InputContainer","tip","Input","initValue","prepend","clear","hideVisible","onEnter","visible","v","handleKeydown","code","HelperIcon","VisibilityRound","VisibilityOffRound","inputProps","onKeyDown","clearable","showHelper","Number","step","Infinity","hideControl","onInput","onBlur","getRangeNumber","getFormatNumber","formatInputValue","replaceAll","handleOperate","param","Textarea","autoSize","refTextarea","ta","firstChild","scrollHeight","Range","placeholder","range","handleSwitch","SyncAltRound","margin","Content","trigger","arrow","arrowProps","arrowCSS","pos","createPortal","Popup","showDelay","hideDelay","touchable","fitSize","watchResize","clickOutside","referToWindow","onVisibleChange","triggerRef","contentRef","show","toggling","useClickAway","tar","isContain","contains","handleShow","opacity","handleHide","action","eventMaps","useCreation","click","hover","onMouseEnter","onMouseLeave","focus","onFocus","contextmenu","onContextMenu","none","contentTouch","events","ResizeObserver","useResizeObserver","useLayoutEffect","_Fragment","Dates","month","weeks","renderDate","date","disabledDate","onDateClick","today","dayjs","dates","lastDateOfLastMonth","endOf","$W","$D","lastMonthDates","whatever","lastDate","handleDateClick","week","isSame","isSameMonth","isToday","MONTHS","YearMonth","unitMonth","unitYear","renderYear","renderMonth","year","Panel","m","selectedYear","years","selectable","$years","handleOperateMonth","next","getMoreYears","throttle","interval","isUp","deltaY","_","KeyboardArrowLeftRound","KeyboardArrowRightRound","onWheel","handleChangeMonth","extend","customParseFormat","FORMATTYPES","Datepicker","format","popupProps","setActive","dayJsValue","isValid","handleSetDate","CalendarMonthTwotone","Description","colon","labelWidth","labelAlign","equally","gridTemplateColumns","textAlign","Fragment","gridColumn","gridRow","Drawer","backdropClosable","hideCloseButton","onClose","setShow","toggable","handleBackdropClick","alignItems","List","renderLabel","Virtual","itemKey","renderItem","VList","ListItem","Dropdown","minWidth","more","moreProps","Li","Flex","Component","direction","wrap","gridColumns","justifyContent","flexDirection","flexWrap","Context","createContext","IFormInstance","rules","constructor","this","field","PubSub","publish","keys","validate","rule","validator","isAllValid","Form","form","initialValues","Provider","DefaultContent","footerLeft","okButtonProps","onOk","cancelButtonProps","showHeader","renderFooter","propsOk","propsCancel","Modal","closable","hideBackdrop","customized","bounced","setBounced","useForm","formRef","Field","update","useContext","args","subscribe","evt","unsubscribe","HookModal","useImperativeHandle","config","Text","Tag","weight","decoration","gradient","gradients","background","backgroundClip","fontWeight","textDecoration","Circle","pathLength","count","decimal","duration","easing","n","setN","number","z","start","performance","now","diff","raf","requestAnimationFrame","loop","percent","cancelAnimationFrame","pass","animate","Time","seconds","zero","units","time","l","unshift","formatTime","Line","barClass","dragging","renderCursor","Progress","draggable","toFixedValue","rect","handleMouseMove","handleMouseUp","Video","hideControls","autoplay","muted","volume","useOriginControls","timeProgressProps","volumeProgressProps","onFullScreenChange","playing","volumeCache","isFullscreen","$v","timeUpdateListener","paused","currentTime","playChangeListener","fsChangeListener","parentElement","fullscreenElement","volumeChangeListener","handlePlay","play","pause","handleStop","handleFullscreen","el","exitFullscreen","requestFullscreen","stop","fullscreen","getVideo","onCanPlay","controls","PauseRound","PlayArrowRound","StopRound","FullscreenExitRound","FullscreenRound","VolumeOffRound","VolumeDownRound","renderFile","IMAGE","src","VIDEO","FeedOutlined","initial","DefaultRenderFile","onRotate","onZoom","scale","translate","box","files","file","isImage","before","handleRotate","deg","handleMouseWheel","AspectRatioRound","OpenInNewRound","download","FileDownloadOutlined","RotateRightRound","RotateLeftRound","usePreview","modalProps","unMount","Image","initSize","lazyload","fallback","HideImageTwotone","fit","previewable","onLoad","onError","preview","setAttribute","dataset","iSize","objectFit","err","img","handleClick","AlignMap","center","GlobalConfig","ItemDefaultConfig","createContainer","handler","callout","close","queue","heights","tops","onShow","offsetHeight","bind","onHide","timer","renderItems","MessageItem","alignSelf","useModal","open","Page","page","setLoading","async","Pagination","defaultPage","total","sibling","prev","simple","jumper","renderEllipsis","MoreHorizRound","renderPage","setPage","totalPage","ceil","end","handlePageChange","p","Promise","resolve","defaultOk","defaultCancel","Popconfirm","InfoOutlined","extra","ok","cancel","popconfirmContent","RadioItem","Radio","dotClass","Options","val","filter","filterPlaceholder","onSelect","onFilter","SearchRound","CheckRound","displayValue","maxDisplay","flatMap","activeOptions","Select","hideClear","inputValue","filterValue","filterOptions","fv","filterFn","changeValue","handleSelect","handleFilterChange","hasValue","readOnly","UnfoldMoreRound","Divider","STATUS","defaultRenderIcon","renderIcon","line","Step","steps","transition","itemHeight","selfStyle","Swiper","display","scroll","pauseOnHover","dragOffset","indicator","renderIndicator","onBeforeSwipe","onAfterSwipe","listRef","timerRef","swipable","dragStart","initialized","displayItems","listSize","list","head","offsetPercent","trackStyle","indicatorsLoop","clearTimer","swipeTo","reset","lastDisplay","swipeNext","swipePrev","clientY","clientX","dragEnd","part","absOffset","abs","onMouseOver","itemProps","Tabs","tabs","bar","hideMore","renderMore","onTabChange","navRefs","barRef","navsRef","prevActive","barStyle","cachedTabs","overflow","useSize","keepDOM","cloned","pick","String","tab","tkey","scrollBy","deltaX","scrollWidth","nav","intersecting","isLine","passive","navs","flex","TreeList","depth","parent","contents","TreeItem","selected","partofs","checkable","renderExtra","onItemClick","onItemSelect","onItemCheck","expanded","expand","setExpand","handleExpand","fromToggle","handleItemClick","itemChecked","paddingLeft","KeyboardArrowDownRound","defaultNodeProps","Tree","disabledRelated","nodeMaps","Map","oNodeProps","isChecked","checkItem","shouldChanged","hasUnchecked","some","changes","parts","hasChecked","recursive","getChecked","getSelected","getPartofs","indeterminate","changedKeys","RenderFile","mode","onRemove","onPreview","CloseBtn","preload","ListAltRound","Upload","cardSize","limit","shouldUpload","uploader","onFilesChange","onUpload","inputRef","PlusSharp","CloudUploadTwotone","handleRemove","changed","URL","revokeObjectURL","handleUpload","forEach","f","handlePreview","getFileList","msg","currentFiles","same","pf","s","createObjectURL","at","enable","timeout","useRipple","closest","$box","$ripple","createRipple","cssText","insertAdjacentElement","classList","triggerRipple"],"mappings":"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"}